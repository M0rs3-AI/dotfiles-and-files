"use strict";var l=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var gt=l((MH,Qr)=>{function gg(r){return r&&r.__esModule?r:{default:r}}Qr.exports=gg,Qr.exports.__esModule=!0,Qr.exports.default=Qr.exports});var or=l((kH,Xr)=>{function Sg(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}Xr.exports=Sg,Xr.exports.__esModule=!0,Xr.exports.default=Xr.exports});var ur=l((UH,Jr)=>{function nh(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Eg(r,t,e){return t&&nh(r.prototype,t),e&&nh(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}Jr.exports=Eg,Jr.exports.__esModule=!0,Jr.exports.default=Jr.exports});var ih=l((LH,Fe)=>{function fs(r,t){return Fe.exports=fs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Fe.exports.__esModule=!0,Fe.exports.default=Fe.exports,fs(r,t)}Fe.exports=fs,Fe.exports.__esModule=!0,Fe.exports.default=Fe.exports});var oh=l((FH,$r)=>{var wg=ih();function Tg(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&wg(r,t)}$r.exports=Tg,$r.exports.__esModule=!0,$r.exports.default=$r.exports});var uh=l((BH,Be)=>{function ls(r){return Be.exports=ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Be.exports.__esModule=!0,Be.exports.default=Be.exports,ls(r)}Be.exports=ls,Be.exports.__esModule=!0,Be.exports.default=Be.exports});var sh=l((VH,en)=>{function Pg(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}en.exports=Pg,en.exports.__esModule=!0,en.exports.default=en.exports});var ah=l((WH,tn)=>{var Cg=uh().default,Ig=sh();function Rg(r,t){if(t&&(Cg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ig(r)}tn.exports=Rg,tn.exports.__esModule=!0,tn.exports.default=tn.exports});var ch=l((HH,Ve)=>{function hs(r){return Ve.exports=hs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ve.exports.__esModule=!0,Ve.exports.default=Ve.exports,hs(r)}Ve.exports=hs,Ve.exports.__esModule=!0,Ve.exports.default=Ve.exports});var ie=l(ne=>{"use strict";var Ag=ne&&ne.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ne,"__esModule",{value:!0});ne.PROTOCOL_ERROR=ne.SESSION_EXPIRED=ne.SERVICE_UNAVAILABLE=ne.Neo4jError=ne.newError=void 0;var jg="ServiceUnavailable";ne.SERVICE_UNAVAILABLE=jg;var qg="SessionExpired";ne.SESSION_EXPIRED=qg;var Ng="ProtocolError";ne.PROTOCOL_ERROR=Ng;var xg="N/A",fh=function(r){Ag(t,r);function t(e,n){var i=r.call(this,e)||this;return i.constructor=t,i.__proto__=t.prototype,i.code=n,i.name="Neo4jError",i}return t}(Error);ne.Neo4jError=fh;function Dg(r,t){return new fh(r,t??xg)}ne.newError=Dg});var Et=l(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.toString=le.toNumber=le.inSafeRange=le.isInt=le.int=void 0;var rn=ie(),lh=new Map,st=function(){function r(t,e){this.low=t||0,this.high=e||0}return r.prototype.inSafeRange=function(){return this.greaterThanOrEqual(r.MIN_SAFE_VALUE)&&this.lessThanOrEqual(r.MAX_SAFE_VALUE)},r.prototype.toInt=function(){return this.low},r.prototype.toNumber=function(){return this.high*St+(this.low>>>0)},r.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(St)+BigInt(this.low>>>0);var t=this.negate();return BigInt(-1)*(BigInt(t.high>>>0)*BigInt(St)+BigInt(t.low>>>0))},r.prototype.toNumberOrInfinity=function(){return this.lessThan(r.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(r.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},r.prototype.toString=function(t){if(t=t||10,t<2||t>36)throw RangeError("radix out of range: "+t);if(this.isZero())return"0";var e;if(this.isNegative())if(this.equals(r.MIN_VALUE)){var n=r.fromNumber(t),i=this.div(n);return e=i.multiply(n).subtract(this),i.toString(t)+e.toInt().toString(t)}else return"-"+this.negate().toString(t);var o=r.fromNumber(Math.pow(t,6));e=this;for(var u="";;){var s=e.div(o),c=e.subtract(s.multiply(o)).toInt()>>>0,a=c.toString(t);if(e=s,e.isZero())return a+u;for(;a.length<6;)a="0"+a;u=""+a+u}},r.prototype.getHighBits=function(){return this.high},r.prototype.getLowBits=function(){return this.low},r.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(r.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var t=this.high!==0?this.high:this.low,e=31;e>0&&(t&1<<e)===0;e--);return this.high!==0?e+33:e+1},r.prototype.isZero=function(){return this.high===0&&this.low===0},r.prototype.isNegative=function(){return this.high<0},r.prototype.isPositive=function(){return this.high>=0},r.prototype.isOdd=function(){return(this.low&1)===1},r.prototype.isEven=function(){return(this.low&1)===0},r.prototype.equals=function(t){var e=r.fromValue(t);return this.high===e.high&&this.low===e.low},r.prototype.notEquals=function(t){return!this.equals(t)},r.prototype.lessThan=function(t){return this.compare(t)<0},r.prototype.lessThanOrEqual=function(t){return this.compare(t)<=0},r.prototype.greaterThan=function(t){return this.compare(t)>0},r.prototype.greaterThanOrEqual=function(t){return this.compare(t)>=0},r.prototype.compare=function(t){var e=r.fromValue(t);if(this.equals(e))return 0;var n=this.isNegative(),i=e.isNegative();return n&&!i?-1:!n&&i?1:this.subtract(e).isNegative()?-1:1},r.prototype.negate=function(){return this.equals(r.MIN_VALUE)?r.MIN_VALUE:this.not().add(r.ONE)},r.prototype.add=function(t){var e=r.fromValue(t),n=this.high>>>16,i=this.high&65535,o=this.low>>>16,u=this.low&65535,s=e.high>>>16,c=e.high&65535,a=e.low>>>16,f=e.low&65535,h=0,p=0,y=0,O=0;return O+=u+f,y+=O>>>16,O&=65535,y+=o+a,p+=y>>>16,y&=65535,p+=i+c,h+=p>>>16,p&=65535,h+=n+s,h&=65535,r.fromBits(y<<16|O,h<<16|p)},r.prototype.subtract=function(t){var e=r.fromValue(t);return this.add(e.negate())},r.prototype.multiply=function(t){if(this.isZero())return r.ZERO;var e=r.fromValue(t);if(e.isZero())return r.ZERO;if(this.equals(r.MIN_VALUE))return e.isOdd()?r.MIN_VALUE:r.ZERO;if(e.equals(r.MIN_VALUE))return this.isOdd()?r.MIN_VALUE:r.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(_h)&&e.lessThan(_h))return r.fromNumber(this.toNumber()*e.toNumber());var n=this.high>>>16,i=this.high&65535,o=this.low>>>16,u=this.low&65535,s=e.high>>>16,c=e.high&65535,a=e.low>>>16,f=e.low&65535,h=0,p=0,y=0,O=0;return O+=u*f,y+=O>>>16,O&=65535,y+=o*f,p+=y>>>16,y&=65535,y+=u*a,p+=y>>>16,y&=65535,p+=i*f,h+=p>>>16,p&=65535,p+=o*a,h+=p>>>16,p&=65535,p+=u*c,h+=p>>>16,p&=65535,h+=n*f+i*a+o*c+u*s,h&=65535,r.fromBits(y<<16|O,h<<16|p)},r.prototype.div=function(t){var e=r.fromValue(t);if(e.isZero())throw(0,rn.newError)("division by zero");if(this.isZero())return r.ZERO;var n,i,o;if(this.equals(r.MIN_VALUE)){if(e.equals(r.ONE)||e.equals(r.NEG_ONE))return r.MIN_VALUE;if(e.equals(r.MIN_VALUE))return r.ONE;var u=this.shiftRight(1);return n=u.div(e).shiftLeft(1),n.equals(r.ZERO)?e.isNegative()?r.ONE:r.NEG_ONE:(i=this.subtract(e.multiply(n)),o=n.add(i.div(e)),o)}else if(e.equals(r.MIN_VALUE))return r.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();for(o=r.ZERO,i=this;i.greaterThanOrEqual(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),c=s<=48?1:Math.pow(2,s-48),a=r.fromNumber(n),f=a.multiply(e);f.isNegative()||f.greaterThan(i);)n-=c,a=r.fromNumber(n),f=a.multiply(e);a.isZero()&&(a=r.ONE),o=o.add(a),i=i.subtract(f)}return o},r.prototype.modulo=function(t){var e=r.fromValue(t);return this.subtract(this.div(e).multiply(e))},r.prototype.not=function(){return r.fromBits(~this.low,~this.high)},r.prototype.and=function(t){var e=r.fromValue(t);return r.fromBits(this.low&e.low,this.high&e.high)},r.prototype.or=function(t){var e=r.fromValue(t);return r.fromBits(this.low|e.low,this.high|e.high)},r.prototype.xor=function(t){var e=r.fromValue(t);return r.fromBits(this.low^e.low,this.high^e.high)},r.prototype.shiftLeft=function(t){var e=r.toNumber(t);return(e&=63)===0?r.ZERO:e<32?r.fromBits(this.low<<e,this.high<<e|this.low>>>32-e):r.fromBits(0,this.low<<e-32)},r.prototype.shiftRight=function(t){var e=r.toNumber(t);return(e&=63)===0?r.ZERO:t<32?r.fromBits(this.low>>>e|this.high<<32-e,this.high>>e):r.fromBits(this.high>>e-32,this.high>=0?0:-1)},r.isInteger=function(t){return(t&&t.__isInteger__)===!0},r.fromInt=function(t){var e,n;return t=t|0,t>=-128&&t<128&&(n=lh.get(t),n)?n:(e=new r(t,t<0?-1:0),t>=-128&&t<128&&lh.set(t,e),e)},r.fromBits=function(t,e){return new r(t,e)},r.fromNumber=function(t){return isNaN(t)||!isFinite(t)?r.ZERO:t<=-ph?r.MIN_VALUE:t+1>=ph?r.MAX_VALUE:t<0?r.fromNumber(-t).negate():new r(t%St|0,t/St|0)},r.fromString=function(t,e,n){var i=n===void 0?{}:n,o=i.strictStringValidation;if(t.length===0)throw(0,rn.newError)("number format error: empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return r.ZERO;if(e=e||10,e<2||e>36)throw(0,rn.newError)("radix out of range: "+e);var u;if((u=t.indexOf("-"))>0)throw(0,rn.newError)('number format error: interior "-" character: '+t);if(u===0)return r.fromString(t.substring(1),e).negate();for(var s=r.fromNumber(Math.pow(e,8)),c=r.ZERO,a=0;a<t.length;a+=8){var f=Math.min(8,t.length-a),h=t.substring(a,a+f),p=parseInt(h,e);if(o===!0&&!kg(h,p,e))throw(0,rn.newError)('number format error: "'+h+'" is NaN in radix '+e+": "+t);if(f<8){var y=r.fromNumber(Math.pow(e,f));c=c.multiply(y).add(r.fromNumber(p))}else c=c.multiply(s),c=c.add(r.fromNumber(p))}return c},r.fromValue=function(t,e){return e===void 0&&(e={}),t instanceof r?t:typeof t=="number"?r.fromNumber(t):typeof t=="string"?r.fromString(t,void 0,e):typeof t=="bigint"?r.fromString(t.toString()):new r(t.low,t.high)},r.toNumber=function(t){switch(typeof t){case"number":return t;case"bigint":return Number(t);default:return r.fromValue(t).toNumber()}},r.toString=function(t,e){return r.fromValue(t).toString(e)},r.inSafeRange=function(t){return r.fromValue(t).inSafeRange()},r.ZERO=r.fromInt(0),r.ONE=r.fromInt(1),r.NEG_ONE=r.fromInt(-1),r.MAX_VALUE=r.fromBits(-1,2147483647),r.MIN_VALUE=r.fromBits(0,-2147483648),r.MIN_SAFE_VALUE=r.fromBits(1,-2097152),r.MAX_SAFE_VALUE=r.fromBits(-1,2097151),r.__isInteger__=!0,r}();function Mg(r,t,e){var n=r.toString(t),i=Math.max(e-n.length,0),o="0".repeat(i);return""+o+n}function kg(r,t,e){return!Number.isNaN(r)&&!Number.isNaN(t)&&Mg(t,e,r.length)===r.toLowerCase()}Object.defineProperty(st.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var hh=1<<16,Ug=1<<24,St=hh*hh,Lg=St*St,ph=Lg/2,_h=st.fromInt(Ug),Fg=st.fromValue;le.int=Fg;var Bg=st.isInteger;le.isInt=Bg;var Vg=st.inSafeRange;le.inSafeRange=Vg;var Wg=st.toNumber;le.toNumber=Wg;var Hg=st.toString;le.toString=Hg;le.default=st});var ps=l(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.getBrokenObjectReason=at.isBrokenObject=at.createBrokenObject=void 0;var dh="__isBrokenObject__",vh="__reason__";function zg(r,t){t===void 0&&(t={});var e=function(){throw r};return new Proxy(t,{get:function(n,i){if(i===dh)return!0;if(i===vh)return r;if(i==="toJSON")return;e()},set:e,apply:e,construct:e,defineProperty:e,deleteProperty:e,getOwnPropertyDescriptor:e,getPrototypeOf:e,has:e,isExtensible:e,ownKeys:e,preventExtensions:e,setPrototypeOf:e})}at.createBrokenObject=zg;function Yg(r){return r!==null&&typeof r=="object"&&r[dh]===!0}at.isBrokenObject=Yg;function Zg(r){return r[vh]}at.getBrokenObjectReason=Zg});var go=l(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.stringify=void 0;var bh=ps();function Gg(r){return JSON.stringify(r,function(t,e){return(0,bh.isBrokenObject)(e)?{__isBrokenObject__:!0,__reason__:(0,bh.getBrokenObjectReason)(e)}:typeof e=="bigint"?e+"n":e})}Oo.stringify=Gg});var he=l(N=>{"use strict";Object.defineProperty(N,"__esModule",{value:!0});N.ENCRYPTION_OFF=N.ENCRYPTION_ON=N.validateQueryAndParameters=N.assertValidDate=N.assertNumberOrInteger=N.assertNumber=N.assertString=N.assertObject=N.isString=N.isObject=N.isEmptyObjectOrNull=void 0;var Kg=Et(),sr=go(),Qg="ENCRYPTION_ON";N.ENCRYPTION_ON=Qg;var Xg="ENCRYPTION_OFF";N.ENCRYPTION_OFF=Xg;function Jg(r){if(r===null)return!0;if(!So(r))return!1;for(var t in r)if(Object.prototype.hasOwnProperty.bind(r,t))return!1;return!0}N.isEmptyObjectOrNull=Jg;function So(r){return typeof r=="object"&&!Array.isArray(r)&&r!==null}N.isObject=So;function $g(r,t,e){var n="",i=t||{},o=e?.skipAsserts||!1;return typeof r=="string"?n=r:r instanceof String?n=r.toString():typeof r=="object"&&r.text&&(n=r.text,i=r.parameters||{}),o||(iS(n),oS(i)),{validatedQuery:n,params:i}}N.validateQueryAndParameters=$g;function eS(r,t){if(!So(r))throw new TypeError(t+" expected to be an object but was: "+(0,sr.stringify)(r));return r}N.assertObject=eS;function yh(r,t){if(!mh(r))throw new TypeError(t+" expected to be string but was: "+(0,sr.stringify)(r));return r}N.assertString=yh;function tS(r,t){if(typeof r!="number")throw new TypeError(t+" expected to be a number but was: "+(0,sr.stringify)(r));return r}N.assertNumber=tS;function rS(r,t){if(typeof r!="number"&&typeof r!="bigint"&&!(0,Kg.isInt)(r))throw new TypeError(t+" expected to be either a number or an Integer object but was: "+(0,sr.stringify)(r));return r}N.assertNumberOrInteger=rS;function nS(r,t){if(Object.prototype.toString.call(r)!=="[object Date]")throw new TypeError(t+" expected to be a standard JavaScript Date but was: "+(0,sr.stringify)(r));if(Number.isNaN(r.getTime()))throw new TypeError(t+" expected to be valid JavaScript Date but its time was NaN: "+(0,sr.stringify)(r));return r}N.assertValidDate=nS;function iS(r){if(yh(r,"Cypher query"),r.trim().length===0)throw new TypeError("Cypher query is expected to be a non-empty string.")}function oS(r){if(!So(r)){var t=r.constructor?" "+r.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:"+t+" "+r)}}function mh(r){return Object.prototype.toString.call(r)==="[object String]"}N.isString=mh});var vs=l(_=>{"use strict";var uS=_&&_.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),sS=_&&_.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),aS=_&&_.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&uS(t,r,e);return sS(t,r),t};Object.defineProperty(_,"__esModule",{value:!0});_.floorMod=_.floorDiv=_.assertValidZoneId=_.assertValidNanosecond=_.assertValidSecond=_.assertValidMinute=_.assertValidHour=_.assertValidDay=_.assertValidMonth=_.assertValidYear=_.timeZoneOffsetInSeconds=_.totalNanoseconds=_.newDate=_.toStandardDate=_.isoStringToStandardDate=_.dateToIsoString=_.timeZoneOffsetToIsoString=_.timeToIsoString=_.durationToIsoString=_.dateToEpochDay=_.localDateTimeToEpochSecond=_.localTimeToNanoOfDay=_.normalizeNanosecondsForDuration=_.normalizeSecondsForDuration=_.SECONDS_PER_DAY=_.DAYS_PER_400_YEAR_CYCLE=_.DAYS_0000_TO_1970=_.NANOS_PER_HOUR=_.NANOS_PER_MINUTE=_.NANOS_PER_MILLISECOND=_.NANOS_PER_SECOND=_.SECONDS_PER_HOUR=_.SECONDS_PER_MINUTE=_.MINUTES_PER_HOUR=_.NANOSECOND_OF_SECOND_RANGE=_.SECOND_OF_MINUTE_RANGE=_.MINUTE_OF_HOUR_RANGE=_.HOUR_OF_DAY_RANGE=_.DAY_OF_MONTH_RANGE=_.MONTH_OF_YEAR_RANGE=_.YEAR_RANGE=void 0;var A=aS(Et()),Oh=ie(),cS=he(),wt=function(){function r(t,e){this._minNumber=t,this._maxNumber=e,this._minInteger=(0,A.int)(t),this._maxInteger=(0,A.int)(e)}return r.prototype.contains=function(t){if((0,A.isInt)(t)&&t instanceof A.default)return t.greaterThanOrEqual(this._minInteger)&&t.lessThanOrEqual(this._maxInteger);if(typeof t=="bigint"){var e=(0,A.int)(t);return e.greaterThanOrEqual(this._minInteger)&&e.lessThanOrEqual(this._maxInteger)}else return t>=this._minNumber&&t<=this._maxNumber},r.prototype.toString=function(){return"["+this._minNumber+", "+this._maxNumber+"]"},r}();_.YEAR_RANGE=new wt(-999999999,999999999);_.MONTH_OF_YEAR_RANGE=new wt(1,12);_.DAY_OF_MONTH_RANGE=new wt(1,31);_.HOUR_OF_DAY_RANGE=new wt(0,23);_.MINUTE_OF_HOUR_RANGE=new wt(0,59);_.SECOND_OF_MINUTE_RANGE=new wt(0,59);_.NANOSECOND_OF_SECOND_RANGE=new wt(0,999999999);_.MINUTES_PER_HOUR=60;_.SECONDS_PER_MINUTE=60;_.SECONDS_PER_HOUR=_.SECONDS_PER_MINUTE*_.MINUTES_PER_HOUR;_.NANOS_PER_SECOND=1e9;_.NANOS_PER_MILLISECOND=1e6;_.NANOS_PER_MINUTE=_.NANOS_PER_SECOND*_.SECONDS_PER_MINUTE;_.NANOS_PER_HOUR=_.NANOS_PER_MINUTE*_.MINUTES_PER_HOUR;_.DAYS_0000_TO_1970=719528;_.DAYS_PER_400_YEAR_CYCLE=146097;_.SECONDS_PER_DAY=86400;function fS(r,t){return(0,A.int)(r).add(ds(t,_.NANOS_PER_SECOND))}_.normalizeSecondsForDuration=fS;function lS(r){return Sh(r,_.NANOS_PER_SECOND)}_.normalizeNanosecondsForDuration=lS;function hS(r,t,e,n){r=(0,A.int)(r),t=(0,A.int)(t),e=(0,A.int)(e),n=(0,A.int)(n);var i=r.multiply(_.NANOS_PER_HOUR);return i=i.add(t.multiply(_.NANOS_PER_MINUTE)),i=i.add(e.multiply(_.NANOS_PER_SECOND)),i.add(n)}_.localTimeToNanoOfDay=hS;function pS(r,t,e,n,i,o,u){var s=gh(r,t,e),c=jS(n,i,o);return s.multiply(_.SECONDS_PER_DAY).add(c)}_.localDateTimeToEpochSecond=pS;function gh(r,t,e){r=(0,A.int)(r),t=(0,A.int)(t),e=(0,A.int)(e);var n=r.multiply(365);return r.greaterThanOrEqual(0)?n=n.add(r.add(3).div(4).subtract(r.add(99).div(100)).add(r.add(399).div(400))):n=n.subtract(r.div(-4).subtract(r.div(-100)).add(r.div(-400))),n=n.add(t.multiply(367).subtract(362).div(12)),n=n.add(e.subtract(1)),t.greaterThan(2)&&(n=n.subtract(1),qS(r)||(n=n.subtract(1))),n.subtract(_.DAYS_0000_TO_1970)}_.dateToEpochDay=gh;function _S(r,t,e,n){var i=pe(r),o=pe(t),u=NS(e,n);return"P"+i+"M"+o+"DT"+u+"S"}_.durationToIsoString=_S;function dS(r,t,e,n){var i=pe(r,2),o=pe(t,2),u=pe(e,2),s=_s(n);return i+":"+o+":"+u+s}_.timeToIsoString=dS;function vS(r){if(r=(0,A.int)(r),r.equals(0))return"Z";var t=r.isNegative();t&&(r=r.multiply(-1));var e=t?"-":"+",n=pe(r.div(_.SECONDS_PER_HOUR),2),i=pe(r.div(_.SECONDS_PER_MINUTE).modulo(_.MINUTES_PER_HOUR),2),o=r.modulo(_.SECONDS_PER_MINUTE),u=o.equals(0)?null:pe(o,2);return u?""+e+n+":"+i+":"+u:""+e+n+":"+i}_.timeZoneOffsetToIsoString=vS;function bS(r,t,e){var n=xS(r),i=pe(t,2),o=pe(e,2);return n+"-"+i+"-"+o}_.dateToIsoString=bS;function yS(r){return new Date(r)}_.isoStringToStandardDate=yS;function mS(r){return new Date(r)}_.toStandardDate=mS;function OS(r){return new Date(r)}_.newDate=OS;function gS(r,t){t=t||0;var e=r.getMilliseconds()*_.NANOS_PER_MILLISECOND;return DS(t,e)}_.totalNanoseconds=gS;function SS(r){var t=r.getSeconds()>=r.getUTCSeconds()?r.getSeconds()-r.getUTCSeconds():r.getSeconds()-r.getUTCSeconds()+60,e=r.getTimezoneOffset();return e===0?0+t:-1*e*_.SECONDS_PER_MINUTE+t}_.timeZoneOffsetInSeconds=SS;function ES(r){return Tt(r,_.YEAR_RANGE,"Year")}_.assertValidYear=ES;function wS(r){return Tt(r,_.MONTH_OF_YEAR_RANGE,"Month")}_.assertValidMonth=wS;function TS(r){return Tt(r,_.DAY_OF_MONTH_RANGE,"Day")}_.assertValidDay=TS;function PS(r){return Tt(r,_.HOUR_OF_DAY_RANGE,"Hour")}_.assertValidHour=PS;function CS(r){return Tt(r,_.MINUTE_OF_HOUR_RANGE,"Minute")}_.assertValidMinute=CS;function IS(r){return Tt(r,_.SECOND_OF_MINUTE_RANGE,"Second")}_.assertValidSecond=IS;function RS(r){return Tt(r,_.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")}_.assertValidNanosecond=RS;function AS(r,t){try{Intl.DateTimeFormat(void 0,{timeZone:t})}catch{throw(0,Oh.newError)(r+' is expected to be a valid ZoneId but was: "'+t+'"')}}_.assertValidZoneId=AS;function Tt(r,t,e){if((0,cS.assertNumberOrInteger)(r,e),!t.contains(r))throw(0,Oh.newError)(e+" is expected to be in range "+t+" but was: "+r);return r}function jS(r,t,e){r=(0,A.int)(r),t=(0,A.int)(t),e=(0,A.int)(e);var n=r.multiply(_.SECONDS_PER_HOUR);return n=n.add(t.multiply(_.SECONDS_PER_MINUTE)),n.add(e)}function qS(r){return r=(0,A.int)(r),r.modulo(4).equals(0)?r.modulo(100).equals(0)?!!r.modulo(400).equals(0):!0:!1}function ds(r,t){r=(0,A.int)(r),t=(0,A.int)(t);var e=r.div(t);return r.isPositive()!==t.isPositive()&&e.multiply(t).notEquals(r)&&(e=e.subtract(1)),e}_.floorDiv=ds;function Sh(r,t){return r=(0,A.int)(r),t=(0,A.int)(t),r.subtract(ds(r,t).multiply(t))}_.floorMod=Sh;function NS(r,t){r=(0,A.int)(r),t=(0,A.int)(t);var e,n,i=r.isNegative(),o=t.greaterThan(0);return i&&o?r.equals(-1)?e="-0":e=r.add(1).toString():e=r.toString(),o&&(i?n=_s(t.negate().add(2*_.NANOS_PER_SECOND).modulo(_.NANOS_PER_SECOND)):n=_s(t.add(_.NANOS_PER_SECOND).modulo(_.NANOS_PER_SECOND))),n?e+n:e}function _s(r){return r=(0,A.int)(r),r.equals(0)?"":"."+pe(r,9)}function xS(r){var t=(0,A.int)(r);return t.isNegative()||t.greaterThan(9999)?pe(t,6,{usePositiveSign:!0}):pe(t,4)}function pe(r,t,e){r=(0,A.int)(r);var n=r.isNegative();n&&(r=r.negate());var i=r.toString();if(t)for(;i.length<t;)i="0"+i;return n?"-"+i:e?.usePositiveSign===!0?"+"+i:i}function DS(r,t){return r instanceof A.default?r.add(t):typeof r=="bigint"?r+BigInt(t):r+t}});var kh=l(C=>{"use strict";var MS=C&&C.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),kS=C&&C.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Eh=C&&C.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&MS(t,r,e);return kS(t,r),t},US=C&&C.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],u;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){u={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(u)throw u.error}}return o};Object.defineProperty(C,"__esModule",{value:!0});C.isDateTime=C.DateTime=C.isLocalDateTime=C.LocalDateTime=C.isDate=C.Date=C.isTime=C.Time=C.isLocalTime=C.LocalTime=C.isDuration=C.Duration=void 0;var E=Eh(vs()),We=he(),LS=ie(),nn=Eh(Et()),ar={value:!0,enumerable:!1,configurable:!1,writable:!1},wh="__isDuration__",Th="__isLocalTime__",Ph="__isTime__",Ch="__isDate__",Ih="__isLocalDateTime__",Rh="__isDateTime__",Ah=function(){function r(t,e,n,i){this.months=(0,We.assertNumberOrInteger)(t,"Months"),this.days=(0,We.assertNumberOrInteger)(e,"Days"),(0,We.assertNumberOrInteger)(n,"Seconds"),(0,We.assertNumberOrInteger)(i,"Nanoseconds"),this.seconds=E.normalizeSecondsForDuration(n,i),this.nanoseconds=E.normalizeNanosecondsForDuration(i),Object.freeze(this)}return r.prototype.toString=function(){return E.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},r}();C.Duration=Ah;Object.defineProperty(Ah.prototype,wh,ar);function FS(r){return cr(r,wh)}C.isDuration=FS;var jh=function(){function r(t,e,n,i){this.hour=E.assertValidHour(t),this.minute=E.assertValidMinute(e),this.second=E.assertValidSecond(n),this.nanosecond=E.assertValidNanosecond(i),Object.freeze(this)}return r.fromStandardDate=function(t,e){on(t,e);var n=E.totalNanoseconds(t,e);return new r(t.getHours(),t.getMinutes(),t.getSeconds(),n instanceof nn.default?n.toInt():typeof n=="bigint"?(0,nn.int)(n).toInt():n)},r.prototype.toString=function(){return E.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},r}();C.LocalTime=jh;Object.defineProperty(jh.prototype,Th,ar);function BS(r){return cr(r,Th)}C.isLocalTime=BS;var qh=function(){function r(t,e,n,i,o){this.hour=E.assertValidHour(t),this.minute=E.assertValidMinute(e),this.second=E.assertValidSecond(n),this.nanosecond=E.assertValidNanosecond(i),this.timeZoneOffsetSeconds=(0,We.assertNumberOrInteger)(o,"Time zone offset in seconds"),Object.freeze(this)}return r.fromStandardDate=function(t,e){return on(t,e),new r(t.getHours(),t.getMinutes(),t.getSeconds(),(0,nn.toNumber)(E.totalNanoseconds(t,e)),E.timeZoneOffsetInSeconds(t))},r.prototype.toString=function(){return E.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+E.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},r}();C.Time=qh;Object.defineProperty(qh.prototype,Ph,ar);function VS(r){return cr(r,Ph)}C.isTime=VS;var Nh=function(){function r(t,e,n){this.year=E.assertValidYear(t),this.month=E.assertValidMonth(e),this.day=E.assertValidDay(n),Object.freeze(this)}return r.fromStandardDate=function(t){return on(t),new r(t.getFullYear(),t.getMonth()+1,t.getDate())},r.prototype.toString=function(){return E.dateToIsoString(this.year,this.month,this.day)},r}();C.Date=Nh;Object.defineProperty(Nh.prototype,Ch,ar);function WS(r){return cr(r,Ch)}C.isDate=WS;var xh=function(){function r(t,e,n,i,o,u,s){this.year=E.assertValidYear(t),this.month=E.assertValidMonth(e),this.day=E.assertValidDay(n),this.hour=E.assertValidHour(i),this.minute=E.assertValidMinute(o),this.second=E.assertValidSecond(u),this.nanosecond=E.assertValidNanosecond(s),Object.freeze(this)}return r.fromStandardDate=function(t,e){return on(t,e),new r(t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),(0,nn.toNumber)(E.totalNanoseconds(t,e)))},r.prototype.toString=function(){return Mh(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},r}();C.LocalDateTime=xh;Object.defineProperty(xh.prototype,Ih,ar);function HS(r){return cr(r,Ih)}C.isLocalDateTime=HS;var Dh=function(){function r(t,e,n,i,o,u,s,c,a){this.year=E.assertValidYear(t),this.month=E.assertValidMonth(e),this.day=E.assertValidDay(n),this.hour=E.assertValidHour(i),this.minute=E.assertValidMinute(o),this.second=E.assertValidSecond(u),this.nanosecond=E.assertValidNanosecond(s);var f=US(YS(c,a),2),h=f[0],p=f[1];this.timeZoneOffsetSeconds=h,this.timeZoneId=p||void 0,Object.freeze(this)}return r.fromStandardDate=function(t,e){return on(t,e),new r(t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),(0,nn.toNumber)(E.totalNanoseconds(t,e)),E.timeZoneOffsetInSeconds(t),null)},r.prototype.toString=function(){var t=Mh(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),e=this.timeZoneId?"["+this.timeZoneId+"]":E.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds||0);return t+e},r}();C.DateTime=Dh;Object.defineProperty(Dh.prototype,Rh,ar);function zS(r){return cr(r,Rh)}C.isDateTime=zS;function cr(r,t){return(r&&r[t])===!0}function Mh(r,t,e,n,i,o,u){return E.dateToIsoString(r,t,e)+"T"+E.timeToIsoString(n,i,o,u)}function YS(r,t){var e=r||r===0,n=t&&t!=="";if(!e&&!n)throw(0,LS.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: "+r+" and id: "+t);var i=[void 0,void 0];return e&&((0,We.assertNumberOrInteger)(r,"Time zone offset in seconds"),i[0]=r),n&&((0,We.assertString)(t,"Time zone ID"),E.assertValidZoneId("Time zone ID",t),i[1]=t),i}function on(r,t){(0,We.assertValidDate)(r,"Standard date"),t!=null&&(0,We.assertNumberOrInteger)(t,"Nanosecond")}});var Zh=l(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.isPathSegment=F.PathSegment=F.isPath=F.Path=F.isUnboundRelationship=F.UnboundRelationship=F.isRelationship=F.Relationship=F.isNode=F.Node=void 0;var bs=go(),un={value:!0,enumerable:!1,configurable:!1,writable:!1},Uh="__isNode__",Lh="__isRelationship__",Fh="__isUnboundRelationship__",Bh="__isPath__",Vh="__isPathSegment__";function sn(r,t){return(r&&r[t])===!0}var Wh=function(){function r(t,e,n){this.identity=t,this.labels=e,this.properties=n}return r.prototype.toString=function(){for(var t="("+this.identity,e=0;e<this.labels.length;e++)t+=":"+this.labels[e];var n=Object.keys(this.properties);if(n.length>0){t+=" {";for(var e=0;e<n.length;e++)e>0&&(t+=","),t+=n[e]+":"+(0,bs.stringify)(this.properties[n[e]]);t+="}"}return t+=")",t},r}();F.Node=Wh;Object.defineProperty(Wh.prototype,Uh,un);function ZS(r){return sn(r,Uh)}F.isNode=ZS;var ys=function(){function r(t,e,n,i,o){this.identity=t,this.start=e,this.end=n,this.type=i,this.properties=o}return r.prototype.toString=function(){var t="("+this.start+")-[:"+this.type,e=Object.keys(this.properties);if(e.length>0){t+=" {";for(var n=0;n<e.length;n++)n>0&&(t+=","),t+=e[n]+":"+(0,bs.stringify)(this.properties[e[n]]);t+="}"}return t+="]->("+this.end+")",t},r}();F.Relationship=ys;Object.defineProperty(ys.prototype,Lh,un);function GS(r){return sn(r,Lh)}F.isRelationship=GS;var Hh=function(){function r(t,e,n){this.identity=t,this.type=e,this.properties=n}return r.prototype.bind=function(t,e){return new ys(this.identity,t,e,this.type,this.properties)},r.prototype.toString=function(){var t="-[:"+this.type,e=Object.keys(this.properties);if(e.length>0){t+=" {";for(var n=0;n<e.length;n++)n>0&&(t+=","),t+=e[n]+":"+(0,bs.stringify)(this.properties[e[n]]);t+="}"}return t+="]->",t},r}();F.UnboundRelationship=Hh;Object.defineProperty(Hh.prototype,Fh,un);function KS(r){return sn(r,Fh)}F.isUnboundRelationship=KS;var zh=function(){function r(t,e,n){this.start=t,this.relationship=e,this.end=n}return r}();F.PathSegment=zh;Object.defineProperty(zh.prototype,Vh,un);function QS(r){return sn(r,Vh)}F.isPathSegment=QS;var Yh=function(){function r(t,e,n){this.start=t,this.end=e,this.segments=n,this.length=n.length}return r}();F.Path=Yh;Object.defineProperty(Yh.prototype,Bh,un);function XS(r){return sn(r,Bh)}F.isPath=XS});var Kh=l(He=>{"use strict";var ms=He&&He.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(a){return function(f){return c([a,f])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,i=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){e.label=a[1];break}if(a[0]===6&&e.label<o[1]){e.label=o[1],o=a;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(a);break}o[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(r,e)}catch(f){a=[6,f],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Os=He&&He.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},gs=He&&He.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],u;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){u={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(u)throw u.error}}return o};Object.defineProperty(He,"__esModule",{value:!0});var Gh=ie();function JS(r){var t={};return r.forEach(function(e,n){t[e]=n}),t}var $S=function(){function r(t,e,n){this.keys=t,this.length=t.length,this._fields=e,this._fieldLookup=n||JS(t)}return r.prototype.forEach=function(t){var e,n;try{for(var i=Os(this.entries()),o=i.next();!o.done;o=i.next()){var u=gs(o.value,2),s=u[0],c=u[1];t(c,s,this)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},r.prototype.map=function(t){var e,n,i=[];try{for(var o=Os(this.entries()),u=o.next();!u.done;u=o.next()){var s=gs(u.value,2),c=s[0],a=s[1];i.push(t(a,c,this))}}catch(f){e={error:f}}finally{try{u&&!u.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i},r.prototype.entries=function(){var t;return ms(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,[this.keys[t],this._fields[t]]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},r.prototype.values=function(){var t;return ms(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,this._fields[t]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},r.prototype[Symbol.iterator]=function(){var t;return ms(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,this._fields[t]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},r.prototype.toObject=function(){var t,e,n={};try{for(var i=Os(this.entries()),o=i.next();!o.done;o=i.next()){var u=gs(o.value,2),s=u[0],c=u[1];n[s]=c}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return n},r.prototype.get=function(t){var e;if(typeof t!="number"){if(e=this._fieldLookup[t],e===void 0)throw(0,Gh.newError)("This record has no field with key '"+t+"', available key are: ["+this.keys+"].")}else e=t;if(e>this._fields.length-1||e<0)throw(0,Gh.newError)("This record has no field with index '"+e+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[e]},r.prototype.has=function(t){return typeof t=="number"?t>=0&&t<this._fields.length:this._fieldLookup[t]!==void 0},r}();He.default=$S});var Jh=l(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.isPoint=fr.Point=void 0;var Eo=he(),Qh="__isPoint__",Xh=function(){function r(t,e,n,i){this.srid=(0,Eo.assertNumberOrInteger)(t,"SRID"),this.x=(0,Eo.assertNumber)(e,"X coordinate"),this.y=(0,Eo.assertNumber)(n,"Y coordinate"),this.z=i==null?i:(0,Eo.assertNumber)(i,"Z coordinate"),Object.freeze(this)}return r.prototype.toString=function(){return this.z||this.z===0?"Point{srid="+Pt(this.srid)+", x="+Pt(this.x)+", y="+Pt(this.y)+", z="+Pt(this.z)+"}":"Point{srid="+Pt(this.srid)+", x="+Pt(this.x)+", y="+Pt(this.y)+"}"},r}();fr.Point=Xh;function Pt(r){return Number.isInteger(r)?r+".0":r.toString()}Object.defineProperty(Xh.prototype,Qh,{value:!0,enumerable:!1,configurable:!1,writable:!1});function eE(r){return(r&&r[Qh])===!0}fr.isPoint=eE});var ws=l(M=>{"use strict";var tE=M&&M.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),rE=M&&M.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),nE=M&&M.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&tE(t,r,e);return rE(t,r),t};Object.defineProperty(M,"__esModule",{value:!0});M.Stats=M.QueryStatistics=M.ProfiledPlan=M.Plan=M.Notification=M.ServerInfo=M.queryType=void 0;var $h=nE(Et()),iE=function(){function r(t,e,n,i){this.query={text:t,parameters:e},this.queryType=n.type,this.counters=new ep(n.stats||{}),this.updateStatistics=this.counters,this.plan=n.plan||n.profile?new Ss(n.plan||n.profile):!1,this.profile=n.profile?new Es(n.profile):!1,this.notifications=this._buildNotifications(n.notifications),this.server=new rp(n.server,i),this.resultConsumedAfter=n.result_consumed_after,this.resultAvailableAfter=n.result_available_after,this.database={name:n.db||null}}return r.prototype._buildNotifications=function(t){return t?t.map(function(e){return new tp(e)}):[]},r.prototype.hasPlan=function(){return this.plan instanceof Ss},r.prototype.hasProfile=function(){return this.profile instanceof Es},r}(),Ss=function(){function r(t){this.operatorType=t.operatorType,this.identifiers=t.identifiers,this.arguments=t.args,this.children=t.children?t.children.map(function(e){return new r(e)}):[]}return r}();M.Plan=Ss;var Es=function(){function r(t){this.operatorType=t.operatorType,this.identifiers=t.identifiers,this.arguments=t.args,this.dbHits=lr("dbHits",t),this.rows=lr("rows",t),this.pageCacheMisses=lr("pageCacheMisses",t),this.pageCacheHits=lr("pageCacheHits",t),this.pageCacheHitRatio=lr("pageCacheHitRatio",t),this.time=lr("time",t),this.children=t.children?t.children.map(function(e){return new r(e)}):[]}return r.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},r}();M.ProfiledPlan=Es;var oE=function(){function r(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0}return r}();M.Stats=oE;var ep=function(){function r(t){var e=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(t).forEach(function(n){var i=n.replace(/(-\w)/g,function(o){return o[1].toUpperCase()});i in e._stats?e._stats[i]=hr(t[n]):i==="systemUpdates"?e._systemUpdates=hr(t[n]):i==="containsSystemUpdates"?e._containsSystemUpdates=t[n]:i==="containsUpdates"&&(e._containsUpdates=t[n])}),this._stats=Object.freeze(this._stats)}return r.prototype.containsUpdates=function(){var t=this;return this._containsUpdates!==void 0?this._containsUpdates:Object.keys(this._stats).reduce(function(e,n){return e+t._stats[n]},0)>0},r.prototype.updates=function(){return this._stats},r.prototype.containsSystemUpdates=function(){return this._containsSystemUpdates!==void 0?this._containsSystemUpdates:this._systemUpdates>0},r.prototype.systemUpdates=function(){return this._systemUpdates},r}();M.QueryStatistics=ep;var tp=function(){function r(t){this.code=t.code,this.title=t.title,this.description=t.description,this.severity=t.severity,this.position=r._constructPosition(t.position)}return r._constructPosition=function(t){return t?{offset:hr(t.offset),line:hr(t.line),column:hr(t.column)}:{}},r}();M.Notification=tp;var rp=function(){function r(t,e){t&&(this.address=t.address,this.version=t.version,this.agent=t.version),this.protocolVersion=e}return r}();M.ServerInfo=rp;function hr(r){return r instanceof $h.default?r.toInt():typeof r=="bigint"?(0,$h.int)(r).toInt():r}function lr(r,t,e){if(e===void 0&&(e=0),r in t){var n=t[r];return hr(n)}else return e}var uE={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"};M.queryType=uE;M.default=iE});var wo=l(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.FailedObserver=pr.CompletedObserver=void 0;var sE=function(){function r(){}return r.prototype.subscribe=function(t){an(t,t.onKeys,[]),an(t,t.onCompleted,{})},r.prototype.cancel=function(){},r.prototype.prepareToHandleSingleResponse=function(){},r.prototype.markCompleted=function(){},r.prototype.onError=function(t){throw Error("CompletedObserver not supposed to call onError")},r}();pr.CompletedObserver=sE;var aE=function(){function r(t){var e=t.error,n=t.onError;this._error=e,this._beforeError=n,this._observers=[],this.onError(e)}return r.prototype.subscribe=function(t){an(t,t.onError,this._error),this._observers.push(t)},r.prototype.onError=function(t){var e=this;Promise.resolve(an(this,this._beforeError,t)).then(function(){return e._observers.forEach(function(n){return an(n,n.onError,t)})})},r.prototype.cancel=function(){},r.prototype.prepareToHandleSingleResponse=function(){},r.prototype.markCompleted=function(){},r}();pr.FailedObserver=aE;function an(r,t,e){t&&t.bind(r)(e)}});var _r=l(xe=>{"use strict";var cE=xe&&xe.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),fE=xe&&xe.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),lE=xe&&xe.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&cE(t,r,e);return fE(t,r),t};Object.defineProperty(xe,"__esModule",{value:!0});xe.Bookmark=void 0;var np=lE(he()),hE="bookmarks",ip=function(){function r(t){this._values=_E(t)}return r.empty=function(){return pE},r.prototype.isEmpty=function(){return this._values.length===0},r.prototype.values=function(){return this._values},r.prototype.asBeginTransactionParameters=function(){var t;return this.isEmpty()?{}:(t={},t[hE]=this._values,t)},r}();xe.Bookmark=ip;var pE=new ip(null);function _E(r){if(!r)return[];if(np.isString(r))return[r];if(Array.isArray(r)){for(var t=[],e=op(r),n=0;n<e.length;n++){var i=e[n];if(i!=null){if(!np.isString(i))throw new TypeError("Bookmark value should be a string, given: '"+i+"'");t.push(i)}}return t}throw new TypeError("Bookmark should either be a string or a string array, given: '"+r+"'")}function op(r){return r.reduce(function(t,e){return Array.isArray(e)?t.concat(op(e)):t.concat(e)},[])}});var dr=l(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.BOLT_PROTOCOL_V4_4=j.BOLT_PROTOCOL_V4_3=j.BOLT_PROTOCOL_V4_2=j.BOLT_PROTOCOL_V4_1=j.BOLT_PROTOCOL_V4_0=j.BOLT_PROTOCOL_V3=j.BOLT_PROTOCOL_V2=j.BOLT_PROTOCOL_V1=j.DEFAULT_POOL_MAX_SIZE=j.DEFAULT_POOL_ACQUISITION_TIMEOUT=j.ACCESS_MODE_WRITE=j.ACCESS_MODE_READ=j.FETCH_ALL=void 0;var dE=-1;j.FETCH_ALL=dE;var vE=60*1e3;j.DEFAULT_POOL_ACQUISITION_TIMEOUT=vE;var bE=100;j.DEFAULT_POOL_MAX_SIZE=bE;var yE="READ";j.ACCESS_MODE_READ=yE;var mE="WRITE";j.ACCESS_MODE_WRITE=mE;var OE=1;j.BOLT_PROTOCOL_V1=OE;var gE=2;j.BOLT_PROTOCOL_V2=gE;var SE=3;j.BOLT_PROTOCOL_V3=SE;var EE=4;j.BOLT_PROTOCOL_V4_0=EE;var wE=4.1;j.BOLT_PROTOCOL_V4_1=wE;var TE=4.2;j.BOLT_PROTOCOL_V4_2=TE;var PE=4.3;j.BOLT_PROTOCOL_V4_3=PE;var CE=4.4;j.BOLT_PROTOCOL_V4_4=CE});var cn=l(Ee=>{"use strict";var sp=Ee&&Ee.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ee,"__esModule",{value:!0});Ee.EMPTY_CONNECTION_HOLDER=Ee.ReadOnlyConnectionHolder=Ee.ConnectionHolder=void 0;var IE=ie(),RE=he(),AE=dr(),jE=_r(),Ts=function(){function r(t){var e=t===void 0?{}:t,n=e.mode,i=n===void 0?AE.ACCESS_MODE_WRITE:n,o=e.database,u=o===void 0?"":o,s=e.bookmark,c=e.connectionProvider,a=e.impersonatedUser,f=e.onDatabaseNameResolved;this._mode=i,this._database=u?(0,RE.assertString)(u,"database"):"",this._bookmark=s||jE.Bookmark.empty(),this._connectionProvider=c,this._impersonatedUser=a,this._referenceCount=0,this._connectionPromise=Promise.resolve(),this._onDatabaseNameResolved=f}return r.prototype.mode=function(){return this._mode},r.prototype.database=function(){return this._database},r.prototype.setDatabase=function(t){this._database=t},r.prototype.bookmark=function(){return this._bookmark},r.prototype.connectionProvider=function(){return this._connectionProvider},r.prototype.referenceCount=function(){return this._referenceCount},r.prototype.initializeConnection=function(){if(this._referenceCount===0&&this._connectionProvider)this._connectionPromise=this._connectionProvider.acquireConnection({accessMode:this._mode,database:this._database,bookmarks:this._bookmark,impersonatedUser:this._impersonatedUser,onDatabaseNameResolved:this._onDatabaseNameResolved});else return this._referenceCount++,!1;return this._referenceCount++,!0},r.prototype.getConnection=function(){return this._connectionPromise},r.prototype.releaseConnection=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount--,this._referenceCount===0?this._releaseConnection():this._connectionPromise)},r.prototype.close=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount=0,this._releaseConnection())},r.prototype._releaseConnection=function(){return this._connectionPromise=this._connectionPromise.then(function(t){return t?t.isOpen()?t.resetAndFlush().catch(up).then(function(){return t._release()}):t._release():Promise.resolve()}).catch(up),this._connectionPromise},r}();Ee.ConnectionHolder=Ts;var ap=function(r){sp(t,r);function t(e){var n=r.call(this,{mode:e.mode(),database:e.database(),bookmark:e.bookmark(),connectionProvider:e.connectionProvider()})||this;return n._connectionHolder=e,n}return t.prototype.initializeConnection=function(){return this._connectionHolder.referenceCount()!==0},t.prototype.getConnection=function(){return this._connectionHolder.getConnection()},t.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve()})},t.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve()})},t}(Ts);Ee.ReadOnlyConnectionHolder=ap;Ee.default=ap;var qE=function(r){sp(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.mode=function(){},t.prototype.database=function(){},t.prototype.initializeConnection=function(){return!0},t.prototype.getConnection=function(){return Promise.reject((0,IE.newError)("This connection holder does not serve connections"))},t.prototype.releaseConnection=function(){return Promise.resolve()},t.prototype.close=function(){return Promise.resolve()},t}(Ts),NE=new qE;Ee.EMPTY_CONNECTION_HOLDER=NE;function up(r){}});var To=l(De=>{"use strict";var xE=De&&De.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),DE=De&&De.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),ME=De&&De.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&xE(t,r,e);return DE(t,r),t};Object.defineProperty(De,"__esModule",{value:!0});De.TxConfig=void 0;var fn=ME(he()),cp=ie(),kE=Et(),fp=function(){function r(t){BE(t),this.timeout=LE(t),this.metadata=FE(t)}return r.empty=function(){return UE},r.prototype.isEmpty=function(){return Object.values(this).every(function(t){return t==null})},r}();De.TxConfig=fp;var UE=new fp({});function LE(r){if(fn.isObject(r)&&(r.timeout||r.timeout===0)){fn.assertNumberOrInteger(r.timeout,"Transaction timeout");var t=(0,kE.int)(r.timeout);if(t.isZero())throw(0,cp.newError)("Transaction timeout should not be zero");if(t.isNegative())throw(0,cp.newError)("Transaction timeout should not be negative");return t}return null}function FE(r){if(fn.isObject(r)&&r.metadata){var t=r.metadata;if(fn.assertObject(t,"config.metadata"),Object.keys(t).length!==0)return t}return null}function BE(r){r&&fn.assertObject(r,"Transaction config")}});var Cs=l(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.canRetryOn=void 0;var Ps=ie();function VE(r){return r&&r instanceof Ps.Neo4jError&&r.code&&(r.code===Ps.SERVICE_UNAVAILABLE||r.code===Ps.SESSION_EXPIRED||HE(r)||WE(r))}Po.canRetryOn=VE;function WE(r){var t=r.code;return t.indexOf("TransientError")>=0?!(t==="Neo.TransientError.Transaction.Terminated"||t==="Neo.TransientError.Transaction.LockClientStopped"):!1}function HE(r){return r.code==="Neo.ClientError.Security.AuthorizationExpired"}});var Is=l(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.TransactionExecutor=void 0;var Co=ie(),zE=Cs(),YE=30*1e3,ZE=1e3,GE=2,KE=.2,QE=function(){function r(t,e,n,i){this._maxRetryTimeMs=Io(t,YE),this._initialRetryDelayMs=Io(e,ZE),this._multiplier=Io(n,GE),this._jitterFactor=Io(i,KE),this._inFlightTimeoutIds=[],this._verifyAfterConstruction()}return r.prototype.execute=function(t,e){var n=this;return new Promise(function(i,o){n._executeTransactionInsidePromise(t,e,i,o)}).catch(function(i){var o=Date.now(),u=n._initialRetryDelayMs;return n._retryTransactionPromise(t,e,i,o,u)})},r.prototype.close=function(){this._inFlightTimeoutIds.forEach(function(t){return clearTimeout(t)}),this._inFlightTimeoutIds=[]},r.prototype._retryTransactionPromise=function(t,e,n,i,o){var u=this,s=Date.now()-i;return s>this._maxRetryTimeMs||!(0,zE.canRetryOn)(n)?Promise.reject(n):new Promise(function(c,a){var f=u._computeDelayWithJitter(o),h=setTimeout(function(){u._inFlightTimeoutIds=u._inFlightTimeoutIds.filter(function(p){return p!==h}),u._executeTransactionInsidePromise(t,e,c,a)},f);u._inFlightTimeoutIds.push(h)}).catch(function(c){var a=o*u._multiplier;return u._retryTransactionPromise(t,e,c,i,a)})},r.prototype._executeTransactionInsidePromise=function(t,e,n,i){var o=this,u;try{u=t()}catch(c){i(c);return}var s=this._safeExecuteTransactionWork(u,e);s.then(function(c){return o._handleTransactionWorkSuccess(c,u,n,i)}).catch(function(c){return o._handleTransactionWorkFailure(c,u,i)})},r.prototype._safeExecuteTransactionWork=function(t,e){try{var n=e(t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}},r.prototype._handleTransactionWorkSuccess=function(t,e,n,i){e.isOpen()?e.commit().then(function(){n(t)}).catch(function(o){i(o)}):n(t)},r.prototype._handleTransactionWorkFailure=function(t,e,n){e.isOpen()?e.rollback().catch(function(i){}).then(function(){return n(t)}):n(t)},r.prototype._computeDelayWithJitter=function(t){var e=t*this._jitterFactor,n=t-e,i=t+e;return Math.random()*(i-n)+n},r.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,Co.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs);if(this._initialRetryDelayMs<0)throw(0,Co.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs);if(this._multiplier<1)throw(0,Co.newError)("Multiplier should be >= 1.0: "+this._multiplier);if(this._jitterFactor<0||this._jitterFactor>1)throw(0,Co.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor)},r}();Ro.TransactionExecutor=QE;function Io(r,t){return r||r===0?r:t}});var Rs=l(Ao=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});Ao.ConnectivityVerifier=void 0;var XE=cn(),JE=dr(),$E=ie(),ew=function(){function r(t){this._connectionProvider=t}return r.prototype.verify=function(t){var e=t===void 0?{}:t,n=e.database,i=n===void 0?"":n;return tw(this._connectionProvider,i)},r}();Ao.ConnectivityVerifier=ew;function tw(r,t){var e=new XE.ConnectionHolder({mode:JE.ACCESS_MODE_READ,database:t,connectionProvider:r});return e.initializeConnection(),e.getConnection().then(function(n){if(!n)throw(0,$E.newError)("Unexpected error acquiring transaction");return e.close().then(function(){return n.server})}).catch(function(n){return e.close().catch(function(i){}).then(function(){return Promise.reject(n)})})}});var Ns=l(br=>{"use strict";var rw=br&&br.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),vr;Object.defineProperty(br,"__esModule",{value:!0});br.Logger=void 0;var lp=ie(),As="error",js="warn",ln="info",qs="debug",nw=ln,qo=(vr={},vr[As]=0,vr[js]=1,vr[ln]=2,vr[qs]=3,vr),hp=function(){function r(t,e){this._level=t,this._loggerFunction=e}return r.create=function(t){if(t&&t.logging){var e=t.logging,n=uw(e),i=sw(e);return new r(n,i)}return this.noOp()},r.noOp=function(){return ow},r.prototype.isErrorEnabled=function(){return jo(this._level,As)},r.prototype.error=function(t){this.isErrorEnabled()&&this._loggerFunction(As,t)},r.prototype.isWarnEnabled=function(){return jo(this._level,js)},r.prototype.warn=function(t){this.isWarnEnabled()&&this._loggerFunction(js,t)},r.prototype.isInfoEnabled=function(){return jo(this._level,ln)},r.prototype.info=function(t){this.isInfoEnabled()&&this._loggerFunction(ln,t)},r.prototype.isDebugEnabled=function(){return jo(this._level,qs)},r.prototype.debug=function(t){this.isDebugEnabled()&&this._loggerFunction(qs,t)},r}();br.Logger=hp;var iw=function(r){rw(t,r);function t(){return r.call(this,ln,function(e,n){})||this}return t.prototype.isErrorEnabled=function(){return!1},t.prototype.error=function(e){},t.prototype.isWarnEnabled=function(){return!1},t.prototype.warn=function(e){},t.prototype.isInfoEnabled=function(){return!1},t.prototype.info=function(e){},t.prototype.isDebugEnabled=function(){return!1},t.prototype.debug=function(e){},t}(hp),ow=new iw;function jo(r,t){return qo[r]>=qo[t]}function uw(r){if(r&&r.level){var t=r.level,e=qo[t];if(!e&&e!==0)throw(0,lp.newError)("Illegal logging level: "+t+". Supported levels are: "+Object.keys(qo));return t}return nw}function sw(r){if(r&&r.logger){var t=r.logger;if(t&&typeof t=="function")return t}throw(0,lp.newError)("Illegal logger function: "+r.logger)}});var xs=l(G=>{"use strict";var No=G&&G.__assign||function(){return No=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},No.apply(this,arguments)},_p=G&&G.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],u;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){u={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(u)throw u.error}}return o};Object.defineProperty(G,"__esModule",{value:!0});G.Url=G.formatIPv6Address=G.formatIPv4Address=G.defaultPortForScheme=G.parseDatabaseUrl=void 0;var aw=he(),cw=7687,fw=7474,lw=7473,dp=function(){function r(t,e,n,i,o){this.scheme=t,this.host=e,this.port=n,this.hostAndPort=i,this.query=o}return r}();G.Url=dp;function hw(r){(0,aw.assertString)(r,"URL");var t=_w(r),e=Ew(t.url),n=t.schemeMissing?null:dw(e.scheme),i=vw(e.host),o=Ow(i),u=bw(e.port,n),s=o+":"+u,c=yw(e.query||pw(e.resourceName),r);return new dp(n,i,u,s,c)}G.parseDatabaseUrl=hw;function pw(r){if(typeof r!="string")return null;var t=_p(r.split("?"),2),e=t[0],n=t[1];return n}function _w(r){return r=r.trim(),r.indexOf("://")===-1?{schemeMissing:!0,url:"none://"+r}:{schemeMissing:!1,url:r}}function dw(r){return r?(r=r.trim(),r.charAt(r.length-1)===":"&&(r=r.substring(0,r.length-1)),r):null}function vw(r,t){if(!r)throw new Error("Unable to extract host from "+t);return r.trim()}function bw(r,t){var e=typeof r=="string"?parseInt(r,10):r;return e===0||e?e:bp(t)}function yw(r,t){var e=r?mw(r):null,n={};return e&&e.split("&").forEach(function(i){var o=i.split("=");if(o.length!==2)throw new Error("Invalid parameters: '"+o+"' in URL '"+t+"'.");var u=pp(o[0],"key",t),s=pp(o[1],"value",t);if(n[u])throw new Error("Duplicated query parameters with key '"+u+"' in URL '"+t+"'");n[u]=s}),n}function mw(r){return r=(r||"").trim(),r&&r.charAt(0)==="?"&&(r=r.substring(1,r.length)),r}function pp(r,t,e){if(r=(r||"").trim(),!r)throw new Error("Illegal empty "+t+" in URL query '"+e+"'");return r}function vp(r){var t=r.charAt(0)==="[",e=r.charAt(r.length-1)==="]";if(!t&&!e)return"["+r+"]";if(t&&e)return r;throw new Error("Illegal IPv6 address "+r)}function Ow(r){if(!r)throw new Error("Illegal host "+r);var t=r.indexOf(":")>=0;return t?vp(r):r}function gw(r,t){return r+":"+t}G.formatIPv4Address=gw;function Sw(r,t){var e=vp(r);return e+":"+t}G.formatIPv6Address=Sw;function bp(r){return r==="http"?fw:r==="https"?lw:cw}G.defaultPortForScheme=bp;function Ew(r){function t(s,c){var a=s.indexOf(c);return a>=0?[s.substring(0,a),s[a],s.substring(a+1)]:[s,"",""]}function e(s,c){var a=s.lastIndexOf(c);return a>=0?[s.substring(0,a),s[a],s.substring(a+1)]:["","",s]}function n(s,c,a){var f=t(s,c),h=t(f[2],a);return[h[0],h[2]]}function i(s){var c={},a;a=e(s,"@"),a[1]==="@"&&(c.userInfo=decodeURIComponent(a[0]),s=a[2]);var f=_p(n(s,"[","]"),2),h=f[0],p=f[1];return h!==""?(c.host=h,a=t(p,":")):(a=t(s,":"),c.host=a[0]),a[1]===":"&&(c.port=a[2]),c}var o={},u;return u=t(r,":"),u[1]===":"&&(o.scheme=decodeURIComponent(u[0]),r=u[2]),u=t(r,"#"),u[1]==="#"&&(o.fragment=decodeURIComponent(u[2]),r=u[0]),u=t(r,"?"),u[1]==="?"&&(o.query=u[2],r=u[0]),r.startsWith("//")?(u=t(r.substr(2),"/"),o=No(No({},o),i(u[0])),o.path=u[1]+u[2]):o.path=r,o}});var Ms=l(Me=>{"use strict";var ww=Me&&Me.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),Tw=Me&&Me.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Pw=Me&&Me.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&ww(t,r,e);return Tw(t,r),t};Object.defineProperty(Me,"__esModule",{value:!0});Me.ServerAddress=void 0;var Ds=he(),Cw=Pw(xs()),Iw=function(){function r(t,e,n,i){this._host=(0,Ds.assertString)(t,"host"),this._resolved=e?(0,Ds.assertString)(e,"resolved"):null,this._port=(0,Ds.assertNumber)(n,"port"),this._hostPort=i,this._stringValue=e?i+"("+e+")":""+i}return r.prototype.host=function(){return this._host},r.prototype.resolvedHost=function(){return this._resolved?this._resolved:this._host},r.prototype.port=function(){return this._port},r.prototype.resolveWith=function(t){return new r(this._host,t,this._port,this._hostPort)},r.prototype.asHostPort=function(){return this._hostPort},r.prototype.asKey=function(){return this._hostPort},r.prototype.toString=function(){return this._stringValue},r.fromUrl=function(t){var e=Cw.parseDatabaseUrl(t);return new r(e.host,null,e.port,e.hostAndPort)},r}();Me.ServerAddress=Iw});var yp=l(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});var Rw=function(){function r(){}return r.prototype.resolve=function(){throw new Error("Abstract function")},r.prototype._resolveToItself=function(t){return Promise.resolve([t])},r}();ks.default=Rw});var Ls=l(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});var Aw=Ms();function jw(r){return Promise.resolve([r])}var qw=function(){function r(t){this._resolverFunction=t||jw}return r.prototype.resolve=function(t){var e=this;return new Promise(function(n){return n(e._resolverFunction(t.asHostPort()))}).then(function(n){if(!Array.isArray(n))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+("Each address is '<host>:<port>'. Got: "+n));return n.map(function(i){return Aw.ServerAddress.fromUrl(i)})})},r}();Us.default=qw});var Op=l(ct=>{"use strict";var mp=ct&&ct.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ct,"__esModule",{value:!0});ct.ConfiguredCustomResolver=ct.BaseHostNameResolver=void 0;var Nw=mp(yp());ct.BaseHostNameResolver=Nw.default;var xw=mp(Ls());ct.ConfiguredCustomResolver=xw.default});var Fs=l(T=>{"use strict";var Dw=T&&T.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),Mw=T&&T.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),J=T&&T.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&Dw(t,r,e);return Mw(t,r),t};Object.defineProperty(T,"__esModule",{value:!0});T.objectUtil=T.retryStrategy=T.resolver=T.serverAddress=T.urlUtil=T.logger=T.connectivityVerifier=T.transactionExecutor=T.txConfig=T.connectionHolder=T.constants=T.bookmark=T.observer=T.temporalUtil=T.util=void 0;var kw=J(he());T.util=kw;var Uw=J(vs());T.temporalUtil=Uw;var Lw=J(wo());T.observer=Lw;var Fw=J(_r());T.bookmark=Fw;var Bw=J(dr());T.constants=Bw;var Vw=J(cn());T.connectionHolder=Vw;var Ww=J(To());T.txConfig=Ww;var Hw=J(Is());T.transactionExecutor=Hw;var zw=J(Rs());T.connectivityVerifier=zw;var Yw=J(Ns());T.logger=Yw;var Zw=J(xs());T.urlUtil=Zw;var Gw=J(Ms());T.serverAddress=Gw;var Kw=J(Op());T.resolver=Kw;var Qw=J(Cs());T.retryStrategy=Qw;var Xw=J(ps());T.objectUtil=Xw});var xo=l(hn=>{"use strict";var Jw=hn&&hn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hn,"__esModule",{value:!0});var $w=Jw(ws()),gp=Fs(),e0=gp.connectionHolder.EMPTY_CONNECTION_HOLDER,t0=function(r){console.log("Uncaught error when processing result: "+r)},r0=function(r){},n0=function(){function r(t,e,n,i){this._stack=i0(),this._streamObserverPromise=t,this._p=null,this._query=e,this._parameters=n||{},this._connectionHolder=i||e0}return r.prototype.keys=function(){var t=this;return new Promise(function(e,n){t._streamObserverPromise.then(function(i){return i.subscribe({onKeys:function(o){return e(o)},onError:function(o){return n(o)}})}).catch(n)})},r.prototype.summary=function(){var t=this;return new Promise(function(e,n){t._streamObserverPromise.then(function(i){i.cancel(),i.subscribe({onCompleted:function(o){return t._createSummary(o).then(e,n)},onError:function(o){return n(o)}})}).catch(n)})},r.prototype._getOrCreatePromise=function(){var t=this;return this._p||(this._p=new Promise(function(e,n){var i=[],o={onNext:function(u){i.push(u)},onCompleted:function(u){e({records:i,summary:u})},onError:function(u){n(u)}};t.subscribe(o)})),this._p},r.prototype.then=function(t,e){return this._getOrCreatePromise().then(t,e)},r.prototype.catch=function(t){return this._getOrCreatePromise().catch(t)},r.prototype.finally=function(t){return this._getOrCreatePromise().finally(t)},r.prototype.subscribe=function(t){var e=this,n=t.onCompleted||r0,i=function(s){e._createSummary(s).then(function(c){return n.call(t,c)})};t.onCompleted=i;var o=t.onError||t0,u=function(s){e._connectionHolder.releaseConnection().then(function(){o0(s,e._stack),o.call(t,s)})};t.onError=u,this._streamObserverPromise.then(function(s){return s.subscribe(t)}).catch(function(s){return t.onError(s)})},r.prototype._cancel=function(){this._streamObserverPromise.then(function(t){return t.cancel()})},r.prototype._createSummary=function(t){var e=gp.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),n=e.validatedQuery,i=e.params,o=this._connectionHolder;return o.getConnection().then(function(u){return o.releaseConnection().then(function(){return u?u.protocol().version:void 0})},function(u){}).then(function(u){return new $w.default(n,i,t,u)})},r}();function i0(){var r=new Error("");return r.stack?r.stack.replace(/^Error(\n\r)*/,""):null}function o0(r,t){t&&(r.stack=r.toString()+`
`+t)}hn.default=n0});var Sp=l(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});var u0=function(){function r(){}return r.prototype.acquireConnection=function(t){throw Error("Not implemented")},r.prototype.supportsMultiDb=function(){throw Error("Not implemented")},r.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},r.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},r.prototype.close=function(){throw Error("Not implemented")},r}();Bs.default=u0});var Ep=l(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});var s0=function(){function r(){this.id="",this.databaseId=""}return r.prototype.isOpen=function(){return!1},r.prototype.protocol=function(){throw Error("Not implemented")},r.prototype.connect=function(t,e){throw Error("Not implemented")},r.prototype.write=function(t,e,n){throw Error("Not implemented")},r.prototype.resetAndFlush=function(){throw Error("Not implemented")},r.prototype.close=function(){throw Error("Not implemented")},r.prototype._release=function(){return Promise.resolve()},r}();Vs.default=s0});var Hs=l(ze=>{"use strict";var a0=ze&&ze.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return new(e||(e=Promise))(function(o,u){function s(f){try{a(n.next(f))}catch(h){u(h)}}function c(f){try{a(n.throw(f))}catch(h){u(h)}}function a(f){f.done?o(f.value):i(f.value).then(s,c)}a((n=n.apply(r,t||[])).next())})},c0=ze&&ze.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(a){return function(f){return c([a,f])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,i=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){e.label=a[1];break}if(a[0]===6&&e.label<o[1]){e.label=o[1],o=a;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(a);break}o[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(r,e)}catch(f){a=[6,f],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},f0=ze&&ze.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ze,"__esModule",{value:!0});var l0=he(),Ws=cn(),Tp=_r(),h0=To(),we=wo(),Te=ie(),Pp=f0(xo()),p0=function(){function r(t){var e=t.connectionHolder,n=t.onClose,i=t.onBookmark,o=t.onConnection,u=t.reactive,s=t.fetchSize,c=t.impersonatedUser;this._connectionHolder=e,this._reactive=u,this._state=Pe.ACTIVE,this._onClose=n,this._onBookmark=i,this._onConnection=o,this._onError=this._onErrorCallback.bind(this),this._onComplete=this._onCompleteCallback.bind(this),this._fetchSize=s,this._results=[],this._impersonatedUser=c}return r.prototype._begin=function(t,e){var n=this;this._connectionHolder.getConnection().then(function(i){if(n._onConnection(),i)return i.protocol().beginTransaction({bookmark:t,txConfig:e,mode:n._connectionHolder.mode(),database:n._connectionHolder.database(),impersonatedUser:n._impersonatedUser,beforeError:n._onError,afterComplete:n._onComplete});throw(0,Te.newError)("No connection available")}).catch(function(i){return n._onError(i)})},r.prototype.run=function(t,e){var n=(0,l0.validateQueryAndParameters)(t,e),i=n.validatedQuery,o=n.params,u=this._state.run(i,o,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize});return this._results.push(u),u},r.prototype.commit=function(){var t=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=t.state,this._onClose(),new Promise(function(e,n){t.result.subscribe({onCompleted:function(){return e()},onError:function(i){return n(i)}})})},r.prototype.rollback=function(){var t=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=t.state,this._onClose(),new Promise(function(e,n){t.result.subscribe({onCompleted:function(){return e()},onError:function(i){return n(i)}})})},r.prototype.isOpen=function(){return this._state===Pe.ACTIVE},r.prototype.close=function(){return a0(this,void 0,void 0,function(){return c0(this,function(t){switch(t.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},r.prototype._onErrorCallback=function(t){return this._state=Pe.FAILED,this._onClose(),this._connectionHolder.releaseConnection()},r.prototype._onCompleteCallback=function(t){this._onBookmark(new Tp.Bookmark(t.bookmark))},r}(),Pe={ACTIVE:{commit:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete,i=r.onConnection,o=r.pendingResults;return{result:wp(!0,t,e,n,i,o),state:Pe.SUCCEEDED}},rollback:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete,i=r.onConnection,o=r.pendingResults;return{result:wp(!1,t,e,n,i,o),state:Pe.ROLLED_BACK}},run:function(r,t,e){var n=e.connectionHolder,i=e.onError,o=e.onComplete,u=e.onConnection,s=e.reactive,c=e.fetchSize,a=n.getConnection().then(function(f){if(u(),f)return f.protocol().run(r,t,{bookmark:Tp.Bookmark.empty(),txConfig:h0.TxConfig.empty(),beforeError:i,afterComplete:o,reactive:s,fetchSize:c});throw(0,Te.newError)("No connection available")}).catch(function(f){return new we.FailedObserver({error:f,onError:i})});return ke(a,r,t,n)}},FAILED:{commit:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:ke(new we.FailedObserver({error:(0,Te.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:e}),"COMMIT",{},t),state:Pe.FAILED}},rollback:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:ke(new we.CompletedObserver,"ROLLBACK",{},t),state:Pe.FAILED}},run:function(r,t,e){var n=e.connectionHolder,i=e.onError,o=e.onComplete;return ke(new we.FailedObserver({error:(0,Te.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:i}),r,t,n)}},SUCCEEDED:{commit:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:ke(new we.FailedObserver({error:(0,Te.newError)("Cannot commit this transaction, because it has already been committed."),onError:e}),"COMMIT",{}),state:Pe.SUCCEEDED,connectionHolder:t}},rollback:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:ke(new we.FailedObserver({error:(0,Te.newError)("Cannot rollback this transaction, because it has already been committed."),onError:e}),"ROLLBACK",{}),state:Pe.SUCCEEDED,connectionHolder:t}},run:function(r,t,e){var n=e.connectionHolder,i=e.onError,o=e.onComplete;return ke(new we.FailedObserver({error:(0,Te.newError)("Cannot run query in this transaction, because it has already been committed."),onError:i}),r,t,n)}},ROLLED_BACK:{commit:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:ke(new we.FailedObserver({error:(0,Te.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:e}),"COMMIT",{},t),state:Pe.ROLLED_BACK}},rollback:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:ke(new we.FailedObserver({error:(0,Te.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},t),state:Pe.ROLLED_BACK}},run:function(r,t,e){var n=e.connectionHolder,i=e.onError,o=e.onComplete;return ke(new we.FailedObserver({error:(0,Te.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:i}),r,t,n)}}};function wp(r,t,e,n,i,o){var u=t.getConnection().then(function(s){return i(),o.forEach(function(c){return c._cancel()}),Promise.all(o).then(function(c){if(s)return r?s.protocol().commitTransaction({beforeError:e,afterComplete:n}):s.protocol().rollbackTransaction({beforeError:e,afterComplete:n});throw(0,Te.newError)("No connection available")})}).catch(function(s){return new we.FailedObserver({error:s,onError:e})});return new Pp.default(u,r?"COMMIT":"ROLLBACK",{},t)}function ke(r,t,e,n){return n===void 0&&(n=Ws.EMPTY_CONNECTION_HOLDER),new Pp.default(Promise.resolve(r),t,e,new Ws.ReadOnlyConnectionHolder(n||Ws.EMPTY_CONNECTION_HOLDER))}ze.default=p0});var Gs=l(Ge=>{"use strict";var zs=Ge&&Ge.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return new(e||(e=Promise))(function(o,u){function s(f){try{a(n.next(f))}catch(h){u(h)}}function c(f){try{a(n.throw(f))}catch(h){u(h)}}function a(f){f.done?o(f.value):i(f.value).then(s,c)}a((n=n.apply(r,t||[])).next())})},Ys=Ge&&Ge.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(a){return function(f){return c([a,f])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,i=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){e.label=a[1];break}if(a[0]===6&&e.label<o[1]){e.label=o[1],o=a;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(a);break}o[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(r,e)}catch(f){a=[6,f],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Rp=Ge&&Ge.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ge,"__esModule",{value:!0});var Zs=wo(),_0=he(),Ye=ie(),d0=Rp(xo()),v0=Rp(Hs()),Cp=cn(),Ze=dr(),b0=Is(),Ip=_r(),yr=To(),y0=function(){function r(t){var e=t.mode,n=t.connectionProvider,i=t.bookmark,o=t.database,u=t.config,s=t.reactive,c=t.fetchSize,a=t.impersonatedUser;this._mode=e,this._database=o,this._reactive=s,this._fetchSize=c,this._onDatabaseNameResolved=this._onDatabaseNameResolved.bind(this),this._readConnectionHolder=new Cp.ConnectionHolder({mode:Ze.ACCESS_MODE_READ,database:o,bookmark:i,connectionProvider:n,impersonatedUser:a,onDatabaseNameResolved:this._onDatabaseNameResolved}),this._writeConnectionHolder=new Cp.ConnectionHolder({mode:Ze.ACCESS_MODE_WRITE,database:o,bookmark:i,connectionProvider:n,impersonatedUser:a,onDatabaseNameResolved:this._onDatabaseNameResolved}),this._open=!0,this._hasTx=!1,this._impersonatedUser=a,this._lastBookmark=i||Ip.Bookmark.empty(),this._transactionExecutor=m0(u),this._onComplete=this._onCompleteCallback.bind(this),this._databaseNameResolved=this._database!==""}return r.prototype.run=function(t,e,n){var i=this,o=(0,_0.validateQueryAndParameters)(t,e),u=o.validatedQuery,s=o.params,c=n?new yr.TxConfig(n):yr.TxConfig.empty();return this._run(u,s,function(a){return i._assertSessionIsOpen(),a.protocol().run(u,s,{bookmark:i._lastBookmark,txConfig:c,mode:i._mode,database:i._database,impersonatedUser:i._impersonatedUser,afterComplete:i._onComplete,reactive:i._reactive,fetchSize:i._fetchSize})})},r.prototype._run=function(t,e,n){var i=this._connectionHolderWithMode(this._mode),o;return this._open?!this._hasTx&&i.initializeConnection()?o=i.getConnection().then(function(u){return n(u)}).catch(function(u){return Promise.resolve(new Zs.FailedObserver({error:u}))}):o=Promise.resolve(new Zs.FailedObserver({error:(0,Ye.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")})):o=Promise.resolve(new Zs.FailedObserver({error:(0,Ye.newError)("Cannot run query in a closed session.")})),new d0.default(o,t,e,i)},r.prototype._acquireConnection=function(t){return zs(this,void 0,void 0,function(){var e,n,i=this;return Ys(this,function(o){return n=this._connectionHolderWithMode(this._mode),this._open?!this._hasTx&&n.initializeConnection()?e=n.getConnection().then(function(u){return t(u)}).then(function(u){return zs(i,void 0,void 0,function(){return Ys(this,function(s){switch(s.label){case 0:return[4,n.releaseConnection()];case 1:return s.sent(),[2,u]}})})}):e=Promise.reject((0,Ye.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):e=Promise.reject((0,Ye.newError)("Cannot run query in a closed session.")),[2,e]})})},r.prototype.beginTransaction=function(t){var e=t,n=yr.TxConfig.empty();return e&&(n=new yr.TxConfig(e)),this._beginTransaction(this._mode,n)},r.prototype._beginTransaction=function(t,e){if(!this._open)throw(0,Ye.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,Ye.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var n=r._validateSessionMode(t),i=this._connectionHolderWithMode(n);i.initializeConnection(),this._hasTx=!0;var o=new v0.default({connectionHolder:i,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmark:this._updateBookmark.bind(this),onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize});return o._begin(this._lastBookmark,e),o},r.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,Ye.newError)("You cannot run more transactions on a closed session.")},r.prototype._transactionClosed=function(){this._hasTx=!1},r.prototype.lastBookmark=function(){return this._lastBookmark.values()},r.prototype.readTransaction=function(t,e){var n=new yr.TxConfig(e);return this._runTransaction(Ze.ACCESS_MODE_READ,n,t)},r.prototype.writeTransaction=function(t,e){var n=new yr.TxConfig(e);return this._runTransaction(Ze.ACCESS_MODE_WRITE,n,t)},r.prototype._runTransaction=function(t,e,n){var i=this;return this._transactionExecutor.execute(function(){return i._beginTransaction(t,e)},n)},r.prototype._onDatabaseNameResolved=function(t){if(!this._databaseNameResolved){var e=t||"";this._database=e,this._readConnectionHolder.setDatabase(e),this._writeConnectionHolder.setDatabase(e),this._databaseNameResolved=!0}},r.prototype._updateBookmark=function(t){t&&!t.isEmpty()&&(this._lastBookmark=t)},r.prototype.close=function(){return zs(this,void 0,void 0,function(){return Ys(this,function(t){switch(t.label){case 0:return this._open?(this._open=!1,this._transactionExecutor.close(),[4,this._readConnectionHolder.close()]):[3,3];case 1:return t.sent(),[4,this._writeConnectionHolder.close()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},r.prototype._connectionHolderWithMode=function(t){if(t===Ze.ACCESS_MODE_READ)return this._readConnectionHolder;if(t===Ze.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,Ye.newError)("Unknown access mode: "+t)},r.prototype._onCompleteCallback=function(t){this._updateBookmark(new Ip.Bookmark(t.bookmark))},r._validateSessionMode=function(t){var e=t||Ze.ACCESS_MODE_WRITE;if(e!==Ze.ACCESS_MODE_READ&&e!==Ze.ACCESS_MODE_WRITE)throw(0,Ye.newError)("Illegal session mode "+e);return e},r}();function m0(r){var t=r&&r.maxTransactionRetryTime?r.maxTransactionRetryTime:null;return new b0.TransactionExecutor(t)}Ge.default=y0});var Mp=l(Ce=>{"use strict";var qp=Ce&&Ce.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.WRITE=Ce.READ=Ce.Driver=void 0;var Ap=_r(),O0=Rs(),g0=qp(Ls()),mr=dr(),S0=Ns(),jp=qp(Gs()),E0=he(),w0=60*60*1e3,T0=1e3,P0=mr.ACCESS_MODE_READ;Ce.READ=P0;var Np=mr.ACCESS_MODE_WRITE;Ce.WRITE=Np;var C0=0,xp=function(){function r(t,e,n,i){e===void 0&&(e={}),i===void 0&&(i=function(o){return new jp.default(o)}),R0(e),I0(e),this._id=C0++,this._meta=t,this._config=e,this._log=S0.Logger.create(e),this._createConnectionProvider=n,this._createSession=i,this._connectionProvider=null,this._afterConstruction()}return r.prototype.verifyConnectivity=function(t){var e=t===void 0?{}:t,n=e.database,i=n===void 0?"":n,o=this._getOrCreateConnectionProvider(),u=new O0.ConnectivityVerifier(o);return u.verify({database:i})},r.prototype.supportsMultiDb=function(){var t=this._getOrCreateConnectionProvider();return t.supportsMultiDb()},r.prototype.supportsTransactionConfig=function(){var t=this._getOrCreateConnectionProvider();return t.supportsTransactionConfig()},r.prototype.supportsUserImpersonation=function(){var t=this._getOrCreateConnectionProvider();return t.supportsUserImpersonation()},r.prototype._supportsRouting=function(){return this._meta.routing},r.prototype._isEncrypted=function(){return this._config.encrypted===E0.ENCRYPTION_ON},r.prototype._getTrust=function(){return this._config.trust},r.prototype.session=function(t){var e=t===void 0?{}:t,n=e.defaultAccessMode,i=n===void 0?Np:n,o=e.bookmarks,u=e.database,s=u===void 0?"":u,c=e.impersonatedUser,a=e.fetchSize;return this._newSession({defaultAccessMode:i,bookmarkOrBookmarks:o,database:s,reactive:!1,impersonatedUser:c,fetchSize:Dp(a,this._config.fetchSize)})},r.prototype.close=function(){return this._log.info("Driver "+this._id+" closing"),this._connectionProvider?this._connectionProvider.close():Promise.resolve()},r.prototype._afterConstruction=function(){this._log.info(this._meta.typename+" driver "+this._id+" created for server address "+this._meta.address)},r.prototype._newSession=function(t){var e=t.defaultAccessMode,n=t.bookmarkOrBookmarks,i=t.database,o=t.reactive,u=t.impersonatedUser,s=t.fetchSize,c=jp.default._validateSessionMode(e),a=this._getOrCreateConnectionProvider(),f=n?new Ap.Bookmark(n):Ap.Bookmark.empty();return this._createSession({mode:c,database:i||"",connectionProvider:a,bookmark:f,config:this._config,reactive:o,impersonatedUser:u,fetchSize:s})},r.prototype._getOrCreateConnectionProvider=function(){return this._connectionProvider||(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,A0(this._config))),this._connectionProvider},r}();Ce.Driver=xp;function I0(r){var t=r.resolver;if(t&&typeof t!="function")throw new TypeError("Configured resolver should be a function. Got: "+t);return r}function R0(r){r.maxConnectionLifetime=Ks(r.maxConnectionLifetime,w0),r.maxConnectionPoolSize=Ks(r.maxConnectionPoolSize,mr.DEFAULT_POOL_MAX_SIZE),r.connectionAcquisitionTimeout=Ks(r.connectionAcquisitionTimeout,mr.DEFAULT_POOL_ACQUISITION_TIMEOUT),r.fetchSize=Dp(r.fetchSize,T0)}function Ks(r,t){var e=parseInt(r,10);return e>0||e===0?e:e<0?Number.MAX_SAFE_INTEGER:t}function Dp(r,t){var e=parseInt(r,10);if(e>0||e===mr.FETCH_ALL)return e;if(e===0||e<0)throw new Error("The fetch size can only be a positive value or "+mr.FETCH_ALL+" for ALL. However fetchSize = "+e);return t}function A0(r){return new g0.default(r.resolver)}Ce.default=xp});var kp=l(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});var j0={basic:function(r,t,e){return e?{scheme:"basic",principal:r,credentials:t,realm:e}:{scheme:"basic",principal:r,credentials:t}},kerberos:function(r){return{scheme:"kerberos",principal:"",credentials:r}},bearer:function(r){return{scheme:"bearer",credentials:r}},custom:function(r,t,e,n,i){return i?{scheme:n,principal:r,credentials:t,realm:e,parameters:i}:{scheme:n,principal:r,credentials:t,realm:e}}};Qs.default=j0});var Lp=l(Up=>{"use strict";Object.defineProperty(Up,"__esModule",{value:!0})});var P=l(d=>{"use strict";var q0=d&&d.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),N0=d&&d.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Or=d&&d.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&q0(t,r,e);return N0(t,r),t},It=d&&d.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(d,"__esModule",{value:!0});d.types=d.Driver=d.Session=d.Transaction=d.Connection=d.ConnectionProvider=d.Result=d.Stats=d.QueryStatistics=d.ProfiledPlan=d.Plan=d.Notification=d.ServerInfo=d.queryType=d.ResultSummary=d.Record=d.isPathSegment=d.PathSegment=d.isPath=d.Path=d.isUnboundRelationship=d.UnboundRelationship=d.isRelationship=d.Relationship=d.isNode=d.Node=d.Time=d.LocalTime=d.LocalDateTime=d.isTime=d.isLocalTime=d.isLocalDateTime=d.isDuration=d.isDateTime=d.isDate=d.Duration=d.DateTime=d.Date=d.Point=d.isPoint=d.internal=d.toString=d.toNumber=d.inSafeRange=d.isInt=d.int=d.Integer=d.error=d.Neo4jError=d.newError=void 0;d.auth=d.json=d.driver=void 0;var Ct=ie();Object.defineProperty(d,"newError",{enumerable:!0,get:function(){return Ct.newError}});Object.defineProperty(d,"Neo4jError",{enumerable:!0,get:function(){return Ct.Neo4jError}});var be=Or(Et());d.Integer=be.default;Object.defineProperty(d,"int",{enumerable:!0,get:function(){return be.int}});Object.defineProperty(d,"isInt",{enumerable:!0,get:function(){return be.isInt}});Object.defineProperty(d,"inSafeRange",{enumerable:!0,get:function(){return be.inSafeRange}});Object.defineProperty(d,"toNumber",{enumerable:!0,get:function(){return be.toNumber}});Object.defineProperty(d,"toString",{enumerable:!0,get:function(){return be.toString}});var x=kh();Object.defineProperty(d,"Date",{enumerable:!0,get:function(){return x.Date}});Object.defineProperty(d,"DateTime",{enumerable:!0,get:function(){return x.DateTime}});Object.defineProperty(d,"Duration",{enumerable:!0,get:function(){return x.Duration}});Object.defineProperty(d,"isDate",{enumerable:!0,get:function(){return x.isDate}});Object.defineProperty(d,"isDateTime",{enumerable:!0,get:function(){return x.isDateTime}});Object.defineProperty(d,"isDuration",{enumerable:!0,get:function(){return x.isDuration}});Object.defineProperty(d,"isLocalDateTime",{enumerable:!0,get:function(){return x.isLocalDateTime}});Object.defineProperty(d,"isLocalTime",{enumerable:!0,get:function(){return x.isLocalTime}});Object.defineProperty(d,"isTime",{enumerable:!0,get:function(){return x.isTime}});Object.defineProperty(d,"LocalDateTime",{enumerable:!0,get:function(){return x.LocalDateTime}});Object.defineProperty(d,"LocalTime",{enumerable:!0,get:function(){return x.LocalTime}});Object.defineProperty(d,"Time",{enumerable:!0,get:function(){return x.Time}});var H=Zh();Object.defineProperty(d,"Node",{enumerable:!0,get:function(){return H.Node}});Object.defineProperty(d,"isNode",{enumerable:!0,get:function(){return H.isNode}});Object.defineProperty(d,"Relationship",{enumerable:!0,get:function(){return H.Relationship}});Object.defineProperty(d,"isRelationship",{enumerable:!0,get:function(){return H.isRelationship}});Object.defineProperty(d,"UnboundRelationship",{enumerable:!0,get:function(){return H.UnboundRelationship}});Object.defineProperty(d,"isUnboundRelationship",{enumerable:!0,get:function(){return H.isUnboundRelationship}});Object.defineProperty(d,"Path",{enumerable:!0,get:function(){return H.Path}});Object.defineProperty(d,"isPath",{enumerable:!0,get:function(){return H.isPath}});Object.defineProperty(d,"PathSegment",{enumerable:!0,get:function(){return H.PathSegment}});Object.defineProperty(d,"isPathSegment",{enumerable:!0,get:function(){return H.isPathSegment}});var Fp=It(Kh());d.Record=Fp.default;var Do=Jh();Object.defineProperty(d,"isPoint",{enumerable:!0,get:function(){return Do.isPoint}});Object.defineProperty(d,"Point",{enumerable:!0,get:function(){return Do.Point}});var K=Or(ws());d.ResultSummary=K.default;Object.defineProperty(d,"queryType",{enumerable:!0,get:function(){return K.queryType}});Object.defineProperty(d,"ServerInfo",{enumerable:!0,get:function(){return K.ServerInfo}});Object.defineProperty(d,"Notification",{enumerable:!0,get:function(){return K.Notification}});Object.defineProperty(d,"Plan",{enumerable:!0,get:function(){return K.Plan}});Object.defineProperty(d,"ProfiledPlan",{enumerable:!0,get:function(){return K.ProfiledPlan}});Object.defineProperty(d,"QueryStatistics",{enumerable:!0,get:function(){return K.QueryStatistics}});Object.defineProperty(d,"Stats",{enumerable:!0,get:function(){return K.Stats}});var Bp=It(xo());d.Result=Bp.default;var x0=It(Sp());d.ConnectionProvider=x0.default;var Vp=It(Ep());d.Connection=Vp.default;var Wp=It(Hs());d.Transaction=Wp.default;var Hp=It(Gs());d.Session=Hp.default;var Xs=Or(Mp()),zp=Xs;d.Driver=Xs.default;d.driver=zp;var Yp=It(kp());d.auth=Yp.default;var Zp=Or(Lp());d.types=Zp;var Gp=Or(go());d.json=Gp;var Kp=Or(Fs());d.internal=Kp;var Qp={SERVICE_UNAVAILABLE:Ct.SERVICE_UNAVAILABLE,SESSION_EXPIRED:Ct.SESSION_EXPIRED,PROTOCOL_ERROR:Ct.PROTOCOL_ERROR};d.error=Qp;var D0={newError:Ct.newError,Neo4jError:Ct.Neo4jError,error:Qp,Integer:be.default,int:be.int,isInt:be.isInt,inSafeRange:be.inSafeRange,toNumber:be.toNumber,toString:be.toString,internal:Kp,isPoint:Do.isPoint,Point:Do.Point,Date:x.Date,DateTime:x.DateTime,Duration:x.Duration,isDate:x.isDate,isDateTime:x.isDateTime,isDuration:x.isDuration,isLocalDateTime:x.isLocalDateTime,isLocalTime:x.isLocalTime,isTime:x.isTime,LocalDateTime:x.LocalDateTime,LocalTime:x.LocalTime,Time:x.Time,Node:H.Node,isNode:H.isNode,Relationship:H.Relationship,isRelationship:H.isRelationship,UnboundRelationship:H.UnboundRelationship,isUnboundRelationship:H.isUnboundRelationship,Path:H.Path,isPath:H.isPath,PathSegment:H.PathSegment,isPathSegment:H.isPathSegment,Record:Fp.default,ResultSummary:K.default,queryType:K.queryType,ServerInfo:K.ServerInfo,Notification:K.Notification,Plan:K.Plan,ProfiledPlan:K.ProfiledPlan,QueryStatistics:K.QueryStatistics,Stats:K.Stats,Result:Bp.default,Transaction:Wp.default,Session:Hp.default,Driver:Xs.default,Connection:Vp.default,types:Zp,driver:zp,json:Gp,auth:Yp.default};d.default=D0});var gr=l(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});function M0(r){return typeof r=="function"}Js.isFunction=M0});var pn=l(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});var $s=!1;ea.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){var t=new Error;console.warn(`DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: 
`+t.stack)}else $s&&console.log("RxJS: Back to a better error behavior. Thank you. <3");$s=r},get useDeprecatedSynchronousErrorHandling(){return $s}}});var Mo=l(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});function k0(r){setTimeout(function(){throw r},0)}ta.hostReportError=k0});var na=l(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});var U0=pn(),L0=Mo();ra.empty={closed:!0,next:function(r){},error:function(r){if(U0.config.useDeprecatedSynchronousErrorHandling)throw r;L0.hostReportError(r)},complete:function(){}}});var $=l(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.isArray=function(){return Array.isArray||function(r){return r&&typeof r.length=="number"}}()});var ko=l(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});function F0(r){return r!==null&&typeof r=="object"}oa.isObject=F0});var sa=l(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});var B0=function(){function r(t){return Error.call(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(e,n){return n+1+") "+e.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t,this}return r.prototype=Object.create(Error.prototype),r}();ua.UnsubscriptionError=B0});var Y=l(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});var V0=$(),W0=ko(),H0=gr(),Uo=sa(),z0=function(){function r(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return r.prototype.unsubscribe=function(){var t;if(!this.closed){var e=this,n=e._parentOrParents,i=e._ctorUnsubscribe,o=e._unsubscribe,u=e._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof r)n.remove(this);else if(n!==null)for(var s=0;s<n.length;++s){var c=n[s];c.remove(this)}if(H0.isFunction(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(h){t=h instanceof Uo.UnsubscriptionError?Xp(h.errors):[h]}}if(V0.isArray(u))for(var s=-1,a=u.length;++s<a;){var f=u[s];if(W0.isObject(f))try{f.unsubscribe()}catch(p){t=t||[],p instanceof Uo.UnsubscriptionError?t=t.concat(Xp(p.errors)):t.push(p)}}if(t)throw new Uo.UnsubscriptionError(t)}},r.prototype.add=function(t){var e=t;if(!t)return r.EMPTY;switch(typeof t){case"function":e=new r(t);case"object":if(e===this||e.closed||typeof e.unsubscribe!="function")return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof r)){var n=e;e=new r,e._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=e._parentOrParents;if(i===null)e._parentOrParents=this;else if(i instanceof r){if(i===this)return e;e._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return e;var o=this._subscriptions;return o===null?this._subscriptions=[e]:o.push(e),e},r.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);n!==-1&&e.splice(n,1)}},r.EMPTY=function(t){return t.closed=!0,t}(new r),r}();aa.Subscription=z0;function Xp(r){return r.reduce(function(t,e){return t.concat(e instanceof Uo.UnsubscriptionError?e.errors:e)},[])}});var Lo=l(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.rxSubscriber=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}();_n.$$rxSubscriber=_n.rxSubscriber});var g=l(Er=>{"use strict";var $p=Er&&Er.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Er,"__esModule",{value:!0});var Jp=gr(),ca=na(),Y0=Y(),Z0=Lo(),Sr=pn(),Fo=Mo(),e_=function(r){$p(t,r);function t(e,n,i){var o=r.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=ca.empty;break;case 1:if(!e){o.destination=ca.empty;break}if(typeof e=="object"){e instanceof t?(o.syncErrorThrowable=e.syncErrorThrowable,o.destination=e,e.add(o)):(o.syncErrorThrowable=!0,o.destination=new fa(o,e));break}default:o.syncErrorThrowable=!0,o.destination=new fa(o,e,n,i);break}return o}return t.prototype[Z0.rxSubscriber]=function(){return this},t.create=function(e,n,i){var o=new t(e,n,i);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(Y0.Subscription);Er.Subscriber=e_;var fa=function(r){$p(t,r);function t(e,n,i,o){var u=r.call(this)||this;u._parentSubscriber=e;var s,c=u;return Jp.isFunction(n)?s=n:n&&(s=n.next,i=n.error,o=n.complete,n!==ca.empty&&(c=Object.create(n),Jp.isFunction(c.unsubscribe)&&u.add(c.unsubscribe.bind(c)),c.unsubscribe=u.unsubscribe.bind(u))),u._context=c,u._next=s,u._error=i,u._complete=o,u}return t.prototype.next=function(e){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!Sr.config.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,e):this.__tryOrSetError(n,this._next,e)&&this.unsubscribe()}},t.prototype.error=function(e){if(!this.isStopped){var n=this._parentSubscriber,i=Sr.config.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,e),this.unsubscribe()):(this.__tryOrSetError(n,this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=e,n.syncErrorThrown=!0):Fo.hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;Fo.hostReportError(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var i=function(){return e._complete.call(e._context)};!Sr.config.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(n,i),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,n){try{e.call(this._context,n)}catch(i){if(this.unsubscribe(),Sr.config.useDeprecatedSynchronousErrorHandling)throw i;Fo.hostReportError(i)}},t.prototype.__tryOrSetError=function(e,n,i){if(!Sr.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(o){return Sr.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=o,e.syncErrorThrown=!0,!0):(Fo.hostReportError(o),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(e_);Er.SafeSubscriber=fa});var Bo=l(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});var G0=g();function K0(r){for(;r;){var t=r,e=t.closed,n=t.destination,i=t.isStopped;if(e||i)return!1;n&&n instanceof G0.Subscriber?r=n:r=null}return!0}la.canReportError=K0});var r_=l(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});var ha=g(),t_=Lo(),Q0=na();function X0(r,t,e){if(r){if(r instanceof ha.Subscriber)return r;if(r[t_.rxSubscriber])return r[t_.rxSubscriber]()}return!r&&!t&&!e?new ha.Subscriber(Q0.empty):new ha.Subscriber(r,t,e)}pa.toSubscriber=X0});var Rt=l(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});_a.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}()});var ft=l(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});function J0(r){return r}da.identity=J0});var Wo=l(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});var $0=ft();function eT(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return n_(r)}Vo.pipe=eT;function n_(r){return r.length===0?$0.identity:r.length===1?r[0]:function(e){return r.reduce(function(n,i){return i(n)},e)}}Vo.pipeFromArray=n_});var I=l(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});var tT=Bo(),rT=r_(),nT=Rt(),iT=Wo(),Ho=pn(),oT=function(){function r(t){this._isScalar=!1,t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,n){var i=this.operator,o=rT.toSubscriber(t,e,n);if(i?o.add(i.call(o,this.source)):o.add(this.source||Ho.config.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),Ho.config.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){Ho.config.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),tT.canReportError(t)?t.error(e):console.warn(e)}},r.prototype.forEach=function(t,e){var n=this;return e=i_(e),new e(function(i,o){var u;u=n.subscribe(function(s){try{t(s)}catch(c){o(c),u&&u.unsubscribe()}},o,i)})},r.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},r.prototype[nT.observable]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length===0?this:iT.pipeFromArray(t)(this)},r.prototype.toPromise=function(t){var e=this;return t=i_(t),new t(function(n,i){var o;e.subscribe(function(u){return o=u},function(u){return i(u)},function(){return n(o)})})},r.create=function(t){return new r(t)},r}();va.Observable=oT;function i_(r){if(r||(r=Ho.config.Promise||Promise),!r)throw new Error("no Promise impl found");return r}});var dn=l(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});var uT=function(){function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return r.prototype=Object.create(Error.prototype),r}();ba.ObjectUnsubscribedError=uT});var ya=l(vn=>{"use strict";var sT=vn&&vn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(vn,"__esModule",{value:!0});var aT=Y(),cT=function(r){sT(t,r);function t(e,n){var i=r.call(this)||this;return i.subject=e,i.subscriber=n,i.closed=!1,i}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,n=e.observers;if(this.subject=null,!(!n||n.length===0||e.isStopped||e.closed)){var i=n.indexOf(this.subscriber);i!==-1&&n.splice(i,1)}}},t}(aT.Subscription);vn.SubjectSubscription=cT});var Q=l(At=>{"use strict";var ga=At&&At.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(At,"__esModule",{value:!0});var o_=I(),fT=g(),ma=Y(),bn=dn(),lT=ya(),hT=Lo(),u_=function(r){ga(t,r);function t(e){var n=r.call(this,e)||this;return n.destination=e,n}return t}(fT.Subscriber);At.SubjectSubscriber=u_;var s_=function(r){ga(t,r);function t(){var e=r.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return t.prototype[hT.rxSubscriber]=function(){return new u_(this)},t.prototype.lift=function(e){var n=new Oa(this,this);return n.operator=e,n},t.prototype.next=function(e){if(this.closed)throw new bn.ObjectUnsubscribedError;if(!this.isStopped)for(var n=this.observers,i=n.length,o=n.slice(),u=0;u<i;u++)o[u].next(e)},t.prototype.error=function(e){if(this.closed)throw new bn.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var n=this.observers,i=n.length,o=n.slice(),u=0;u<i;u++)o[u].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new bn.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,n=e.length,i=e.slice(),o=0;o<n;o++)i[o].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(e){if(this.closed)throw new bn.ObjectUnsubscribedError;return r.prototype._trySubscribe.call(this,e)},t.prototype._subscribe=function(e){if(this.closed)throw new bn.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),ma.Subscription.EMPTY):this.isStopped?(e.complete(),ma.Subscription.EMPTY):(this.observers.push(e),new lT.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new o_.Observable;return e.source=this,e},t.create=function(e,n){return new Oa(e,n)},t}(o_.Observable);At.Subject=s_;var Oa=function(r){ga(t,r);function t(e,n){var i=r.call(this)||this;return i.destination=e,i.source=n,i}return t.prototype.next=function(e){var n=this.destination;n&&n.next&&n.next(e)},t.prototype.error=function(e){var n=this.destination;n&&n.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var n=this.source;return n?this.source.subscribe(e):ma.Subscription.EMPTY},t}(s_);At.AnonymousSubject=Oa});var zo=l(yn=>{"use strict";var pT=yn&&yn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(yn,"__esModule",{value:!0});var _T=g();function dT(){return function(t){return t.lift(new vT(t))}}yn.refCount=dT;var vT=function(){function r(t){this.connectable=t}return r.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var i=new bT(t,n),o=e.subscribe(i);return i.closed||(i.connection=n.connect()),o},r}(),bT=function(r){pT(t,r);function t(e,n){var i=r.call(this,e)||this;return i.connectable=n,i}return t.prototype._unsubscribe=function(){var e=this.connectable;if(!e){this.connection=null;return}this.connectable=null;var n=e._refCount;if(n<=0){this.connection=null;return}if(e._refCount=n-1,n>1){this.connection=null;return}var i=this.connection,o=e._connection;this.connection=null,o&&(!i||o===i)&&o.unsubscribe()},t}(_T.Subscriber)});var Ea=l(wr=>{"use strict";var Sa=wr&&wr.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(wr,"__esModule",{value:!0});var yT=Q(),mT=I(),OT=g(),a_=Y(),gT=zo(),c_=function(r){Sa(t,r);function t(e,n){var i=r.call(this)||this;return i.source=e,i.subjectFactory=n,i._refCount=0,i._isComplete=!1,i}return t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,e=this._connection=new a_.Subscription,e.add(this.source.subscribe(new ST(this.getSubject(),this))),e.closed&&(this._connection=null,e=a_.Subscription.EMPTY)),e},t.prototype.refCount=function(){return gT.refCount()(this)},t}(mT.Observable);wr.ConnectableObservable=c_;wr.connectableObservableDescriptor=function(){var r=c_.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:r._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}}}();var ST=function(r){Sa(t,r);function t(e,n){var i=r.call(this,e)||this;return i.connectable=n,i}return t.prototype._error=function(e){this._unsubscribe(),r.prototype._error.call(this,e)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}},t}(yT.SubjectSubscriber),Y8=function(){function r(t){this.connectable=t}return r.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var i=new ET(t,n),o=e.subscribe(i);return i.closed||(i.connection=n.connect()),o},r}(),ET=function(r){Sa(t,r);function t(e,n){var i=r.call(this,e)||this;return i.connectable=n,i}return t.prototype._unsubscribe=function(){var e=this.connectable;if(!e){this.connection=null;return}this.connectable=null;var n=e._refCount;if(n<=0){this.connection=null;return}if(e._refCount=n-1,n>1){this.connection=null;return}var i=this.connection,o=e._connection;this.connection=null,o&&(!i||o===i)&&o.unsubscribe()},t}(OT.Subscriber)});var Ta=l(Tr=>{"use strict";var Yo=Tr&&Tr.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Tr,"__esModule",{value:!0});var f_=g(),l_=Y(),wT=I(),TT=Q();function PT(r,t,e,n){return function(i){return i.lift(new CT(r,t,e,n))}}Tr.groupBy=PT;var CT=function(){function r(t,e,n,i){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=i}return r.prototype.call=function(t,e){return e.subscribe(new IT(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},r}(),IT=function(r){Yo(t,r);function t(e,n,i,o,u){var s=r.call(this,e)||this;return s.keySelector=n,s.elementSelector=i,s.durationSelector=o,s.subjectSelector=u,s.groups=null,s.attemptedToUnsubscribe=!1,s.count=0,s}return t.prototype._next=function(e){var n;try{n=this.keySelector(e)}catch(i){this.error(i);return}this._group(e,n)},t.prototype._group=function(e,n){var i=this.groups;i||(i=this.groups=new Map);var o=i.get(n),u;if(this.elementSelector)try{u=this.elementSelector(e)}catch(a){this.error(a)}else u=e;if(!o){o=this.subjectSelector?this.subjectSelector():new TT.Subject,i.set(n,o);var s=new wa(n,o,this);if(this.destination.next(s),this.durationSelector){var c=void 0;try{c=this.durationSelector(new wa(n,o))}catch(a){this.error(a);return}this.add(c.subscribe(new RT(n,o,this)))}}o.closed||o.next(u)},t.prototype._error=function(e){var n=this.groups;n&&(n.forEach(function(i,o){i.error(e)}),n.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach(function(n,i){n.complete()}),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,this.count===0&&r.prototype.unsubscribe.call(this))},t}(f_.Subscriber),RT=function(r){Yo(t,r);function t(e,n,i){var o=r.call(this,n)||this;return o.key=e,o.group=n,o.parent=i,o}return t.prototype._next=function(e){this.complete()},t.prototype._unsubscribe=function(){var e=this,n=e.parent,i=e.key;this.key=this.parent=null,n&&n.removeGroup(i)},t}(f_.Subscriber),wa=function(r){Yo(t,r);function t(e,n,i){var o=r.call(this)||this;return o.key=e,o.groupSubject=n,o.refCountSubscription=i,o}return t.prototype._subscribe=function(e){var n=new l_.Subscription,i=this,o=i.refCountSubscription,u=i.groupSubject;return o&&!o.closed&&n.add(new AT(o)),n.add(u.subscribe(e)),n},t}(wT.Observable);Tr.GroupedObservable=wa;var AT=function(r){Yo(t,r);function t(e){var n=r.call(this)||this;return n.parent=e,e.count++,n}return t.prototype.unsubscribe=function(){var e=this.parent;!e.closed&&!this.closed&&(r.prototype.unsubscribe.call(this),e.count-=1,e.count===0&&e.attemptedToUnsubscribe&&e.unsubscribe())},t}(l_.Subscription)});var Pa=l(mn=>{"use strict";var jT=mn&&mn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(mn,"__esModule",{value:!0});var qT=Q(),NT=dn(),xT=function(r){jT(t,r);function t(e){var n=r.call(this)||this;return n._value=e,n}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(e){var n=r.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new NT.ObjectUnsubscribedError;return this._value},t.prototype.next=function(e){r.prototype.next.call(this,this._value=e)},t}(qT.Subject);mn.BehaviorSubject=xT});var h_=l(On=>{"use strict";var DT=On&&On.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(On,"__esModule",{value:!0});var MT=Y(),kT=function(r){DT(t,r);function t(e,n){return r.call(this)||this}return t.prototype.schedule=function(e,n){return n===void 0&&(n=0),this},t}(MT.Subscription);On.Action=kT});var Pr=l(gn=>{"use strict";var UT=gn&&gn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(gn,"__esModule",{value:!0});var LT=h_(),FT=function(r){UT(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.pending=!1,i}return t.prototype.schedule=function(e,n){if(n===void 0&&(n=0),this.closed)return this;this.state=e;var i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(o,this.id,n),this},t.prototype.requestAsyncId=function(e,n,i){return i===void 0&&(i=0),setInterval(e.flush.bind(e,this),i)},t.prototype.recycleAsyncId=function(e,n,i){if(i===void 0&&(i=0),i!==null&&this.delay===i&&this.pending===!1)return n;clearInterval(n)},t.prototype.execute=function(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,n){var i=!1,o=void 0;try{this.work(e)}catch(u){i=!0,o=!!u&&u||new Error(u)}if(i)return this.unsubscribe(),o},t.prototype._unsubscribe=function(){var e=this.id,n=this.scheduler,i=n.actions,o=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,o!==-1&&i.splice(o,1),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null},t}(LT.Action);gn.AsyncAction=FT});var p_=l(Sn=>{"use strict";var BT=Sn&&Sn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Sn,"__esModule",{value:!0});var VT=Pr(),WT=function(r){BT(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.scheduler=e,i.work=n,i}return t.prototype.schedule=function(e,n){return n===void 0&&(n=0),n>0?r.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},t.prototype.execute=function(e,n){return n>0||this.closed?r.prototype.execute.call(this,e,n):this._execute(e,n)},t.prototype.requestAsyncId=function(e,n,i){return i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0?r.prototype.requestAsyncId.call(this,e,n,i):e.flush(this)},t}(VT.AsyncAction);Sn.QueueAction=WT});var Ia=l(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});var HT=function(){function r(t,e){e===void 0&&(e=r.now),this.SchedulerAction=t,this.now=e}return r.prototype.schedule=function(t,e,n){return e===void 0&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},r.now=function(){return Date.now()},r}();Ca.Scheduler=HT});var Cr=l(En=>{"use strict";var zT=En&&En.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(En,"__esModule",{value:!0});var __=Ia(),YT=function(r){zT(t,r);function t(e,n){n===void 0&&(n=__.Scheduler.now);var i=r.call(this,e,function(){return t.delegate&&t.delegate!==i?t.delegate.now():n()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return t.prototype.schedule=function(e,n,i){return n===void 0&&(n=0),t.delegate&&t.delegate!==this?t.delegate.schedule(e,n,i):r.prototype.schedule.call(this,e,n,i)},t.prototype.flush=function(e){var n=this.actions;if(this.active){n.push(e);return}var i;this.active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this.active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}},t}(__.Scheduler);En.AsyncScheduler=YT});var d_=l(wn=>{"use strict";var ZT=wn&&wn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(wn,"__esModule",{value:!0});var GT=Cr(),KT=function(r){ZT(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(GT.AsyncScheduler);wn.QueueScheduler=KT});var Ra=l(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});var QT=p_(),XT=d_();Tn.queueScheduler=new XT.QueueScheduler(QT.QueueAction);Tn.queue=Tn.queueScheduler});var Ie=l(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});var v_=I();Pn.EMPTY=new v_.Observable(function(r){return r.complete()});function JT(r){return r?$T(r):Pn.EMPTY}Pn.empty=JT;function $T(r){return new v_.Observable(function(t){return r.schedule(function(){return t.complete()})})}});var Re=l(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});function eP(r){return r&&typeof r.schedule=="function"}Aa.isScheduler=eP});var qa=l(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.subscribeToArray=function(r){return function(t){for(var e=0,n=r.length;e<n&&!t.closed;e++)t.next(r[e]);t.complete()}}});var Zo=l(Na=>{"use strict";Object.defineProperty(Na,"__esModule",{value:!0});var tP=I(),rP=Y();function nP(r,t){return new tP.Observable(function(e){var n=new rP.Subscription,i=0;return n.add(t.schedule(function(){if(i===r.length){e.complete();return}e.next(r[i++]),e.closed||n.add(this.schedule())})),n})}Na.scheduleArray=nP});var Ir=l(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});var iP=I(),oP=qa(),uP=Zo();function sP(r,t){return t?uP.scheduleArray(r,t):new iP.Observable(oP.subscribeToArray(r))}xa.fromArray=sP});var Cn=l(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});var aP=Re(),cP=Ir(),fP=Zo();function lP(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r[r.length-1];return aP.isScheduler(e)?(r.pop(),fP.scheduleArray(r,e)):cP.fromArray(r)}Da.of=lP});var Go=l(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0});var b_=I();function hP(r,t){return t?new b_.Observable(function(e){return t.schedule(pP,0,{error:r,subscriber:e})}):new b_.Observable(function(e){return e.error(r)})}Ma.throwError=hP;function pP(r){var t=r.error,e=r.subscriber;e.error(t)}});var Rn=l(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});var _P=Ie(),dP=Cn(),vP=Go(),bP;(function(r){r.NEXT="N",r.ERROR="E",r.COMPLETE="C"})(bP=In.NotificationKind||(In.NotificationKind={}));var yP=function(){function r(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue=t==="N"}return r.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},r.prototype.do=function(t,e,n){var i=this.kind;switch(i){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},r.prototype.accept=function(t,e,n){return t&&typeof t.next=="function"?this.observe(t):this.do(t,e,n)},r.prototype.toObservable=function(){var t=this.kind;switch(t){case"N":return dP.of(this.value);case"E":return vP.throwError(this.error);case"C":return _P.empty()}throw new Error("unexpected notification kind value")},r.createNext=function(t){return typeof t<"u"?new r("N",t):r.undefinedValueNotification},r.createError=function(t){return new r("E",void 0,t)},r.createComplete=function(){return r.completeNotification},r.completeNotification=new r("C"),r.undefinedValueNotification=new r("N",void 0),r}();In.Notification=yP});var Ua=l(lt=>{"use strict";var mP=lt&&lt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(lt,"__esModule",{value:!0});var OP=g(),ka=Rn();function gP(r,t){return t===void 0&&(t=0),function(n){return n.lift(new y_(r,t))}}lt.observeOn=gP;var y_=function(){function r(t,e){e===void 0&&(e=0),this.scheduler=t,this.delay=e}return r.prototype.call=function(t,e){return e.subscribe(new m_(t,this.scheduler,this.delay))},r}();lt.ObserveOnOperator=y_;var m_=function(r){mP(t,r);function t(e,n,i){i===void 0&&(i=0);var o=r.call(this,e)||this;return o.scheduler=n,o.delay=i,o}return t.dispatch=function(e){var n=e.notification,i=e.destination;n.observe(i),this.unsubscribe()},t.prototype.scheduleMessage=function(e){var n=this.destination;n.add(this.scheduler.schedule(t.dispatch,this.delay,new O_(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(ka.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(ka.Notification.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(ka.Notification.createComplete()),this.unsubscribe()},t}(OP.Subscriber);lt.ObserveOnSubscriber=m_;var O_=function(){function r(t,e){this.notification=t,this.destination=e}return r}();lt.ObserveOnMessage=O_});var Ko=l(An=>{"use strict";var SP=An&&An.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(An,"__esModule",{value:!0});var EP=Q(),wP=Ra(),TP=Y(),PP=Ua(),CP=dn(),IP=ya(),RP=function(r){SP(t,r);function t(e,n,i){e===void 0&&(e=Number.POSITIVE_INFINITY),n===void 0&&(n=Number.POSITIVE_INFINITY);var o=r.call(this)||this;return o.scheduler=i,o._events=[],o._infiniteTimeWindow=!1,o._bufferSize=e<1?1:e,o._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(o._infiniteTimeWindow=!0,o.next=o.nextInfiniteTimeWindow):o.next=o.nextTimeWindow,o}return t.prototype.nextInfiniteTimeWindow=function(e){if(!this.isStopped){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift()}r.prototype.next.call(this,e)},t.prototype.nextTimeWindow=function(e){this.isStopped||(this._events.push(new AP(this._getNow(),e)),this._trimBufferThenGetEvents()),r.prototype.next.call(this,e)},t.prototype._subscribe=function(e){var n=this._infiniteTimeWindow,i=n?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,u=i.length,s;if(this.closed)throw new CP.ObjectUnsubscribedError;if(this.isStopped||this.hasError?s=TP.Subscription.EMPTY:(this.observers.push(e),s=new IP.SubjectSubscription(this,e)),o&&e.add(e=new PP.ObserveOnSubscriber(e,o)),n)for(var c=0;c<u&&!e.closed;c++)e.next(i[c]);else for(var c=0;c<u&&!e.closed;c++)e.next(i[c].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),s},t.prototype._getNow=function(){return(this.scheduler||wP.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),n=this._bufferSize,i=this._windowTime,o=this._events,u=o.length,s=0;s<u&&!(e-o[s].time<i);)s++;return u>n&&(s=Math.max(s,u-n)),s>0&&o.splice(0,s),o},t}(EP.Subject);An.ReplaySubject=RP;var AP=function(){function r(t,e){this.time=t,this.value=e}return r}()});var qn=l(jn=>{"use strict";var jP=jn&&jn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(jn,"__esModule",{value:!0});var qP=Q(),g_=Y(),NP=function(r){jP(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return t.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),g_.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),g_.Subscription.EMPTY):r.prototype._subscribe.call(this,e)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(e){this.hasCompleted||r.prototype.error.call(this,e)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&r.prototype.next.call(this,this.value),r.prototype.complete.call(this)},t}(qP.Subject);jn.AsyncSubject=NP});var E_=l(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});var xP=1,DP=function(){return Promise.resolve()}(),Qo={};function S_(r){return r in Qo?(delete Qo[r],!0):!1}Xo.Immediate={setImmediate:function(r){var t=xP++;return Qo[t]=!0,DP.then(function(){return S_(t)&&r()}),t},clearImmediate:function(r){S_(r)}};Xo.TestTools={pending:function(){return Object.keys(Qo).length}}});var T_=l(Nn=>{"use strict";var MP=Nn&&Nn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Nn,"__esModule",{value:!0});var w_=E_(),kP=Pr(),UP=function(r){MP(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.scheduler=e,i.work=n,i}return t.prototype.requestAsyncId=function(e,n,i){return i===void 0&&(i=0),i!==null&&i>0?r.prototype.requestAsyncId.call(this,e,n,i):(e.actions.push(this),e.scheduled||(e.scheduled=w_.Immediate.setImmediate(e.flush.bind(e,null))))},t.prototype.recycleAsyncId=function(e,n,i){if(i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0)return r.prototype.recycleAsyncId.call(this,e,n,i);e.actions.length===0&&(w_.Immediate.clearImmediate(n),e.scheduled=void 0)},t}(kP.AsyncAction);Nn.AsapAction=UP});var P_=l(xn=>{"use strict";var LP=xn&&xn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(xn,"__esModule",{value:!0});var FP=Cr(),BP=function(r){LP(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var n=this.actions,i,o=-1,u=n.length;e=e||n.shift();do if(i=e.execute(e.state,e.delay))break;while(++o<u&&(e=n.shift()));if(this.active=!1,i){for(;++o<u&&(e=n.shift());)e.unsubscribe();throw i}},t}(FP.AsyncScheduler);xn.AsapScheduler=BP});var La=l(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});var VP=T_(),WP=P_();Dn.asapScheduler=new WP.AsapScheduler(VP.AsapAction);Dn.asap=Dn.asapScheduler});var ee=l(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});var HP=Pr(),zP=Cr();Mn.asyncScheduler=new zP.AsyncScheduler(HP.AsyncAction);Mn.async=Mn.asyncScheduler});var C_=l(kn=>{"use strict";var YP=kn&&kn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(kn,"__esModule",{value:!0});var ZP=Pr(),GP=function(r){YP(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.scheduler=e,i.work=n,i}return t.prototype.requestAsyncId=function(e,n,i){return i===void 0&&(i=0),i!==null&&i>0?r.prototype.requestAsyncId.call(this,e,n,i):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},t.prototype.recycleAsyncId=function(e,n,i){if(i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0)return r.prototype.recycleAsyncId.call(this,e,n,i);e.actions.length===0&&(cancelAnimationFrame(n),e.scheduled=void 0)},t}(ZP.AsyncAction);kn.AnimationFrameAction=GP});var I_=l(Un=>{"use strict";var KP=Un&&Un.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Un,"__esModule",{value:!0});var QP=Cr(),XP=function(r){KP(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var n=this.actions,i,o=-1,u=n.length;e=e||n.shift();do if(i=e.execute(e.state,e.delay))break;while(++o<u&&(e=n.shift()));if(this.active=!1,i){for(;++o<u&&(e=n.shift());)e.unsubscribe();throw i}},t}(QP.AsyncScheduler);Un.AnimationFrameScheduler=XP});var R_=l(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});var JP=C_(),$P=I_();Ln.animationFrameScheduler=new $P.AnimationFrameScheduler(JP.AnimationFrameAction);Ln.animationFrame=Ln.animationFrameScheduler});var q_=l(Rr=>{"use strict";var A_=Rr&&Rr.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Rr,"__esModule",{value:!0});var eC=Pr(),tC=Cr(),rC=function(r){A_(t,r);function t(e,n){e===void 0&&(e=j_),n===void 0&&(n=Number.POSITIVE_INFINITY);var i=r.call(this,e,function(){return i.frame})||this;return i.maxFrames=n,i.frame=0,i.index=-1,i}return t.prototype.flush=function(){for(var e=this,n=e.actions,i=e.maxFrames,o,u;(u=n[0])&&u.delay<=i&&(n.shift(),this.frame=u.delay,!(o=u.execute(u.state,u.delay))););if(o){for(;u=n.shift();)u.unsubscribe();throw o}},t.frameTimeFactor=10,t}(tC.AsyncScheduler);Rr.VirtualTimeScheduler=rC;var j_=function(r){A_(t,r);function t(e,n,i){i===void 0&&(i=e.index+=1);var o=r.call(this,e,n)||this;return o.scheduler=e,o.work=n,o.index=i,o.active=!0,o.index=e.index=i,o}return t.prototype.schedule=function(e,n){if(n===void 0&&(n=0),!this.id)return r.prototype.schedule.call(this,e,n);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(e,n)},t.prototype.requestAsyncId=function(e,n,i){i===void 0&&(i=0),this.delay=e.frame+i;var o=e.actions;return o.push(this),o.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,n,i){i===void 0&&(i=0)},t.prototype._execute=function(e,n){if(this.active===!0)return r.prototype._execute.call(this,e,n)},t.sortActions=function(e,n){return e.delay===n.delay?e.index===n.index?0:e.index>n.index?1:-1:e.delay>n.delay?1:-1},t}(eC.AsyncAction);Rr.VirtualAction=j_});var Jo=l(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});function nC(){}Fa.noop=nC});var N_=l(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});var iC=I();function oC(r){return!!r&&(r instanceof iC.Observable||typeof r.lift=="function"&&typeof r.subscribe=="function")}Ba.isObservable=oC});var Ar=l(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});var uC=function(){function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return r.prototype=Object.create(Error.prototype),r}();Va.ArgumentOutOfRangeError=uC});var jr=l(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});var sC=function(){function r(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return r.prototype=Object.create(Error.prototype),r}();Wa.EmptyError=sC});var za=l(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});var aC=function(){function r(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return r.prototype=Object.create(Error.prototype),r}();Ha.TimeoutError=aC});var _e=l(qr=>{"use strict";var cC=qr&&qr.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(qr,"__esModule",{value:!0});var fC=g();function lC(r,t){return function(n){if(typeof r!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new x_(r,t))}}qr.map=lC;var x_=function(){function r(t,e){this.project=t,this.thisArg=e}return r.prototype.call=function(t,e){return e.subscribe(new hC(t,this.project,this.thisArg))},r}();qr.MapOperator=x_;var hC=function(r){cC(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.project=n,o.count=0,o.thisArg=i||o,o}return t.prototype._next=function(e){var n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(n)},t}(fC.Subscriber)});var k_=l(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});var pC=I(),D_=qn(),_C=_e(),dC=Bo(),vC=$(),bC=Re();function M_(r,t,e){if(t)if(bC.isScheduler(t))e=t;else return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return M_(r,e).apply(void 0,n).pipe(_C.map(function(o){return vC.isArray(o)?t.apply(void 0,o):t(o)}))};return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=this,u,s={context:o,subject:u,callbackFunc:r,scheduler:e};return new pC.Observable(function(c){if(e){var f={args:n,subscriber:c,params:s};return e.schedule(yC,0,f)}else{if(!u){u=new D_.AsyncSubject;var a=function(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];u.next(h.length<=1?h[0]:h),u.complete()};try{r.apply(o,n.concat([a]))}catch(h){dC.canReportError(u)?u.error(h):console.warn(h)}}return u.subscribe(c)}})}}Ya.bindCallback=M_;function yC(r){var t=this,e=this,n=r.args,i=r.subscriber,o=r.params,u=o.callbackFunc,s=o.context,c=o.scheduler,a=o.subject;if(!a){a=o.subject=new D_.AsyncSubject;var f=function(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];var y=h.length<=1?h[0]:h;t.add(c.schedule(mC,0,{value:y,subject:a}))};try{u.apply(s,n.concat([f]))}catch(h){a.error(h)}}this.add(a.subscribe(i))}function mC(r){var t=r.value,e=r.subject;e.next(t),e.complete()}});var B_=l(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});var OC=I(),L_=qn(),gC=_e(),SC=Bo(),EC=Re(),wC=$();function F_(r,t,e){if(t)if(EC.isScheduler(t))e=t;else return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return F_(r,e).apply(void 0,n).pipe(gC.map(function(o){return wC.isArray(o)?t.apply(void 0,o):t(o)}))};return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o={subject:void 0,args:n,callbackFunc:r,scheduler:e,context:this};return new OC.Observable(function(u){var s=o.context,c=o.subject;if(e)return e.schedule(TC,0,{params:o,subscriber:u,context:s});if(!c){c=o.subject=new L_.AsyncSubject;var a=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];var p=f.shift();if(p){c.error(p);return}c.next(f.length<=1?f[0]:f),c.complete()};try{r.apply(s,n.concat([a]))}catch(f){SC.canReportError(c)?c.error(f):console.warn(f)}}return c.subscribe(u)})}}Za.bindNodeCallback=F_;function TC(r){var t=this,e=r.params,n=r.subscriber,i=r.context,o=e.callbackFunc,u=e.args,s=e.scheduler,c=e.subject;if(!c){c=e.subject=new L_.AsyncSubject;var a=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];var p=f.shift();if(p)t.add(s.schedule(U_,0,{err:p,subject:c}));else{var y=f.length<=1?f[0]:f;t.add(s.schedule(PC,0,{value:y,subject:c}))}};try{o.apply(i,u.concat([a]))}catch(f){this.add(s.schedule(U_,0,{err:f,subject:c}))}}this.add(c.subscribe(n))}function PC(r){var t=r.value,e=r.subject;e.next(t),e.complete()}function U_(r){var t=r.err,e=r.subject;e.error(t)}});var ht=l(Fn=>{"use strict";var CC=Fn&&Fn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Fn,"__esModule",{value:!0});var IC=g(),RC=function(r){CC(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.notifyNext=function(e,n,i,o,u){this.destination.next(n)},t.prototype.notifyError=function(e,n){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(IC.Subscriber);Fn.OuterSubscriber=RC});var V_=l(Bn=>{"use strict";var AC=Bn&&Bn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Bn,"__esModule",{value:!0});var jC=g(),qC=function(r){AC(t,r);function t(e,n,i){var o=r.call(this)||this;return o.parent=e,o.outerValue=n,o.outerIndex=i,o.index=0,o}return t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(jC.Subscriber);Bn.InnerSubscriber=qC});var W_=l(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});var NC=Mo();Ga.subscribeToPromise=function(r){return function(t){return r.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,NC.hostReportError),t}}});var xr=l(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});function H_(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}Nr.getSymbolIterator=H_;Nr.iterator=H_();Nr.$$iterator=Nr.iterator});var z_=l(Ka=>{"use strict";Object.defineProperty(Ka,"__esModule",{value:!0});var xC=xr();Ka.subscribeToIterable=function(r){return function(t){var e=r[xC.iterator]();do{var n=void 0;try{n=e.next()}catch(i){return t.error(i),t}if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}while(!0);return typeof e.return=="function"&&t.add(function(){e.return&&e.return()}),t}}});var Y_=l(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});var DC=Rt();Qa.subscribeToObservable=function(r){return function(t){var e=r[DC.observable]();if(typeof e.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)}}});var Ja=l(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});Xa.isArrayLike=function(r){return r&&typeof r.length=="number"&&typeof r!="function"}});var ec=l($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});function MC(r){return!!r&&typeof r.subscribe!="function"&&typeof r.then=="function"}$a.isPromise=MC});var Vn=l(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});var kC=qa(),UC=W_(),LC=z_(),FC=Y_(),BC=Ja(),VC=ec(),WC=ko(),HC=xr(),zC=Rt();tc.subscribeTo=function(r){if(!!r&&typeof r[zC.observable]=="function")return FC.subscribeToObservable(r);if(BC.isArrayLike(r))return kC.subscribeToArray(r);if(VC.isPromise(r))return UC.subscribeToPromise(r);if(!!r&&typeof r[HC.iterator]=="function")return LC.subscribeToIterable(r);var t=WC.isObject(r)?"an invalid object":"'"+r+"'",e="You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(e)}});var pt=l(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});var YC=V_(),ZC=Vn(),GC=I();function KC(r,t,e,n,i){if(i===void 0&&(i=new YC.InnerSubscriber(r,e,n)),!i.closed)return t instanceof GC.Observable?t.subscribe(i):ZC.subscribeTo(t)(i)}rc.subscribeToResult=KC});var $o=l(jt=>{"use strict";var QC=jt&&jt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(jt,"__esModule",{value:!0});var XC=Re(),JC=$(),$C=ht(),eI=pt(),tI=Ir(),Z_={};function rI(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=void 0,n=void 0;return XC.isScheduler(r[r.length-1])&&(n=r.pop()),typeof r[r.length-1]=="function"&&(e=r.pop()),r.length===1&&JC.isArray(r[0])&&(r=r[0]),tI.fromArray(r,n).lift(new G_(e))}jt.combineLatest=rI;var G_=function(){function r(t){this.resultSelector=t}return r.prototype.call=function(t,e){return e.subscribe(new K_(t,this.resultSelector))},r}();jt.CombineLatestOperator=G_;var K_=function(r){QC(t,r);function t(e,n){var i=r.call(this,e)||this;return i.resultSelector=n,i.active=0,i.values=[],i.observables=[],i}return t.prototype._next=function(e){this.values.push(Z_),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,n=e.length;if(n===0)this.destination.complete();else{this.active=n,this.toRespond=n;for(var i=0;i<n;i++){var o=e[i];this.add(eI.subscribeToResult(this,o,void 0,i))}}},t.prototype.notifyComplete=function(e){(this.active-=1)===0&&this.destination.complete()},t.prototype.notifyNext=function(e,n,i){var o=this.values,u=o[i],s=this.toRespond?u===Z_?--this.toRespond:this.toRespond:0;o[i]=n,s===0&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},t.prototype._tryResultSelector=function(e){var n;try{n=this.resultSelector.apply(this,e)}catch(i){this.destination.error(i);return}this.destination.next(n)},t}($C.OuterSubscriber);jt.CombineLatestSubscriber=K_});var Q_=l(nc=>{"use strict";Object.defineProperty(nc,"__esModule",{value:!0});var nI=I(),iI=Y(),oI=Rt();function uI(r,t){return new nI.Observable(function(e){var n=new iI.Subscription;return n.add(t.schedule(function(){var i=r[oI.observable]();n.add(i.subscribe({next:function(o){n.add(t.schedule(function(){return e.next(o)}))},error:function(o){n.add(t.schedule(function(){return e.error(o)}))},complete:function(){n.add(t.schedule(function(){return e.complete()}))}}))})),n})}nc.scheduleObservable=uI});var X_=l(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});var sI=I(),aI=Y();function cI(r,t){return new sI.Observable(function(e){var n=new aI.Subscription;return n.add(t.schedule(function(){return r.then(function(i){n.add(t.schedule(function(){e.next(i),n.add(t.schedule(function(){return e.complete()}))}))},function(i){n.add(t.schedule(function(){return e.error(i)}))})})),n})}ic.schedulePromise=cI});var J_=l(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});var fI=I(),lI=Y(),hI=xr();function pI(r,t){if(!r)throw new Error("Iterable cannot be null");return new fI.Observable(function(e){var n=new lI.Subscription,i;return n.add(function(){i&&typeof i.return=="function"&&i.return()}),n.add(t.schedule(function(){i=r[hI.iterator](),n.add(t.schedule(function(){if(!e.closed){var o,u;try{var s=i.next();o=s.value,u=s.done}catch(c){e.error(c);return}u?e.complete():(e.next(o),this.schedule())}}))})),n})}oc.scheduleIterable=pI});var $_=l(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});var _I=Rt();function dI(r){return r&&typeof r[_I.observable]=="function"}uc.isInteropObservable=dI});var ed=l(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});var vI=xr();function bI(r){return r&&typeof r[vI.iterator]=="function"}sc.isIterable=bI});var cc=l(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});var yI=Q_(),mI=X_(),OI=Zo(),gI=J_(),SI=$_(),EI=ec(),wI=Ja(),TI=ed();function PI(r,t){if(r!=null){if(SI.isInteropObservable(r))return yI.scheduleObservable(r,t);if(EI.isPromise(r))return mI.schedulePromise(r,t);if(wI.isArrayLike(r))return OI.scheduleArray(r,t);if(TI.isIterable(r)||typeof r=="string")return gI.scheduleIterable(r,t)}throw new TypeError((r!==null&&typeof r||r)+" is not observable")}ac.scheduled=PI});var Ae=l(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});var td=I(),CI=Vn(),II=cc();function RI(r,t){return t?II.scheduled(r,t):r instanceof td.Observable?r:new td.Observable(CI.subscribeTo(r))}fc.from=RI});var k=l(Ke=>{"use strict";var eu=Ke&&Ke.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ke,"__esModule",{value:!0});var tu=g(),AI=I(),jI=Vn(),qI=function(r){eu(t,r);function t(e){var n=r.call(this)||this;return n.parent=e,n}return t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(tu.Subscriber);Ke.SimpleInnerSubscriber=qI;var NI=function(r){eu(t,r);function t(e,n,i){var o=r.call(this)||this;return o.parent=e,o.outerValue=n,o.outerIndex=i,o}return t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(tu.Subscriber);Ke.ComplexInnerSubscriber=NI;var xI=function(r){eu(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(tu.Subscriber);Ke.SimpleOuterSubscriber=xI;var DI=function(r){eu(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.notifyNext=function(e,n,i,o){this.destination.next(n)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(tu.Subscriber);Ke.ComplexOuterSubscriber=DI;function MI(r,t){if(!t.closed){if(r instanceof AI.Observable)return r.subscribe(t);var e;try{e=jI.subscribeTo(r)(t)}catch(n){t.error(n)}return e}}Ke.innerSubscribe=MI});var Wn=l(_t=>{"use strict";var kI=_t&&_t.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(_t,"__esModule",{value:!0});var UI=_e(),LI=Ae(),lc=k();function hc(r,t,e){return e===void 0&&(e=Number.POSITIVE_INFINITY),typeof t=="function"?function(n){return n.pipe(hc(function(i,o){return LI.from(r(i,o)).pipe(UI.map(function(u,s){return t(i,u,o,s)}))},e))}:(typeof t=="number"&&(e=t),function(n){return n.lift(new rd(r,e))})}_t.mergeMap=hc;var rd=function(){function r(t,e){e===void 0&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return r.prototype.call=function(t,e){return e.subscribe(new nd(t,this.project,this.concurrent))},r}();_t.MergeMapOperator=rd;var nd=function(r){kI(t,r);function t(e,n,i){i===void 0&&(i=Number.POSITIVE_INFINITY);var o=r.call(this,e)||this;return o.project=n,o.concurrent=i,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var n,i=this.index++;try{n=this.project(e,i)}catch(o){this.destination.error(o);return}this.active++,this._innerSub(n)},t.prototype._innerSub=function(e){var n=new lc.SimpleInnerSubscriber(this),i=this.destination;i.add(n);var o=lc.innerSubscribe(e,n);o!==n&&i.add(o)},t.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},t}(lc.SimpleOuterSubscriber);_t.MergeMapSubscriber=nd;_t.flatMap=hc});var ru=l(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});var FI=Wn(),BI=ft();function VI(r){return r===void 0&&(r=Number.POSITIVE_INFINITY),FI.mergeMap(BI.identity,r)}pc.mergeAll=VI});var dc=l(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});var WI=ru();function HI(){return WI.mergeAll(1)}_c.concatAll=HI});var Hn=l(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});var zI=Cn(),YI=dc();function ZI(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return YI.concatAll()(zI.of.apply(void 0,r))}vc.concat=ZI});var nu=l(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});var GI=I(),KI=Ae(),QI=Ie();function XI(r){return new GI.Observable(function(t){var e;try{e=r()}catch(i){t.error(i);return}var n=e?KI.from(e):QI.empty();return n.subscribe(t)})}bc.defer=XI});var od=l(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});var JI=I(),id=$(),$I=_e(),e1=ko(),t1=Ae();function r1(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===1){var e=r[0];if(id.isArray(e))return iu(e,null);if(e1.isObject(e)&&Object.getPrototypeOf(e)===Object.prototype){var n=Object.keys(e);return iu(n.map(function(o){return e[o]}),n)}}if(typeof r[r.length-1]=="function"){var i=r.pop();return r=r.length===1&&id.isArray(r[0])?r[0]:r,iu(r,null).pipe($I.map(function(o){return i.apply(void 0,o)}))}return iu(r,null)}yc.forkJoin=r1;function iu(r,t){return new JI.Observable(function(e){var n=r.length;if(n===0){e.complete();return}for(var i=new Array(n),o=0,u=0,s=function(a){var f=t1.from(r[a]),h=!1;e.add(f.subscribe({next:function(p){h||(h=!0,u++),i[a]=p},error:function(p){return e.error(p)},complete:function(){o++,(o===n||!h)&&(u===n&&e.next(t?t.reduce(function(p,y,O){return p[y]=i[O],p},{}):i),e.complete())}}))},c=0;c<n;c++)s(c)})}});var ad=l(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});var n1=I(),i1=$(),o1=gr(),u1=_e(),r3=function(){return Object.prototype.toString}();function ud(r,t,e,n){return o1.isFunction(e)&&(n=e,e=void 0),n?ud(r,t,e).pipe(u1.map(function(i){return i1.isArray(i)?n.apply(void 0,i):n(i)})):new n1.Observable(function(i){function o(u){arguments.length>1?i.next(Array.prototype.slice.call(arguments)):i.next(u)}sd(r,t,o,i,e)})}mc.fromEvent=ud;function sd(r,t,e,n,i){var o;if(c1(r)){var u=r;r.addEventListener(t,e,i),o=function(){return u.removeEventListener(t,e,i)}}else if(a1(r)){var s=r;r.on(t,e),o=function(){return s.off(t,e)}}else if(s1(r)){var c=r;r.addListener(t,e),o=function(){return c.removeListener(t,e)}}else if(r&&r.length)for(var a=0,f=r.length;a<f;a++)sd(r[a],t,e,n,i);else throw new TypeError("Invalid event target");n.add(o)}function s1(r){return r&&typeof r.addListener=="function"&&typeof r.removeListener=="function"}function a1(r){return r&&typeof r.on=="function"&&typeof r.off=="function"}function c1(r){return r&&typeof r.addEventListener=="function"&&typeof r.removeEventListener=="function"}});var fd=l(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});var f1=I(),l1=$(),h1=gr(),p1=_e();function cd(r,t,e){return e?cd(r,t).pipe(p1.map(function(n){return l1.isArray(n)?e.apply(void 0,n):e(n)})):new f1.Observable(function(n){var i=function(){for(var u=[],s=0;s<arguments.length;s++)u[s]=arguments[s];return n.next(u.length===1?u[0]:u)},o;try{o=r(i)}catch(u){n.error(u);return}if(!!h1.isFunction(t))return function(){return t(i,o)}})}Oc.fromEventPattern=cd});var hd=l(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});var _1=I(),ld=ft(),d1=Re();function v1(r,t,e,n,i){var o,u;if(arguments.length==1){var s=r;u=s.initialState,t=s.condition,e=s.iterate,o=s.resultSelector||ld.identity,i=s.scheduler}else n===void 0||d1.isScheduler(n)?(u=r,o=ld.identity,i=n):(u=r,o=n);return new _1.Observable(function(c){var a=u;if(i)return i.schedule(b1,0,{subscriber:c,iterate:e,condition:t,resultSelector:o,state:a});do{if(t){var f=void 0;try{f=t(a)}catch(p){c.error(p);return}if(!f){c.complete();break}}var h=void 0;try{h=o(a)}catch(p){c.error(p);return}if(c.next(h),c.closed)break;try{a=e(a)}catch(p){c.error(p);return}}while(!0)})}gc.generate=v1;function b1(r){var t=r.subscriber,e=r.condition;if(!t.closed){if(r.needIterate)try{r.state=r.iterate(r.state)}catch(o){t.error(o);return}else r.needIterate=!0;if(e){var n=void 0;try{n=e(r.state)}catch(o){t.error(o);return}if(!n){t.complete();return}if(t.closed)return}var i;try{i=r.resultSelector(r.state)}catch(o){t.error(o);return}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(r)}}});var _d=l(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});var y1=nu(),pd=Ie();function m1(r,t,e){return t===void 0&&(t=pd.EMPTY),e===void 0&&(e=pd.EMPTY),y1.defer(function(){return r()?t:e})}Sc.iif=m1});var zn=l(Ec=>{"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});var O1=$();function g1(r){return!O1.isArray(r)&&r-parseFloat(r)+1>=0}Ec.isNumeric=g1});var vd=l(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});var S1=I(),dd=ee(),E1=zn();function w1(r,t){return r===void 0&&(r=0),t===void 0&&(t=dd.async),(!E1.isNumeric(r)||r<0)&&(r=0),(!t||typeof t.schedule!="function")&&(t=dd.async),new S1.Observable(function(e){return e.add(t.schedule(T1,r,{subscriber:e,counter:0,period:r})),e})}wc.interval=w1;function T1(r){var t=r.subscriber,e=r.counter,n=r.period;t.next(e),this.schedule({subscriber:t,counter:e+1,period:n},n)}});var Pc=l(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});var P1=I(),C1=Re(),I1=ru(),R1=Ir();function A1(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=Number.POSITIVE_INFINITY,n=null,i=r[r.length-1];return C1.isScheduler(i)?(n=r.pop(),r.length>1&&typeof r[r.length-1]=="number"&&(e=r.pop())):typeof i=="number"&&(e=r.pop()),n===null&&r.length===1&&r[0]instanceof P1.Observable?r[0]:I1.mergeAll(e)(R1.fromArray(r,n))}Tc.merge=A1});var Cc=l(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});var j1=I(),q1=Jo();Yn.NEVER=new j1.Observable(q1.noop);function N1(){return Yn.NEVER}Yn.never=N1});var bd=l(Rc=>{"use strict";Object.defineProperty(Rc,"__esModule",{value:!0});var x1=I(),D1=Ae(),M1=$(),k1=Ie();function Ic(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===0)return k1.EMPTY;var e=r[0],n=r.slice(1);return r.length===1&&M1.isArray(e)?Ic.apply(void 0,e):new x1.Observable(function(i){var o=function(){return i.add(Ic.apply(void 0,n).subscribe(i))};return D1.from(e).subscribe({next:function(u){i.next(u)},error:o,complete:o})})}Rc.onErrorResumeNext=Ic});var Od=l(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});var yd=I(),U1=Y();function L1(r,t){return t?new yd.Observable(function(e){var n=Object.keys(r),i=new U1.Subscription;return i.add(t.schedule(md,0,{keys:n,index:0,subscriber:e,subscription:i,obj:r})),i}):new yd.Observable(function(e){for(var n=Object.keys(r),i=0;i<n.length&&!e.closed;i++){var o=n[i];r.hasOwnProperty(o)&&e.next([o,r[o]])}e.complete()})}ou.pairs=L1;function md(r){var t=r.keys,e=r.index,n=r.subscriber,i=r.subscription,o=r.obj;if(!n.closed)if(e<t.length){var u=t[e];n.next([u,o[u]]),i.add(this.schedule({keys:t,index:e+1,subscriber:n,subscription:i,obj:o}))}else n.complete()}ou.dispatch=md});var jc=l(Ac=>{"use strict";Object.defineProperty(Ac,"__esModule",{value:!0});function F1(r,t){function e(){return!e.pred.apply(e.thisArg,arguments)}return e.pred=r,e.thisArg=t,e}Ac.not=F1});var qt=l(Zn=>{"use strict";var B1=Zn&&Zn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Zn,"__esModule",{value:!0});var V1=g();function W1(r,t){return function(n){return n.lift(new H1(r,t))}}Zn.filter=W1;var H1=function(){function r(t,e){this.predicate=t,this.thisArg=e}return r.prototype.call=function(t,e){return e.subscribe(new z1(t,this.predicate,this.thisArg))},r}(),z1=function(r){B1(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.predicate=n,o.thisArg=i,o.count=0,o}return t.prototype._next=function(e){var n;try{n=this.predicate.call(this.thisArg,e,this.count++)}catch(i){this.destination.error(i);return}n&&this.destination.next(e)},t}(V1.Subscriber)});var wd=l(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});var Y1=jc(),gd=Vn(),Sd=qt(),Ed=I();function Z1(r,t,e){return[Sd.filter(t,e)(new Ed.Observable(gd.subscribeTo(r))),Sd.filter(Y1.not(t,e))(new Ed.Observable(gd.subscribeTo(r)))]}qc.partition=Z1});var Nc=l(Nt=>{"use strict";var G1=Nt&&Nt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Nt,"__esModule",{value:!0});var K1=$(),Q1=Ir(),X1=ht(),J1=pt();function $1(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===1)if(K1.isArray(r[0]))r=r[0];else return r[0];return Q1.fromArray(r,void 0).lift(new Td)}Nt.race=$1;var Td=function(){function r(){}return r.prototype.call=function(t,e){return e.subscribe(new Pd(t))},r}();Nt.RaceOperator=Td;var Pd=function(r){G1(t,r);function t(e){var n=r.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,n=e.length;if(n===0)this.destination.complete();else{for(var i=0;i<n&&!this.hasFirst;i++){var o=e[i],u=J1.subscribeToResult(this,o,void 0,i);this.subscriptions&&this.subscriptions.push(u),this.add(u)}this.observables=null}},t.prototype.notifyNext=function(e,n,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==i){var u=this.subscriptions[o];u.unsubscribe(),this.remove(u)}this.subscriptions=null}this.destination.next(n)},t}(X1.OuterSubscriber);Nt.RaceSubscriber=Pd});var Id=l(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});var eR=I();function tR(r,t,e){return r===void 0&&(r=0),new eR.Observable(function(n){t===void 0&&(t=r,r=0);var i=0,o=r;if(e)return e.schedule(Cd,0,{index:i,count:t,start:r,subscriber:n});do{if(i++>=t){n.complete();break}if(n.next(o++),n.closed)break}while(!0)})}uu.range=tR;function Cd(r){var t=r.start,e=r.index,n=r.count,i=r.subscriber;if(e>=n){i.complete();return}i.next(t),!i.closed&&(r.index=e+1,r.start=t+1,this.schedule(r))}uu.dispatch=Cd});var Dc=l(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});var rR=I(),nR=ee(),Rd=zn(),Ad=Re();function iR(r,t,e){r===void 0&&(r=0);var n=-1;return Rd.isNumeric(t)?n=Number(t)<1&&1||Number(t):Ad.isScheduler(t)&&(e=t),Ad.isScheduler(e)||(e=nR.async),new rR.Observable(function(i){var o=Rd.isNumeric(r)?r:+r-e.now();return e.schedule(oR,o,{index:0,period:n,subscriber:i})})}xc.timer=iR;function oR(r){var t=r.index,e=r.period,n=r.subscriber;if(n.next(t),!n.closed){if(e===-1)return n.complete();r.index=t+1,this.schedule(r,e)}}});var jd=l(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});var uR=I(),sR=Ae(),aR=Ie();function cR(r,t){return new uR.Observable(function(e){var n;try{n=r()}catch(s){e.error(s);return}var i;try{i=t(n)}catch(s){e.error(s);return}var o=i?sR.from(i):aR.EMPTY,u=o.subscribe(e);return function(){u.unsubscribe(),n&&n.unsubscribe()}})}Mc.using=cR});var au=l(xt=>{"use strict";var qd=xt&&xt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(xt,"__esModule",{value:!0});var fR=Ir(),lR=$(),hR=g(),su=xr(),kc=k();function pR(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r[r.length-1];return typeof e=="function"&&r.pop(),fR.fromArray(r,void 0).lift(new Nd(e))}xt.zip=pR;var Nd=function(){function r(t){this.resultSelector=t}return r.prototype.call=function(t,e){return e.subscribe(new xd(t,this.resultSelector))},r}();xt.ZipOperator=Nd;var xd=function(r){qd(t,r);function t(e,n,i){i===void 0&&(i=Object.create(null));var o=r.call(this,e)||this;return o.resultSelector=n,o.iterators=[],o.active=0,o.resultSelector=typeof n=="function"?n:void 0,o}return t.prototype._next=function(e){var n=this.iterators;lR.isArray(e)?n.push(new dR(e)):typeof e[su.iterator]=="function"?n.push(new _R(e[su.iterator]())):n.push(new vR(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,n=e.length;if(this.unsubscribe(),n===0){this.destination.complete();return}this.active=n;for(var i=0;i<n;i++){var o=e[i];if(o.stillUnsubscribed){var u=this.destination;u.add(o.subscribe())}else this.active--}},t.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,n=e.length,i=this.destination,o=0;o<n;o++){var u=e[o];if(typeof u.hasValue=="function"&&!u.hasValue())return}for(var s=!1,c=[],o=0;o<n;o++){var u=e[o],a=u.next();if(u.hasCompleted()&&(s=!0),a.done){i.complete();return}c.push(a.value)}this.resultSelector?this._tryresultSelector(c):i.next(c),s&&i.complete()},t.prototype._tryresultSelector=function(e){var n;try{n=this.resultSelector.apply(this,e)}catch(i){this.destination.error(i);return}this.destination.next(n)},t}(hR.Subscriber);xt.ZipSubscriber=xd;var _R=function(){function r(t){this.iterator=t,this.nextResult=t.next()}return r.prototype.hasValue=function(){return!0},r.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},r.prototype.hasCompleted=function(){var t=this.nextResult;return Boolean(t&&t.done)},r}(),dR=function(){function r(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return r.prototype[su.iterator]=function(){return this},r.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},r.prototype.hasValue=function(){return this.array.length>this.index},r.prototype.hasCompleted=function(){return this.array.length===this.index},r}(),vR=function(r){qd(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.parent=n,o.observable=i,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return t.prototype[su.iterator]=function(){return this},t.prototype.next=function(){var e=this.buffer;return e.length===0&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return kc.innerSubscribe(this.observable,new kc.SimpleInnerSubscriber(this))},t}(kc.SimpleOuterSubscriber)});var Gn=l(m=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var bR=I();m.Observable=bR.Observable;var yR=Ea();m.ConnectableObservable=yR.ConnectableObservable;var mR=Ta();m.GroupedObservable=mR.GroupedObservable;var OR=Rt();m.observable=OR.observable;var gR=Q();m.Subject=gR.Subject;var SR=Pa();m.BehaviorSubject=SR.BehaviorSubject;var ER=Ko();m.ReplaySubject=ER.ReplaySubject;var wR=qn();m.AsyncSubject=wR.AsyncSubject;var Dd=La();m.asap=Dd.asap;m.asapScheduler=Dd.asapScheduler;var Md=ee();m.async=Md.async;m.asyncScheduler=Md.asyncScheduler;var kd=Ra();m.queue=kd.queue;m.queueScheduler=kd.queueScheduler;var Ud=R_();m.animationFrame=Ud.animationFrame;m.animationFrameScheduler=Ud.animationFrameScheduler;var Ld=q_();m.VirtualTimeScheduler=Ld.VirtualTimeScheduler;m.VirtualAction=Ld.VirtualAction;var TR=Ia();m.Scheduler=TR.Scheduler;var PR=Y();m.Subscription=PR.Subscription;var CR=g();m.Subscriber=CR.Subscriber;var Fd=Rn();m.Notification=Fd.Notification;m.NotificationKind=Fd.NotificationKind;var IR=Wo();m.pipe=IR.pipe;var RR=Jo();m.noop=RR.noop;var AR=ft();m.identity=AR.identity;var jR=N_();m.isObservable=jR.isObservable;var qR=Ar();m.ArgumentOutOfRangeError=qR.ArgumentOutOfRangeError;var NR=jr();m.EmptyError=NR.EmptyError;var xR=dn();m.ObjectUnsubscribedError=xR.ObjectUnsubscribedError;var DR=sa();m.UnsubscriptionError=DR.UnsubscriptionError;var MR=za();m.TimeoutError=MR.TimeoutError;var kR=k_();m.bindCallback=kR.bindCallback;var UR=B_();m.bindNodeCallback=UR.bindNodeCallback;var LR=$o();m.combineLatest=LR.combineLatest;var FR=Hn();m.concat=FR.concat;var BR=nu();m.defer=BR.defer;var VR=Ie();m.empty=VR.empty;var WR=od();m.forkJoin=WR.forkJoin;var HR=Ae();m.from=HR.from;var zR=ad();m.fromEvent=zR.fromEvent;var YR=fd();m.fromEventPattern=YR.fromEventPattern;var ZR=hd();m.generate=ZR.generate;var GR=_d();m.iif=GR.iif;var KR=vd();m.interval=KR.interval;var QR=Pc();m.merge=QR.merge;var XR=Cc();m.never=XR.never;var JR=Cn();m.of=JR.of;var $R=bd();m.onErrorResumeNext=$R.onErrorResumeNext;var eA=Od();m.pairs=eA.pairs;var tA=wd();m.partition=tA.partition;var rA=Nc();m.race=rA.race;var nA=Id();m.range=nA.range;var iA=Go();m.throwError=iA.throwError;var oA=Dc();m.timer=oA.timer;var uA=jd();m.using=uA.using;var sA=au();m.zip=sA.zip;var aA=cc();m.scheduled=aA.scheduled;var cA=Ie();m.EMPTY=cA.EMPTY;var fA=Cc();m.NEVER=fA.NEVER;var lA=pn();m.config=lA.config});var Lc=l(Kn=>{"use strict";var hA=Kn&&Kn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Kn,"__esModule",{value:!0});var Uc=k();function pA(r){return function(e){return e.lift(new _A(r))}}Kn.audit=pA;var _A=function(){function r(t){this.durationSelector=t}return r.prototype.call=function(t,e){return e.subscribe(new dA(t,this.durationSelector))},r}(),dA=function(r){hA(t,r);function t(e,n){var i=r.call(this,e)||this;return i.durationSelector=n,i.hasValue=!1,i}return t.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var n=void 0;try{var i=this.durationSelector;n=i(e)}catch(u){return this.destination.error(u)}var o=Uc.innerSubscribe(n,new Uc.SimpleInnerSubscriber(this));!o||o.closed?this.clearThrottle():this.add(this.throttled=o)}},t.prototype.clearThrottle=function(){var e=this,n=e.value,i=e.hasValue,o=e.throttled;o&&(this.remove(o),this.throttled=void 0,o.unsubscribe()),i&&(this.value=void 0,this.hasValue=!1,this.destination.next(n))},t.prototype.notifyNext=function(){this.clearThrottle()},t.prototype.notifyComplete=function(){this.clearThrottle()},t}(Uc.SimpleOuterSubscriber)});var Bd=l(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});var vA=ee(),bA=Lc(),yA=Dc();function mA(r,t){return t===void 0&&(t=vA.async),bA.audit(function(){return yA.timer(r,t)})}Fc.auditTime=mA});var Vd=l(Qn=>{"use strict";var OA=Qn&&Qn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Qn,"__esModule",{value:!0});var Bc=k();function gA(r){return function(e){return e.lift(new SA(r))}}Qn.buffer=gA;var SA=function(){function r(t){this.closingNotifier=t}return r.prototype.call=function(t,e){return e.subscribe(new EA(t,this.closingNotifier))},r}(),EA=function(r){OA(t,r);function t(e,n){var i=r.call(this,e)||this;return i.buffer=[],i.add(Bc.innerSubscribe(n,new Bc.SimpleInnerSubscriber(i))),i}return t.prototype._next=function(e){this.buffer.push(e)},t.prototype.notifyNext=function(){var e=this.buffer;this.buffer=[],this.destination.next(e)},t}(Bc.SimpleOuterSubscriber)});var zd=l(Xn=>{"use strict";var Wd=Xn&&Xn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Xn,"__esModule",{value:!0});var Hd=g();function wA(r,t){return t===void 0&&(t=null),function(n){return n.lift(new TA(r,t))}}Xn.bufferCount=wA;var TA=function(){function r(t,e){this.bufferSize=t,this.startBufferEvery=e,!e||t===e?this.subscriberClass=PA:this.subscriberClass=CA}return r.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},r}(),PA=function(r){Wd(t,r);function t(e,n){var i=r.call(this,e)||this;return i.bufferSize=n,i.buffer=[],i}return t.prototype._next=function(e){var n=this.buffer;n.push(e),n.length==this.bufferSize&&(this.destination.next(n),this.buffer=[])},t.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),r.prototype._complete.call(this)},t}(Hd.Subscriber),CA=function(r){Wd(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.bufferSize=n,o.startBufferEvery=i,o.buffers=[],o.count=0,o}return t.prototype._next=function(e){var n=this,i=n.bufferSize,o=n.startBufferEvery,u=n.buffers,s=n.count;this.count++,s%o===0&&u.push([]);for(var c=u.length;c--;){var a=u[c];a.push(e),a.length===i&&(u.splice(c,1),this.destination.next(a))}},t.prototype._complete=function(){for(var e=this,n=e.buffers,i=e.destination;n.length>0;){var o=n.shift();o.length>0&&i.next(o)}r.prototype._complete.call(this)},t}(Hd.Subscriber)});var Gd=l(Jn=>{"use strict";var IA=Jn&&Jn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Jn,"__esModule",{value:!0});var RA=ee(),AA=g(),jA=Re();function qA(r){var t=arguments.length,e=RA.async;jA.isScheduler(arguments[arguments.length-1])&&(e=arguments[arguments.length-1],t--);var n=null;t>=2&&(n=arguments[1]);var i=Number.POSITIVE_INFINITY;return t>=3&&(i=arguments[2]),function(u){return u.lift(new NA(r,n,i,e))}}Jn.bufferTime=qA;var NA=function(){function r(t,e,n,i){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=n,this.scheduler=i}return r.prototype.call=function(t,e){return e.subscribe(new DA(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},r}(),xA=function(){function r(){this.buffer=[]}return r}(),DA=function(r){IA(t,r);function t(e,n,i,o,u){var s=r.call(this,e)||this;s.bufferTimeSpan=n,s.bufferCreationInterval=i,s.maxBufferSize=o,s.scheduler=u,s.contexts=[];var c=s.openContext();if(s.timespanOnly=i==null||i<0,s.timespanOnly){var a={subscriber:s,context:c,bufferTimeSpan:n};s.add(c.closeAction=u.schedule(Yd,n,a))}else{var f={subscriber:s,context:c},h={bufferTimeSpan:n,bufferCreationInterval:i,subscriber:s,scheduler:u};s.add(c.closeAction=u.schedule(Zd,n,f)),s.add(u.schedule(MA,i,h))}return s}return t.prototype._next=function(e){for(var n=this.contexts,i=n.length,o,u=0;u<i;u++){var s=n[u],c=s.buffer;c.push(e),c.length==this.maxBufferSize&&(o=s)}o&&this.onBufferFull(o)},t.prototype._error=function(e){this.contexts.length=0,r.prototype._error.call(this,e)},t.prototype._complete=function(){for(var e=this,n=e.contexts,i=e.destination;n.length>0;){var o=n.shift();i.next(o.buffer)}r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(e){this.closeContext(e);var n=e.closeAction;if(n.unsubscribe(),this.remove(n),!this.closed&&this.timespanOnly){e=this.openContext();var i=this.bufferTimeSpan,o={subscriber:this,context:e,bufferTimeSpan:i};this.add(e.closeAction=this.scheduler.schedule(Yd,i,o))}},t.prototype.openContext=function(){var e=new xA;return this.contexts.push(e),e},t.prototype.closeContext=function(e){this.destination.next(e.buffer);var n=this.contexts,i=n?n.indexOf(e):-1;i>=0&&n.splice(n.indexOf(e),1)},t}(AA.Subscriber);function Yd(r){var t=r.subscriber,e=r.context;e&&t.closeContext(e),t.closed||(r.context=t.openContext(),r.context.closeAction=this.schedule(r,r.bufferTimeSpan))}function MA(r){var t=r.bufferCreationInterval,e=r.bufferTimeSpan,n=r.subscriber,i=r.scheduler,o=n.openContext(),u=this;n.closed||(n.add(o.closeAction=i.schedule(Zd,e,{subscriber:n,context:o})),u.schedule(r,t))}function Zd(r){var t=r.subscriber,e=r.context;t.closeContext(e)}});var Qd=l($n=>{"use strict";var kA=$n&&$n.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty($n,"__esModule",{value:!0});var UA=Y(),Kd=pt(),LA=ht();function FA(r,t){return function(n){return n.lift(new BA(r,t))}}$n.bufferToggle=FA;var BA=function(){function r(t,e){this.openings=t,this.closingSelector=e}return r.prototype.call=function(t,e){return e.subscribe(new VA(t,this.openings,this.closingSelector))},r}(),VA=function(r){kA(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.closingSelector=i,o.contexts=[],o.add(Kd.subscribeToResult(o,n)),o}return t.prototype._next=function(e){for(var n=this.contexts,i=n.length,o=0;o<i;o++)n[o].buffer.push(e)},t.prototype._error=function(e){for(var n=this.contexts;n.length>0;){var i=n.shift();i.subscription.unsubscribe(),i.buffer=null,i.subscription=null}this.contexts=null,r.prototype._error.call(this,e)},t.prototype._complete=function(){for(var e=this.contexts;e.length>0;){var n=e.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,r.prototype._complete.call(this)},t.prototype.notifyNext=function(e,n){e?this.closeBuffer(e):this.openBuffer(n)},t.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},t.prototype.openBuffer=function(e){try{var n=this.closingSelector,i=n.call(this,e);i&&this.trySubscribe(i)}catch(o){this._error(o)}},t.prototype.closeBuffer=function(e){var n=this.contexts;if(n&&e){var i=e.buffer,o=e.subscription;this.destination.next(i),n.splice(n.indexOf(e),1),this.remove(o),o.unsubscribe()}},t.prototype.trySubscribe=function(e){var n=this.contexts,i=[],o=new UA.Subscription,u={buffer:i,subscription:o};n.push(u);var s=Kd.subscribeToResult(this,e,u);!s||s.closed?this.closeBuffer(u):(s.context=u,this.add(s),o.add(s))},t}(LA.OuterSubscriber)});var Xd=l(ei=>{"use strict";var WA=ei&&ei.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ei,"__esModule",{value:!0});var HA=Y(),Vc=k();function zA(r){return function(t){return t.lift(new YA(r))}}ei.bufferWhen=zA;var YA=function(){function r(t){this.closingSelector=t}return r.prototype.call=function(t,e){return e.subscribe(new ZA(t,this.closingSelector))},r}(),ZA=function(r){WA(t,r);function t(e,n){var i=r.call(this,e)||this;return i.closingSelector=n,i.subscribing=!1,i.openBuffer(),i}return t.prototype._next=function(e){this.buffer.push(e)},t.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},t.prototype.notifyNext=function(){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var n=this.buffer;this.buffer&&this.destination.next(n),this.buffer=[];var i;try{var o=this.closingSelector;i=o()}catch(u){return this.error(u)}e=new HA.Subscription,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(Vc.innerSubscribe(i,new Vc.SimpleInnerSubscriber(this))),this.subscribing=!1},t}(Vc.SimpleOuterSubscriber)});var Jd=l(ti=>{"use strict";var GA=ti&&ti.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ti,"__esModule",{value:!0});var Wc=k();function KA(r){return function(e){var n=new QA(r),i=e.lift(n);return n.caught=i}}ti.catchError=KA;var QA=function(){function r(t){this.selector=t}return r.prototype.call=function(t,e){return e.subscribe(new XA(t,this.selector,this.caught))},r}(),XA=function(r){GA(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.selector=n,o.caught=i,o}return t.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(u){r.prototype.error.call(this,u);return}this._unsubscribeAndRecycle();var i=new Wc.SimpleInnerSubscriber(this);this.add(i);var o=Wc.innerSubscribe(n,i);o!==i&&this.add(o)}},t}(Wc.SimpleOuterSubscriber)});var $d=l(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});var JA=$o();function $A(r){return function(t){return t.lift(new JA.CombineLatestOperator(r))}}Hc.combineAll=$A});var ev=l(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});var ej=$(),tj=$o(),rj=Ae();function nj(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=null;return typeof r[r.length-1]=="function"&&(e=r.pop()),r.length===1&&ej.isArray(r[0])&&(r=r[0].slice()),function(n){return n.lift.call(rj.from([n].concat(r)),new tj.CombineLatestOperator(e))}}zc.combineLatest=nj});var tv=l(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});var ij=Hn();function oj(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(e){return e.lift.call(ij.concat.apply(void 0,[e].concat(r)))}}Yc.concat=oj});var Gc=l(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});var uj=Wn();function sj(r,t){return uj.mergeMap(r,t,1)}Zc.concatMap=sj});var rv=l(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});var aj=Gc();function cj(r,t){return aj.concatMap(function(){return r},t)}Kc.concatMapTo=cj});var nv=l(ri=>{"use strict";var fj=ri&&ri.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ri,"__esModule",{value:!0});var lj=g();function hj(r){return function(t){return t.lift(new pj(r,t))}}ri.count=hj;var pj=function(){function r(t,e){this.predicate=t,this.source=e}return r.prototype.call=function(t,e){return e.subscribe(new _j(t,this.predicate,this.source))},r}(),_j=function(r){fj(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.predicate=n,o.source=i,o.count=0,o.index=0,o}return t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var n;try{n=this.predicate(e,this.index++,this.source)}catch(i){this.destination.error(i);return}n&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(lj.Subscriber)});var iv=l(ni=>{"use strict";var dj=ni&&ni.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ni,"__esModule",{value:!0});var Qc=k();function vj(r){return function(t){return t.lift(new bj(r))}}ni.debounce=vj;var bj=function(){function r(t){this.durationSelector=t}return r.prototype.call=function(t,e){return e.subscribe(new yj(t,this.durationSelector))},r}(),yj=function(r){dj(t,r);function t(e,n){var i=r.call(this,e)||this;return i.durationSelector=n,i.hasValue=!1,i}return t.prototype._next=function(e){try{var n=this.durationSelector.call(this,e);n&&this._tryNext(e,n)}catch(i){this.destination.error(i)}},t.prototype._complete=function(){this.emitValue(),this.destination.complete()},t.prototype._tryNext=function(e,n){var i=this.durationSubscription;this.value=e,this.hasValue=!0,i&&(i.unsubscribe(),this.remove(i)),i=Qc.innerSubscribe(n,new Qc.SimpleInnerSubscriber(this)),i&&!i.closed&&this.add(this.durationSubscription=i)},t.prototype.notifyNext=function(){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){if(this.hasValue){var e=this.value,n=this.durationSubscription;n&&(this.durationSubscription=void 0,n.unsubscribe(),this.remove(n)),this.value=void 0,this.hasValue=!1,r.prototype._next.call(this,e)}},t}(Qc.SimpleOuterSubscriber)});var ov=l(ii=>{"use strict";var mj=ii&&ii.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ii,"__esModule",{value:!0});var Oj=g(),gj=ee();function Sj(r,t){return t===void 0&&(t=gj.async),function(e){return e.lift(new Ej(r,t))}}ii.debounceTime=Sj;var Ej=function(){function r(t,e){this.dueTime=t,this.scheduler=e}return r.prototype.call=function(t,e){return e.subscribe(new wj(t,this.dueTime,this.scheduler))},r}(),wj=function(r){mj(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.dueTime=n,o.scheduler=i,o.debouncedSubscription=null,o.lastValue=null,o.hasValue=!1,o}return t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Tj,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;e!==null&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(Oj.Subscriber);function Tj(r){r.debouncedNext()}});var Dr=l(oi=>{"use strict";var Pj=oi&&oi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(oi,"__esModule",{value:!0});var Cj=g();function Ij(r){return r===void 0&&(r=null),function(t){return t.lift(new Rj(r))}}oi.defaultIfEmpty=Ij;var Rj=function(){function r(t){this.defaultValue=t}return r.prototype.call=function(t,e){return e.subscribe(new Aj(t,this.defaultValue))},r}(),Aj=function(r){Pj(t,r);function t(e,n){var i=r.call(this,e)||this;return i.defaultValue=n,i.isEmpty=!0,i}return t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(Cj.Subscriber)});var Jc=l(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});function jj(r){return r instanceof Date&&!isNaN(+r)}Xc.isDate=jj});var sv=l(ui=>{"use strict";var qj=ui&&ui.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ui,"__esModule",{value:!0});var Nj=ee(),xj=Jc(),Dj=g(),uv=Rn();function Mj(r,t){t===void 0&&(t=Nj.async);var e=xj.isDate(r),n=e?+r-t.now():Math.abs(r);return function(i){return i.lift(new kj(n,t))}}ui.delay=Mj;var kj=function(){function r(t,e){this.delay=t,this.scheduler=e}return r.prototype.call=function(t,e){return e.subscribe(new Uj(t,this.delay,this.scheduler))},r}(),Uj=function(r){qj(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.delay=n,o.scheduler=i,o.queue=[],o.active=!1,o.errored=!1,o}return t.dispatch=function(e){for(var n=e.source,i=n.queue,o=e.scheduler,u=e.destination;i.length>0&&i[0].time-o.now()<=0;)i.shift().notification.observe(u);if(i.length>0){var s=Math.max(0,i[0].time-o.now());this.schedule(e,s)}else this.unsubscribe(),n.active=!1},t.prototype._schedule=function(e){this.active=!0;var n=this.destination;n.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(this.errored!==!0){var n=this.scheduler,i=new Lj(n.now()+this.delay,e);this.queue.push(i),this.active===!1&&this._schedule(n)}},t.prototype._next=function(e){this.scheduleNotification(uv.Notification.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(uv.Notification.createComplete()),this.unsubscribe()},t}(Dj.Subscriber),Lj=function(){function r(t,e){this.time=t,this.notification=e}return r}()});var cv=l(si=>{"use strict";var $c=si&&si.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(si,"__esModule",{value:!0});var Fj=g(),Bj=I(),Vj=ht(),Wj=pt();function Hj(r,t){return t?function(e){return new Yj(e,t).lift(new av(r))}:function(e){return e.lift(new av(r))}}si.delayWhen=Hj;var av=function(){function r(t){this.delayDurationSelector=t}return r.prototype.call=function(t,e){return e.subscribe(new zj(t,this.delayDurationSelector))},r}(),zj=function(r){$c(t,r);function t(e,n){var i=r.call(this,e)||this;return i.delayDurationSelector=n,i.completed=!1,i.delayNotifierSubscriptions=[],i.index=0,i}return t.prototype.notifyNext=function(e,n,i,o,u){this.destination.next(e),this.removeSubscription(u),this.tryComplete()},t.prototype.notifyError=function(e,n){this._error(e)},t.prototype.notifyComplete=function(e){var n=this.removeSubscription(e);n&&this.destination.next(n),this.tryComplete()},t.prototype._next=function(e){var n=this.index++;try{var i=this.delayDurationSelector(e,n);i&&this.tryDelay(i,e)}catch(o){this.destination.error(o)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},t.prototype.removeSubscription=function(e){e.unsubscribe();var n=this.delayNotifierSubscriptions.indexOf(e);return n!==-1&&this.delayNotifierSubscriptions.splice(n,1),e.outerValue},t.prototype.tryDelay=function(e,n){var i=Wj.subscribeToResult(this,e,n);if(i&&!i.closed){var o=this.destination;o.add(i),this.delayNotifierSubscriptions.push(i)}},t.prototype.tryComplete=function(){this.completed&&this.delayNotifierSubscriptions.length===0&&this.destination.complete()},t}(Vj.OuterSubscriber),Yj=function(r){$c(t,r);function t(e,n){var i=r.call(this)||this;return i.source=e,i.subscriptionDelay=n,i}return t.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new Zj(e,this.source))},t}(Bj.Observable),Zj=function(r){$c(t,r);function t(e,n){var i=r.call(this)||this;return i.parent=e,i.source=n,i.sourceSubscribed=!1,i}return t.prototype._next=function(e){this.subscribeToSource()},t.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},t.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(Fj.Subscriber)});var fv=l(ai=>{"use strict";var Gj=ai&&ai.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ai,"__esModule",{value:!0});var Kj=g();function Qj(){return function(t){return t.lift(new Xj)}}ai.dematerialize=Qj;var Xj=function(){function r(){}return r.prototype.call=function(t,e){return e.subscribe(new Jj(t))},r}(),Jj=function(r){Gj(t,r);function t(e){return r.call(this,e)||this}return t.prototype._next=function(e){e.observe(this.destination)},t}(Kj.Subscriber)});var hv=l(Mr=>{"use strict";var $j=Mr&&Mr.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Mr,"__esModule",{value:!0});var ef=k();function eq(r,t){return function(e){return e.lift(new tq(r,t))}}Mr.distinct=eq;var tq=function(){function r(t,e){this.keySelector=t,this.flushes=e}return r.prototype.call=function(t,e){return e.subscribe(new lv(t,this.keySelector,this.flushes))},r}(),lv=function(r){$j(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.keySelector=n,o.values=new Set,i&&o.add(ef.innerSubscribe(i,new ef.SimpleInnerSubscriber(o))),o}return t.prototype.notifyNext=function(){this.values.clear()},t.prototype.notifyError=function(e){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var n,i=this.destination;try{n=this.keySelector(e)}catch(o){i.error(o);return}this._finalizeNext(n,e)},t.prototype._finalizeNext=function(e,n){var i=this.values;i.has(e)||(i.add(e),this.destination.next(n))},t}(ef.SimpleOuterSubscriber);Mr.DistinctSubscriber=lv});var tf=l(ci=>{"use strict";var rq=ci&&ci.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ci,"__esModule",{value:!0});var nq=g();function iq(r,t){return function(e){return e.lift(new oq(r,t))}}ci.distinctUntilChanged=iq;var oq=function(){function r(t,e){this.compare=t,this.keySelector=e}return r.prototype.call=function(t,e){return e.subscribe(new uq(t,this.compare,this.keySelector))},r}(),uq=function(r){rq(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.keySelector=i,o.hasKey=!1,typeof n=="function"&&(o.compare=n),o}return t.prototype.compare=function(e,n){return e===n},t.prototype._next=function(e){var n;try{var i=this.keySelector;n=i?i(e):e}catch(s){return this.destination.error(s)}var o=!1;if(this.hasKey)try{var u=this.compare;o=u(this.key,n)}catch(s){return this.destination.error(s)}else this.hasKey=!0;o||(this.key=n,this.destination.next(e))},t}(nq.Subscriber)});var pv=l(rf=>{"use strict";Object.defineProperty(rf,"__esModule",{value:!0});var sq=tf();function aq(r,t){return sq.distinctUntilChanged(function(e,n){return t?t(e[r],n[r]):e[r]===n[r]})}rf.distinctUntilKeyChanged=aq});var li=l(fi=>{"use strict";var cq=fi&&fi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(fi,"__esModule",{value:!0});var fq=jr(),lq=g();function hq(r){return r===void 0&&(r=dq),function(t){return t.lift(new pq(r))}}fi.throwIfEmpty=hq;var pq=function(){function r(t){this.errorFactory=t}return r.prototype.call=function(t,e){return e.subscribe(new _q(t,this.errorFactory))},r}(),_q=function(r){cq(t,r);function t(e,n){var i=r.call(this,e)||this;return i.errorFactory=n,i.hasValue=!1,i}return t.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(n){e=n}this.destination.error(e)},t}(lq.Subscriber);function dq(){return new fq.EmptyError}});var cu=l(hi=>{"use strict";var vq=hi&&hi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(hi,"__esModule",{value:!0});var bq=g(),yq=Ar(),mq=Ie();function Oq(r){return function(t){return r===0?mq.empty():t.lift(new gq(r))}}hi.take=Oq;var gq=function(){function r(t){if(this.total=t,this.total<0)throw new yq.ArgumentOutOfRangeError}return r.prototype.call=function(t,e){return e.subscribe(new Sq(t,this.total))},r}(),Sq=function(r){vq(t,r);function t(e,n){var i=r.call(this,e)||this;return i.total=n,i.count=0,i}return t.prototype._next=function(e){var n=this.total,i=++this.count;i<=n&&(this.destination.next(e),i===n&&(this.destination.complete(),this.unsubscribe()))},t}(bq.Subscriber)});var dv=l(nf=>{"use strict";Object.defineProperty(nf,"__esModule",{value:!0});var _v=Ar(),Eq=qt(),wq=li(),Tq=Dr(),Pq=cu();function Cq(r,t){if(r<0)throw new _v.ArgumentOutOfRangeError;var e=arguments.length>=2;return function(n){return n.pipe(Eq.filter(function(i,o){return o===r}),Pq.take(1),e?Tq.defaultIfEmpty(t):wq.throwIfEmpty(function(){return new _v.ArgumentOutOfRangeError}))}}nf.elementAt=Cq});var vv=l(of=>{"use strict";Object.defineProperty(of,"__esModule",{value:!0});var Iq=Hn(),Rq=Cn();function Aq(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(e){return Iq.concat(e,Rq.of.apply(void 0,r))}}of.endWith=Aq});var bv=l(pi=>{"use strict";var jq=pi&&pi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(pi,"__esModule",{value:!0});var qq=g();function Nq(r,t){return function(e){return e.lift(new xq(r,t,e))}}pi.every=Nq;var xq=function(){function r(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return r.prototype.call=function(t,e){return e.subscribe(new Dq(t,this.predicate,this.thisArg,this.source))},r}(),Dq=function(r){jq(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u.predicate=n,u.thisArg=i,u.source=o,u.index=0,u.thisArg=i||u,u}return t.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},t.prototype._next=function(e){var n=!1;try{n=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(i){this.destination.error(i);return}n||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(qq.Subscriber)});var yv=l(_i=>{"use strict";var Mq=_i&&_i.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(_i,"__esModule",{value:!0});var uf=k();function kq(){return function(r){return r.lift(new Uq)}}_i.exhaust=kq;var Uq=function(){function r(){}return r.prototype.call=function(t,e){return e.subscribe(new Lq(t))},r}(),Lq=function(r){Mq(t,r);function t(e){var n=r.call(this,e)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return t.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add(uf.innerSubscribe(e,new uf.SimpleInnerSubscriber(this))))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(uf.SimpleOuterSubscriber)});var Ov=l(di=>{"use strict";var Fq=di&&di.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(di,"__esModule",{value:!0});var Bq=_e(),Vq=Ae(),sf=k();function mv(r,t){return t?function(e){return e.pipe(mv(function(n,i){return Vq.from(r(n,i)).pipe(Bq.map(function(o,u){return t(n,o,i,u)}))}))}:function(e){return e.lift(new Wq(r))}}di.exhaustMap=mv;var Wq=function(){function r(t){this.project=t}return r.prototype.call=function(t,e){return e.subscribe(new Hq(t,this.project))},r}(),Hq=function(r){Fq(t,r);function t(e,n){var i=r.call(this,e)||this;return i.project=n,i.hasSubscription=!1,i.hasCompleted=!1,i.index=0,i}return t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var n,i=this.index++;try{n=this.project(e,i)}catch(o){this.destination.error(o);return}this.hasSubscription=!0,this._innerSub(n)},t.prototype._innerSub=function(e){var n=new sf.SimpleInnerSubscriber(this),i=this.destination;i.add(n);var o=sf.innerSubscribe(e,n);o!==n&&i.add(o)},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(sf.SimpleOuterSubscriber)});var Ev=l(Dt=>{"use strict";var zq=Dt&&Dt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Dt,"__esModule",{value:!0});var af=k();function Yq(r,t,e){return t===void 0&&(t=Number.POSITIVE_INFINITY),t=(t||0)<1?Number.POSITIVE_INFINITY:t,function(n){return n.lift(new gv(r,t,e))}}Dt.expand=Yq;var gv=function(){function r(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}return r.prototype.call=function(t,e){return e.subscribe(new Sv(t,this.project,this.concurrent,this.scheduler))},r}();Dt.ExpandOperator=gv;var Sv=function(r){zq(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u.project=n,u.concurrent=i,u.scheduler=o,u.index=0,u.active=0,u.hasCompleted=!1,i<Number.POSITIVE_INFINITY&&(u.buffer=[]),u}return t.dispatch=function(e){var n=e.subscriber,i=e.result,o=e.value,u=e.index;n.subscribeToProjection(i,o,u)},t.prototype._next=function(e){var n=this.destination;if(n.closed){this._complete();return}var i=this.index++;if(this.active<this.concurrent){n.next(e);try{var o=this.project,u=o(e,i);if(!this.scheduler)this.subscribeToProjection(u,e,i);else{var s={subscriber:this,result:u,value:e,index:i},c=this.destination;c.add(this.scheduler.schedule(t.dispatch,0,s))}}catch(a){n.error(a)}}else this.buffer.push(e)},t.prototype.subscribeToProjection=function(e,n,i){this.active++;var o=this.destination;o.add(af.innerSubscribe(e,new af.SimpleInnerSubscriber(this)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&this.active===0&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this._next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&this.active===0&&this.destination.complete()},t}(af.SimpleOuterSubscriber);Dt.ExpandSubscriber=Sv});var wv=l(vi=>{"use strict";var Zq=vi&&vi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(vi,"__esModule",{value:!0});var Gq=g(),Kq=Y();function Qq(r){return function(t){return t.lift(new Xq(r))}}vi.finalize=Qq;var Xq=function(){function r(t){this.callback=t}return r.prototype.call=function(t,e){return e.subscribe(new Jq(t,this.callback))},r}(),Jq=function(r){Zq(t,r);function t(e,n){var i=r.call(this,e)||this;return i.add(new Kq.Subscription(n)),i}return t}(Gq.Subscriber)});var cf=l(Mt=>{"use strict";var $q=Mt&&Mt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Mt,"__esModule",{value:!0});var eN=g();function tN(r,t){if(typeof r!="function")throw new TypeError("predicate is not a function");return function(e){return e.lift(new Tv(r,e,!1,t))}}Mt.find=tN;var Tv=function(){function r(t,e,n,i){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=i}return r.prototype.call=function(t,e){return e.subscribe(new Pv(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},r}();Mt.FindValueOperator=Tv;var Pv=function(r){$q(t,r);function t(e,n,i,o,u){var s=r.call(this,e)||this;return s.predicate=n,s.source=i,s.yieldIndex=o,s.thisArg=u,s.index=0,s}return t.prototype.notifyComplete=function(e){var n=this.destination;n.next(e),n.complete(),this.unsubscribe()},t.prototype._next=function(e){var n=this,i=n.predicate,o=n.thisArg,u=this.index++;try{var s=i.call(o||this,e,u,this.source);s&&this.notifyComplete(this.yieldIndex?u:e)}catch(c){this.destination.error(c)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(eN.Subscriber);Mt.FindValueSubscriber=Pv});var Cv=l(ff=>{"use strict";Object.defineProperty(ff,"__esModule",{value:!0});var rN=cf();function nN(r,t){return function(e){return e.lift(new rN.FindValueOperator(r,e,!0,t))}}ff.findIndex=nN});var Iv=l(lf=>{"use strict";Object.defineProperty(lf,"__esModule",{value:!0});var iN=jr(),oN=qt(),uN=cu(),sN=Dr(),aN=li(),cN=ft();function fN(r,t){var e=arguments.length>=2;return function(n){return n.pipe(r?oN.filter(function(i,o){return r(i,o,n)}):cN.identity,uN.take(1),e?sN.defaultIfEmpty(t):aN.throwIfEmpty(function(){return new iN.EmptyError}))}}lf.first=fN});var Rv=l(bi=>{"use strict";var lN=bi&&bi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(bi,"__esModule",{value:!0});var hN=g();function pN(){return function(t){return t.lift(new _N)}}bi.ignoreElements=pN;var _N=function(){function r(){}return r.prototype.call=function(t,e){return e.subscribe(new dN(t))},r}(),dN=function(r){lN(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype._next=function(e){},t}(hN.Subscriber)});var Av=l(yi=>{"use strict";var vN=yi&&yi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(yi,"__esModule",{value:!0});var bN=g();function yN(){return function(r){return r.lift(new mN)}}yi.isEmpty=yN;var mN=function(){function r(){}return r.prototype.call=function(t,e){return e.subscribe(new ON(t))},r}(),ON=function(r){vN(t,r);function t(e){return r.call(this,e)||this}return t.prototype.notifyComplete=function(e){var n=this.destination;n.next(e),n.complete()},t.prototype._next=function(e){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(bN.Subscriber)});var fu=l(mi=>{"use strict";var gN=mi&&mi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(mi,"__esModule",{value:!0});var SN=g(),EN=Ar(),wN=Ie();function TN(r){return function(e){return r===0?wN.empty():e.lift(new PN(r))}}mi.takeLast=TN;var PN=function(){function r(t){if(this.total=t,this.total<0)throw new EN.ArgumentOutOfRangeError}return r.prototype.call=function(t,e){return e.subscribe(new CN(t,this.total))},r}(),CN=function(r){gN(t,r);function t(e,n){var i=r.call(this,e)||this;return i.total=n,i.ring=new Array,i.count=0,i}return t.prototype._next=function(e){var n=this.ring,i=this.total,o=this.count++;if(n.length<i)n.push(e);else{var u=o%i;n[u]=e}},t.prototype._complete=function(){var e=this.destination,n=this.count;if(n>0)for(var i=this.count>=this.total?this.total:this.count,o=this.ring,u=0;u<i;u++){var s=n++%i;e.next(o[s])}e.complete()},t}(SN.Subscriber)});var jv=l(hf=>{"use strict";Object.defineProperty(hf,"__esModule",{value:!0});var IN=jr(),RN=qt(),AN=fu(),jN=li(),qN=Dr(),NN=ft();function xN(r,t){var e=arguments.length>=2;return function(n){return n.pipe(r?RN.filter(function(i,o){return r(i,o,n)}):NN.identity,AN.takeLast(1),e?qN.defaultIfEmpty(t):jN.throwIfEmpty(function(){return new IN.EmptyError}))}}hf.last=xN});var qv=l(Oi=>{"use strict";var DN=Oi&&Oi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Oi,"__esModule",{value:!0});var MN=g();function kN(r){return function(t){return t.lift(new UN(r))}}Oi.mapTo=kN;var UN=function(){function r(t){this.value=t}return r.prototype.call=function(t,e){return e.subscribe(new LN(t,this.value))},r}(),LN=function(r){DN(t,r);function t(e,n){var i=r.call(this,e)||this;return i.value=n,i}return t.prototype._next=function(e){this.destination.next(this.value)},t}(MN.Subscriber)});var Nv=l(gi=>{"use strict";var FN=gi&&gi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(gi,"__esModule",{value:!0});var BN=g(),pf=Rn();function VN(){return function(t){return t.lift(new WN)}}gi.materialize=VN;var WN=function(){function r(){}return r.prototype.call=function(t,e){return e.subscribe(new HN(t))},r}(),HN=function(r){FN(t,r);function t(e){return r.call(this,e)||this}return t.prototype._next=function(e){this.destination.next(pf.Notification.createNext(e))},t.prototype._error=function(e){var n=this.destination;n.next(pf.Notification.createError(e)),n.complete()},t.prototype._complete=function(){var e=this.destination;e.next(pf.Notification.createComplete()),e.complete()},t}(BN.Subscriber)});var lu=l(Si=>{"use strict";var zN=Si&&Si.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Si,"__esModule",{value:!0});var YN=g();function ZN(r,t){var e=!1;return arguments.length>=2&&(e=!0),function(i){return i.lift(new GN(r,t,e))}}Si.scan=ZN;var GN=function(){function r(t,e,n){n===void 0&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return r.prototype.call=function(t,e){return e.subscribe(new KN(t,this.accumulator,this.seed,this.hasSeed))},r}(),KN=function(r){zN(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u.accumulator=n,u._seed=i,u.hasSeed=o,u.index=0,u}return Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(!this.hasSeed)this.seed=e,this.destination.next(e);else return this._tryNext(e)},t.prototype._tryNext=function(e){var n=this.index++,i;try{i=this.accumulator(this.seed,e,n)}catch(o){this.destination.error(o)}this.seed=i,this.destination.next(i)},t}(YN.Subscriber)});var Ei=l(_f=>{"use strict";Object.defineProperty(_f,"__esModule",{value:!0});var xv=lu(),Dv=fu(),QN=Dr(),Mv=Wo();function XN(r,t){return arguments.length>=2?function(n){return Mv.pipe(xv.scan(r,t),Dv.takeLast(1),QN.defaultIfEmpty(t))(n)}:function(n){return Mv.pipe(xv.scan(function(i,o,u){return r(i,o,u+1)}),Dv.takeLast(1))(n)}}_f.reduce=XN});var kv=l(df=>{"use strict";Object.defineProperty(df,"__esModule",{value:!0});var JN=Ei();function $N(r){var t=typeof r=="function"?function(e,n){return r(e,n)>0?e:n}:function(e,n){return e>n?e:n};return JN.reduce(t)}df.max=$N});var Uv=l(vf=>{"use strict";Object.defineProperty(vf,"__esModule",{value:!0});var ex=Pc();function tx(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(e){return e.lift.call(ex.merge.apply(void 0,[e].concat(r)))}}vf.merge=tx});var Fv=l(bf=>{"use strict";Object.defineProperty(bf,"__esModule",{value:!0});var Lv=Wn();function rx(r,t,e){return e===void 0&&(e=Number.POSITIVE_INFINITY),typeof t=="function"?Lv.mergeMap(function(){return r},t,e):(typeof t=="number"&&(e=t),Lv.mergeMap(function(){return r},e))}bf.mergeMapTo=rx});var Wv=l(kt=>{"use strict";var nx=kt&&kt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(kt,"__esModule",{value:!0});var yf=k();function ix(r,t,e){return e===void 0&&(e=Number.POSITIVE_INFINITY),function(n){return n.lift(new Bv(r,t,e))}}kt.mergeScan=ix;var Bv=function(){function r(t,e,n){this.accumulator=t,this.seed=e,this.concurrent=n}return r.prototype.call=function(t,e){return e.subscribe(new Vv(t,this.accumulator,this.seed,this.concurrent))},r}();kt.MergeScanOperator=Bv;var Vv=function(r){nx(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u.accumulator=n,u.acc=i,u.concurrent=o,u.hasValue=!1,u.hasCompleted=!1,u.buffer=[],u.active=0,u.index=0,u}return t.prototype._next=function(e){if(this.active<this.concurrent){var n=this.index++,i=this.destination,o=void 0;try{var u=this.accumulator;o=u(this.acc,e,n)}catch(s){return i.error(s)}this.active++,this._innerSub(o)}else this.buffer.push(e)},t.prototype._innerSub=function(e){var n=new yf.SimpleInnerSubscriber(this),i=this.destination;i.add(n);var o=yf.innerSubscribe(e,n);o!==n&&i.add(o)},t.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},t.prototype.notifyNext=function(e){var n=this.destination;this.acc=e,this.hasValue=!0,n.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):this.active===0&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},t}(yf.SimpleOuterSubscriber);kt.MergeScanSubscriber=Vv});var Hv=l(mf=>{"use strict";Object.defineProperty(mf,"__esModule",{value:!0});var ox=Ei();function ux(r){var t=typeof r=="function"?function(e,n){return r(e,n)<0?e:n}:function(e,n){return e<n?e:n};return ox.reduce(t)}mf.min=ux});var Ut=l(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});var sx=Ea();function ax(r,t){return function(n){var i;if(typeof r=="function"?i=r:i=function(){return r},typeof t=="function")return n.lift(new zv(i,t));var o=Object.create(n,sx.connectableObservableDescriptor);return o.source=n,o.subjectFactory=i,o}}hu.multicast=ax;var zv=function(){function r(t,e){this.subjectFactory=t,this.selector=e}return r.prototype.call=function(t,e){var n=this.selector,i=this.subjectFactory(),o=n(i).subscribe(t);return o.add(e.subscribe(i)),o},r}();hu.MulticastOperator=zv});var Gv=l(kr=>{"use strict";var cx=kr&&kr.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(kr,"__esModule",{value:!0});var fx=Ae(),Yv=$(),Of=k();function lx(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return r.length===1&&Yv.isArray(r[0])&&(r=r[0]),function(e){return e.lift(new Zv(r))}}kr.onErrorResumeNext=lx;function hx(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=void 0;return r.length===1&&Yv.isArray(r[0])&&(r=r[0]),e=r.shift(),fx.from(e).lift(new Zv(r))}kr.onErrorResumeNextStatic=hx;var Zv=function(){function r(t){this.nextSources=t}return r.prototype.call=function(t,e){return e.subscribe(new px(t,this.nextSources))},r}(),px=function(r){cx(t,r);function t(e,n){var i=r.call(this,e)||this;return i.destination=e,i.nextSources=n,i}return t.prototype.notifyError=function(){this.subscribeToNextSource()},t.prototype.notifyComplete=function(){this.subscribeToNextSource()},t.prototype._error=function(e){this.subscribeToNextSource(),this.unsubscribe()},t.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},t.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();if(e){var n=new Of.SimpleInnerSubscriber(this),i=this.destination;i.add(n);var o=Of.innerSubscribe(e,n);o!==n&&i.add(o)}else this.destination.complete()},t}(Of.SimpleOuterSubscriber)});var Kv=l(wi=>{"use strict";var _x=wi&&wi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(wi,"__esModule",{value:!0});var dx=g();function vx(){return function(r){return r.lift(new bx)}}wi.pairwise=vx;var bx=function(){function r(){}return r.prototype.call=function(t,e){return e.subscribe(new yx(t))},r}(),yx=function(r){_x(t,r);function t(e){var n=r.call(this,e)||this;return n.hasPrev=!1,n}return t.prototype._next=function(e){var n;this.hasPrev?n=[this.prev,e]:this.hasPrev=!0,this.prev=e,n&&this.destination.next(n)},t}(dx.Subscriber)});var Xv=l(gf=>{"use strict";Object.defineProperty(gf,"__esModule",{value:!0});var mx=jc(),Qv=qt();function Ox(r,t){return function(e){return[Qv.filter(r,t)(e),Qv.filter(mx.not(r,t))(e)]}}gf.partition=Ox});var Jv=l(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});var gx=_e();function Sx(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r.length;if(e===0)throw new Error("list of properties cannot be empty.");return function(n){return gx.map(Ex(r,e))(n)}}Sf.pluck=Sx;function Ex(r,t){var e=function(n){for(var i=n,o=0;o<t;o++){var u=i?.[r[o]];if(u!==void 0)i=u;else return}return i};return e}});var tb=l(Ef=>{"use strict";Object.defineProperty(Ef,"__esModule",{value:!0});var $v=Q(),eb=Ut();function wx(r){return r?eb.multicast(function(){return new $v.Subject},r):eb.multicast(new $v.Subject)}Ef.publish=wx});var rb=l(wf=>{"use strict";Object.defineProperty(wf,"__esModule",{value:!0});var Tx=Pa(),Px=Ut();function Cx(r){return function(t){return Px.multicast(new Tx.BehaviorSubject(r))(t)}}wf.publishBehavior=Cx});var nb=l(Tf=>{"use strict";Object.defineProperty(Tf,"__esModule",{value:!0});var Ix=qn(),Rx=Ut();function Ax(){return function(r){return Rx.multicast(new Ix.AsyncSubject)(r)}}Tf.publishLast=Ax});var ib=l(Pf=>{"use strict";Object.defineProperty(Pf,"__esModule",{value:!0});var jx=Ko(),qx=Ut();function Nx(r,t,e,n){e&&typeof e!="function"&&(n=e);var i=typeof e=="function"?e:void 0,o=new jx.ReplaySubject(r,t,n);return function(u){return qx.multicast(function(){return o},i)(u)}}Pf.publishReplay=Nx});var ob=l(Cf=>{"use strict";Object.defineProperty(Cf,"__esModule",{value:!0});var xx=$(),Dx=Nc();function Mx(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(n){return r.length===1&&xx.isArray(r[0])&&(r=r[0]),n.lift.call(Dx.race.apply(void 0,[n].concat(r)))}}Cf.race=Mx});var sb=l(Ti=>{"use strict";var kx=Ti&&Ti.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ti,"__esModule",{value:!0});var Ux=g(),Lx=Ie();function Fx(r){return r===void 0&&(r=-1),function(t){return r===0?Lx.empty():r<0?t.lift(new ub(-1,t)):t.lift(new ub(r-1,t))}}Ti.repeat=Fx;var ub=function(){function r(t,e){this.count=t,this.source=e}return r.prototype.call=function(t,e){return e.subscribe(new Bx(t,this.count,this.source))},r}(),Bx=function(r){kx(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.count=n,o.source=i,o}return t.prototype.complete=function(){if(!this.isStopped){var e=this,n=e.source,i=e.count;if(i===0)return r.prototype.complete.call(this);i>-1&&(this.count=i-1),n.subscribe(this._unsubscribeAndRecycle())}},t}(Ux.Subscriber)});var ab=l(Pi=>{"use strict";var Vx=Pi&&Pi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Pi,"__esModule",{value:!0});var Wx=Q(),If=k();function Hx(r){return function(t){return t.lift(new zx(r))}}Pi.repeatWhen=Hx;var zx=function(){function r(t){this.notifier=t}return r.prototype.call=function(t,e){return e.subscribe(new Yx(t,this.notifier,e))},r}(),Yx=function(r){Vx(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.notifier=n,o.source=i,o.sourceIsBeingSubscribedTo=!0,o}return t.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},t.prototype.notifyComplete=function(){if(this.sourceIsBeingSubscribedTo===!1)return r.prototype.complete.call(this)},t.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return r.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},t.prototype._unsubscribe=function(){var e=this,n=e.notifications,i=e.retriesSubscription;n&&(n.unsubscribe(),this.notifications=void 0),i&&(i.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype._unsubscribeAndRecycle=function(){var e=this._unsubscribe;return this._unsubscribe=null,r.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=e,this},t.prototype.subscribeToRetries=function(){this.notifications=new Wx.Subject;var e;try{var n=this.notifier;e=n(this.notifications)}catch{return r.prototype.complete.call(this)}this.retries=e,this.retriesSubscription=If.innerSubscribe(e,new If.SimpleInnerSubscriber(this))},t}(If.SimpleOuterSubscriber)});var cb=l(Ci=>{"use strict";var Zx=Ci&&Ci.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ci,"__esModule",{value:!0});var Gx=g();function Kx(r){return r===void 0&&(r=-1),function(t){return t.lift(new Qx(r,t))}}Ci.retry=Kx;var Qx=function(){function r(t,e){this.count=t,this.source=e}return r.prototype.call=function(t,e){return e.subscribe(new Xx(t,this.count,this.source))},r}(),Xx=function(r){Zx(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.count=n,o.source=i,o}return t.prototype.error=function(e){if(!this.isStopped){var n=this,i=n.source,o=n.count;if(o===0)return r.prototype.error.call(this,e);o>-1&&(this.count=o-1),i.subscribe(this._unsubscribeAndRecycle())}},t}(Gx.Subscriber)});var fb=l(Ii=>{"use strict";var Jx=Ii&&Ii.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ii,"__esModule",{value:!0});var $x=Q(),Rf=k();function eD(r){return function(t){return t.lift(new tD(r,t))}}Ii.retryWhen=eD;var tD=function(){function r(t,e){this.notifier=t,this.source=e}return r.prototype.call=function(t,e){return e.subscribe(new rD(t,this.notifier,this.source))},r}(),rD=function(r){Jx(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.notifier=n,o.source=i,o}return t.prototype.error=function(e){if(!this.isStopped){var n=this.errors,i=this.retries,o=this.retriesSubscription;if(i)this.errors=void 0,this.retriesSubscription=void 0;else{n=new $x.Subject;try{var u=this.notifier;i=u(n)}catch(s){return r.prototype.error.call(this,s)}o=Rf.innerSubscribe(i,new Rf.SimpleInnerSubscriber(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=i,this.retriesSubscription=o,n.next(e)}},t.prototype._unsubscribe=function(){var e=this,n=e.errors,i=e.retriesSubscription;n&&(n.unsubscribe(),this.errors=void 0),i&&(i.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype.notifyNext=function(){var e=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)},t}(Rf.SimpleOuterSubscriber)});var lb=l(Ri=>{"use strict";var nD=Ri&&Ri.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ri,"__esModule",{value:!0});var Af=k();function iD(r){return function(t){return t.lift(new oD(r))}}Ri.sample=iD;var oD=function(){function r(t){this.notifier=t}return r.prototype.call=function(t,e){var n=new uD(t),i=e.subscribe(n);return i.add(Af.innerSubscribe(this.notifier,new Af.SimpleInnerSubscriber(n))),i},r}(),uD=function(r){nD(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.hasValue=!1,e}return t.prototype._next=function(e){this.value=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},t}(Af.SimpleOuterSubscriber)});var hb=l(Ai=>{"use strict";var sD=Ai&&Ai.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ai,"__esModule",{value:!0});var aD=g(),cD=ee();function fD(r,t){return t===void 0&&(t=cD.async),function(e){return e.lift(new lD(r,t))}}Ai.sampleTime=fD;var lD=function(){function r(t,e){this.period=t,this.scheduler=e}return r.prototype.call=function(t,e){return e.subscribe(new hD(t,this.period,this.scheduler))},r}(),hD=function(r){sD(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.period=n,o.scheduler=i,o.hasValue=!1,o.add(i.schedule(pD,n,{subscriber:o,period:n})),o}return t.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(aD.Subscriber);function pD(r){var t=r.subscriber,e=r.period;t.notifyNext(),this.schedule(r,e)}});var bb=l(Lt=>{"use strict";var pb=Lt&&Lt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Lt,"__esModule",{value:!0});var _b=g();function _D(r,t){return function(e){return e.lift(new db(r,t))}}Lt.sequenceEqual=_D;var db=function(){function r(t,e){this.compareTo=t,this.comparator=e}return r.prototype.call=function(t,e){return e.subscribe(new vb(t,this.compareTo,this.comparator))},r}();Lt.SequenceEqualOperator=db;var vb=function(r){pb(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.compareTo=n,o.comparator=i,o._a=[],o._b=[],o._oneComplete=!1,o.destination.add(n.subscribe(new dD(e,o))),o}return t.prototype._next=function(e){this._oneComplete&&this._b.length===0?this.emit(!1):(this._a.push(e),this.checkValues())},t.prototype._complete=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0,this.unsubscribe()},t.prototype.checkValues=function(){for(var e=this,n=e._a,i=e._b,o=e.comparator;n.length>0&&i.length>0;){var u=n.shift(),s=i.shift(),c=!1;try{c=o?o(u,s):u===s}catch(a){this.destination.error(a)}c||this.emit(!1)}},t.prototype.emit=function(e){var n=this.destination;n.next(e),n.complete()},t.prototype.nextB=function(e){this._oneComplete&&this._a.length===0?this.emit(!1):(this._b.push(e),this.checkValues())},t.prototype.completeB=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0},t}(_b.Subscriber);Lt.SequenceEqualSubscriber=vb;var dD=function(r){pb(t,r);function t(e,n){var i=r.call(this,e)||this;return i.parent=n,i}return t.prototype._next=function(e){this.parent.nextB(e)},t.prototype._error=function(e){this.parent.error(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},t}(_b.Subscriber)});var yb=l(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});var vD=Ut(),bD=zo(),yD=Q();function mD(){return new yD.Subject}function OD(){return function(r){return bD.refCount()(vD.multicast(mD)(r))}}jf.share=OD});var mb=l(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});var gD=Ko();function SD(r,t,e){var n;return r&&typeof r=="object"?n=r:n={bufferSize:r,windowTime:t,refCount:!1,scheduler:e},function(i){return i.lift(ED(n))}}qf.shareReplay=SD;function ED(r){var t=r.bufferSize,e=t===void 0?Number.POSITIVE_INFINITY:t,n=r.windowTime,i=n===void 0?Number.POSITIVE_INFINITY:n,o=r.refCount,u=r.scheduler,s,c=0,a,f=!1,h=!1;return function(y){c++;var O;!s||f?(f=!1,s=new gD.ReplaySubject(e,i,u),O=s.subscribe(this),a=y.subscribe({next:function(w){s.next(w)},error:function(w){f=!0,s.error(w)},complete:function(){h=!0,a=void 0,s.complete()}}),h&&(a=void 0)):O=s.subscribe(this),this.add(function(){c--,O.unsubscribe(),O=void 0,a&&!h&&o&&c===0&&(a.unsubscribe(),a=void 0,s=void 0)})}}});var Ob=l(ji=>{"use strict";var wD=ji&&ji.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ji,"__esModule",{value:!0});var TD=g(),PD=jr();function CD(r){return function(t){return t.lift(new ID(r,t))}}ji.single=CD;var ID=function(){function r(t,e){this.predicate=t,this.source=e}return r.prototype.call=function(t,e){return e.subscribe(new RD(t,this.predicate,this.source))},r}(),RD=function(r){wD(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.predicate=n,o.source=i,o.seenValue=!1,o.index=0,o}return t.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},t.prototype._next=function(e){var n=this.index++;this.predicate?this.tryNext(e,n):this.applySingleValue(e)},t.prototype.tryNext=function(e,n){try{this.predicate(e,n,this.source)&&this.applySingleValue(e)}catch(i){this.destination.error(i)}},t.prototype._complete=function(){var e=this.destination;this.index>0?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new PD.EmptyError)},t}(TD.Subscriber)});var gb=l(qi=>{"use strict";var AD=qi&&qi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(qi,"__esModule",{value:!0});var jD=g();function qD(r){return function(t){return t.lift(new ND(r))}}qi.skip=qD;var ND=function(){function r(t){this.total=t}return r.prototype.call=function(t,e){return e.subscribe(new xD(t,this.total))},r}(),xD=function(r){AD(t,r);function t(e,n){var i=r.call(this,e)||this;return i.total=n,i.count=0,i}return t.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},t}(jD.Subscriber)});var Eb=l(Ni=>{"use strict";var DD=Ni&&Ni.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ni,"__esModule",{value:!0});var Sb=g(),MD=Ar();function kD(r){return function(t){return t.lift(new UD(r))}}Ni.skipLast=kD;var UD=function(){function r(t){if(this._skipCount=t,this._skipCount<0)throw new MD.ArgumentOutOfRangeError}return r.prototype.call=function(t,e){return this._skipCount===0?e.subscribe(new Sb.Subscriber(t)):e.subscribe(new LD(t,this._skipCount))},r}(),LD=function(r){DD(t,r);function t(e,n){var i=r.call(this,e)||this;return i._skipCount=n,i._count=0,i._ring=new Array(n),i}return t.prototype._next=function(e){var n=this._skipCount,i=this._count++;if(i<n)this._ring[i]=e;else{var o=i%n,u=this._ring,s=u[o];u[o]=e,this.destination.next(s)}},t}(Sb.Subscriber)});var wb=l(xi=>{"use strict";var FD=xi&&xi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(xi,"__esModule",{value:!0});var Nf=k();function BD(r){return function(t){return t.lift(new VD(r))}}xi.skipUntil=BD;var VD=function(){function r(t){this.notifier=t}return r.prototype.call=function(t,e){return e.subscribe(new WD(t,this.notifier))},r}(),WD=function(r){FD(t,r);function t(e,n){var i=r.call(this,e)||this;i.hasValue=!1;var o=new Nf.SimpleInnerSubscriber(i);i.add(o),i.innerSubscription=o;var u=Nf.innerSubscribe(n,o);return u!==o&&(i.add(u),i.innerSubscription=u),i}return t.prototype._next=function(e){this.hasValue&&r.prototype._next.call(this,e)},t.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},t.prototype.notifyComplete=function(){},t}(Nf.SimpleOuterSubscriber)});var Tb=l(Di=>{"use strict";var HD=Di&&Di.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Di,"__esModule",{value:!0});var zD=g();function YD(r){return function(t){return t.lift(new ZD(r))}}Di.skipWhile=YD;var ZD=function(){function r(t){this.predicate=t}return r.prototype.call=function(t,e){return e.subscribe(new GD(t,this.predicate))},r}(),GD=function(r){HD(t,r);function t(e,n){var i=r.call(this,e)||this;return i.predicate=n,i.skipping=!0,i.index=0,i}return t.prototype._next=function(e){var n=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||n.next(e)},t.prototype.tryCallPredicate=function(e){try{var n=this.predicate(e,this.index++);this.skipping=Boolean(n)}catch(i){this.destination.error(i)}},t}(zD.Subscriber)});var Cb=l(xf=>{"use strict";Object.defineProperty(xf,"__esModule",{value:!0});var Pb=Hn(),KD=Re();function QD(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r[r.length-1];return KD.isScheduler(e)?(r.pop(),function(n){return Pb.concat(r,n,e)}):function(n){return Pb.concat(r,n)}}xf.startWith=QD});var Ib=l(Mi=>{"use strict";var XD=Mi&&Mi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Mi,"__esModule",{value:!0});var JD=I(),Df=La(),$D=zn(),eM=function(r){XD(t,r);function t(e,n,i){n===void 0&&(n=0),i===void 0&&(i=Df.asap);var o=r.call(this)||this;return o.source=e,o.delayTime=n,o.scheduler=i,(!$D.isNumeric(n)||n<0)&&(o.delayTime=0),(!i||typeof i.schedule!="function")&&(o.scheduler=Df.asap),o}return t.create=function(e,n,i){return n===void 0&&(n=0),i===void 0&&(i=Df.asap),new t(e,n,i)},t.dispatch=function(e){var n=e.source,i=e.subscriber;return this.add(n.subscribe(i))},t.prototype._subscribe=function(e){var n=this.delayTime,i=this.source,o=this.scheduler;return o.schedule(t.dispatch,n,{source:i,subscriber:e})},t}(JD.Observable);Mi.SubscribeOnObservable=eM});var Rb=l(Mf=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});var tM=Ib();function rM(r,t){return t===void 0&&(t=0),function(n){return n.lift(new nM(r,t))}}Mf.subscribeOn=rM;var nM=function(){function r(t,e){this.scheduler=t,this.delay=e}return r.prototype.call=function(t,e){return new tM.SubscribeOnObservable(e,this.delay,this.scheduler).subscribe(t)},r}()});var pu=l(ki=>{"use strict";var iM=ki&&ki.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ki,"__esModule",{value:!0});var oM=_e(),uM=Ae(),kf=k();function Ab(r,t){return typeof t=="function"?function(e){return e.pipe(Ab(function(n,i){return uM.from(r(n,i)).pipe(oM.map(function(o,u){return t(n,o,i,u)}))}))}:function(e){return e.lift(new sM(r))}}ki.switchMap=Ab;var sM=function(){function r(t){this.project=t}return r.prototype.call=function(t,e){return e.subscribe(new aM(t,this.project))},r}(),aM=function(r){iM(t,r);function t(e,n){var i=r.call(this,e)||this;return i.project=n,i.index=0,i}return t.prototype._next=function(e){var n,i=this.index++;try{n=this.project(e,i)}catch(o){this.destination.error(o);return}this._innerSub(n)},t.prototype._innerSub=function(e){var n=this.innerSubscription;n&&n.unsubscribe();var i=new kf.SimpleInnerSubscriber(this),o=this.destination;o.add(i),this.innerSubscription=kf.innerSubscribe(e,i),this.innerSubscription!==i&&o.add(this.innerSubscription)},t.prototype._complete=function(){var e=this.innerSubscription;(!e||e.closed)&&r.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&r.prototype._complete.call(this)},t.prototype.notifyNext=function(e){this.destination.next(e)},t}(kf.SimpleOuterSubscriber)});var jb=l(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});var cM=pu(),fM=ft();function lM(){return cM.switchMap(fM.identity)}Uf.switchAll=lM});var Nb=l(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});var qb=pu();function hM(r,t){return t?qb.switchMap(function(){return r},t):qb.switchMap(function(){return r})}Lf.switchMapTo=hM});var xb=l(Ui=>{"use strict";var pM=Ui&&Ui.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ui,"__esModule",{value:!0});var Ff=k();function _M(r){return function(t){return t.lift(new dM(r))}}Ui.takeUntil=_M;var dM=function(){function r(t){this.notifier=t}return r.prototype.call=function(t,e){var n=new vM(t),i=Ff.innerSubscribe(this.notifier,new Ff.SimpleInnerSubscriber(n));return i&&!n.seenValue?(n.add(i),e.subscribe(n)):n},r}(),vM=function(r){pM(t,r);function t(e){var n=r.call(this,e)||this;return n.seenValue=!1,n}return t.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(Ff.SimpleOuterSubscriber)});var Db=l(Li=>{"use strict";var bM=Li&&Li.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Li,"__esModule",{value:!0});var yM=g();function mM(r,t){return t===void 0&&(t=!1),function(e){return e.lift(new OM(r,t))}}Li.takeWhile=mM;var OM=function(){function r(t,e){this.predicate=t,this.inclusive=e}return r.prototype.call=function(t,e){return e.subscribe(new gM(t,this.predicate,this.inclusive))},r}(),gM=function(r){bM(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.predicate=n,o.inclusive=i,o.index=0,o}return t.prototype._next=function(e){var n=this.destination,i;try{i=this.predicate(e,this.index++)}catch(o){n.error(o);return}this.nextOrComplete(e,i)},t.prototype.nextOrComplete=function(e,n){var i=this.destination;Boolean(n)?i.next(e):(this.inclusive&&i.next(e),i.complete())},t}(yM.Subscriber)});var Mb=l(Fi=>{"use strict";var SM=Fi&&Fi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Fi,"__esModule",{value:!0});var EM=g(),dt=Jo(),wM=gr();function TM(r,t,e){return function(i){return i.lift(new PM(r,t,e))}}Fi.tap=TM;var PM=function(){function r(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return r.prototype.call=function(t,e){return e.subscribe(new CM(t,this.nextOrObserver,this.error,this.complete))},r}(),CM=function(r){SM(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u._tapNext=dt.noop,u._tapError=dt.noop,u._tapComplete=dt.noop,u._tapError=i||dt.noop,u._tapComplete=o||dt.noop,wM.isFunction(n)?(u._context=u,u._tapNext=n):n&&(u._context=n,u._tapNext=n.next||dt.noop,u._tapError=n.error||dt.noop,u._tapComplete=n.complete||dt.noop),u}return t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(n){this.destination.error(n);return}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(n){this.destination.error(n);return}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){this.destination.error(e);return}return this.destination.complete()},t}(EM.Subscriber)});var Vf=l(Ft=>{"use strict";var IM=Ft&&Ft.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ft,"__esModule",{value:!0});var Bf=k();Ft.defaultThrottleConfig={leading:!0,trailing:!1};function RM(r,t){return t===void 0&&(t=Ft.defaultThrottleConfig),function(e){return e.lift(new AM(r,!!t.leading,!!t.trailing))}}Ft.throttle=RM;var AM=function(){function r(t,e,n){this.durationSelector=t,this.leading=e,this.trailing=n}return r.prototype.call=function(t,e){return e.subscribe(new jM(t,this.durationSelector,this.leading,this.trailing))},r}(),jM=function(r){IM(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u.destination=e,u.durationSelector=n,u._leading=i,u._trailing=o,u._hasValue=!1,u}return t.prototype._next=function(e){this._hasValue=!0,this._sendValue=e,this._throttled||(this._leading?this.send():this.throttle(e))},t.prototype.send=function(){var e=this,n=e._hasValue,i=e._sendValue;n&&(this.destination.next(i),this.throttle(i)),this._hasValue=!1,this._sendValue=void 0},t.prototype.throttle=function(e){var n=this.tryDurationSelector(e);n&&this.add(this._throttled=Bf.innerSubscribe(n,new Bf.SimpleInnerSubscriber(this)))},t.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(n){return this.destination.error(n),null}},t.prototype.throttlingDone=function(){var e=this,n=e._throttled,i=e._trailing;n&&n.unsubscribe(),this._throttled=void 0,i&&this.send()},t.prototype.notifyNext=function(){this.throttlingDone()},t.prototype.notifyComplete=function(){this.throttlingDone()},t}(Bf.SimpleOuterSubscriber)});var kb=l(Bi=>{"use strict";var qM=Bi&&Bi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Bi,"__esModule",{value:!0});var NM=g(),xM=ee(),DM=Vf();function MM(r,t,e){return t===void 0&&(t=xM.async),e===void 0&&(e=DM.defaultThrottleConfig),function(n){return n.lift(new kM(r,t,e.leading,e.trailing))}}Bi.throttleTime=MM;var kM=function(){function r(t,e,n,i){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=i}return r.prototype.call=function(t,e){return e.subscribe(new UM(t,this.duration,this.scheduler,this.leading,this.trailing))},r}(),UM=function(r){qM(t,r);function t(e,n,i,o,u){var s=r.call(this,e)||this;return s.duration=n,s.scheduler=i,s.leading=o,s.trailing=u,s._hasTrailingValue=!1,s._trailingValue=null,s}return t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(LM,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(NM.Subscriber);function LM(r){var t=r.subscriber;t.clearThrottle()}});var Lb=l(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});var FM=ee(),BM=lu(),VM=nu(),WM=_e();function HM(r){return r===void 0&&(r=FM.async),function(t){return VM.defer(function(){return t.pipe(BM.scan(function(e,n){var i=e.current;return{value:n,current:r.now(),last:i}},{current:r.now(),value:void 0,last:void 0}),WM.map(function(e){var n=e.current,i=e.last,o=e.value;return new Ub(o,n-i)}))})}}_u.timeInterval=HM;var Ub=function(){function r(t,e){this.value=t,this.interval=e}return r}();_u.TimeInterval=Ub});var Hf=l(Vi=>{"use strict";var zM=Vi&&Vi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Vi,"__esModule",{value:!0});var YM=ee(),ZM=Jc(),Wf=k();function GM(r,t,e){return e===void 0&&(e=YM.async),function(n){var i=ZM.isDate(r),o=i?+r-e.now():Math.abs(r);return n.lift(new KM(o,i,t,e))}}Vi.timeoutWith=GM;var KM=function(){function r(t,e,n,i){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=i}return r.prototype.call=function(t,e){return e.subscribe(new QM(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},r}(),QM=function(r){zM(t,r);function t(e,n,i,o,u){var s=r.call(this,e)||this;return s.absoluteTimeout=n,s.waitFor=i,s.withObservable=o,s.scheduler=u,s.scheduleTimeout(),s}return t.dispatchTimeout=function(e){var n=e.withObservable;e._unsubscribeAndRecycle(),e.add(Wf.innerSubscribe(n,new Wf.SimpleInnerSubscriber(e)))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),r.prototype._next.call(this,e)},t.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},t}(Wf.SimpleOuterSubscriber)});var Fb=l(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});var XM=ee(),JM=za(),$M=Hf(),ek=Go();function tk(r,t){return t===void 0&&(t=XM.async),$M.timeoutWith(r,ek.throwError(new JM.TimeoutError),t)}zf.timeout=tk});var Vb=l(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});var rk=ee(),nk=_e();function ik(r){return r===void 0&&(r=rk.async),nk.map(function(t){return new Bb(t,r.now())})}du.timestamp=ik;var Bb=function(){function r(t,e){this.value=t,this.timestamp=e}return r}();du.Timestamp=Bb});var Wb=l(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});var ok=Ei();function uk(r,t,e){return e===0?[t]:(r.push(t),r)}function sk(){return ok.reduce(uk,[])}Yf.toArray=sk});var zb=l(Wi=>{"use strict";var ak=Wi&&Wi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Wi,"__esModule",{value:!0});var Hb=Q(),Zf=k();function ck(r){return function(e){return e.lift(new fk(r))}}Wi.window=ck;var fk=function(){function r(t){this.windowBoundaries=t}return r.prototype.call=function(t,e){var n=new lk(t),i=e.subscribe(n);return i.closed||n.add(Zf.innerSubscribe(this.windowBoundaries,new Zf.SimpleInnerSubscriber(n))),i},r}(),lk=function(r){ak(t,r);function t(e){var n=r.call(this,e)||this;return n.window=new Hb.Subject,e.next(n.window),n}return t.prototype.notifyNext=function(){this.openWindow()},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(){this._complete()},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var e=this.window;e&&e.complete();var n=this.destination,i=this.window=new Hb.Subject;n.next(i)},t}(Zf.SimpleOuterSubscriber)});var Zb=l(Hi=>{"use strict";var hk=Hi&&Hi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Hi,"__esModule",{value:!0});var pk=g(),Yb=Q();function _k(r,t){return t===void 0&&(t=0),function(n){return n.lift(new dk(r,t))}}Hi.windowCount=_k;var dk=function(){function r(t,e){this.windowSize=t,this.startWindowEvery=e}return r.prototype.call=function(t,e){return e.subscribe(new vk(t,this.windowSize,this.startWindowEvery))},r}(),vk=function(r){hk(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.destination=e,o.windowSize=n,o.startWindowEvery=i,o.windows=[new Yb.Subject],o.count=0,e.next(o.windows[0]),o}return t.prototype._next=function(e){for(var n=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,i=this.destination,o=this.windowSize,u=this.windows,s=u.length,c=0;c<s&&!this.closed;c++)u[c].next(e);var a=this.count-o+1;if(a>=0&&a%n===0&&!this.closed&&u.shift().complete(),++this.count%n===0&&!this.closed){var f=new Yb.Subject;u.push(f),i.next(f)}},t.prototype._error=function(e){var n=this.windows;if(n)for(;n.length>0&&!this.closed;)n.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(pk.Subscriber)});var Xb=l(zi=>{"use strict";var Kb=zi&&zi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(zi,"__esModule",{value:!0});var bk=Q(),yk=ee(),mk=g(),Gb=zn(),Gf=Re();function Ok(r){var t=yk.async,e=null,n=Number.POSITIVE_INFINITY;return Gf.isScheduler(arguments[3])&&(t=arguments[3]),Gf.isScheduler(arguments[2])?t=arguments[2]:Gb.isNumeric(arguments[2])&&(n=Number(arguments[2])),Gf.isScheduler(arguments[1])?t=arguments[1]:Gb.isNumeric(arguments[1])&&(e=Number(arguments[1])),function(o){return o.lift(new gk(r,e,n,t))}}zi.windowTime=Ok;var gk=function(){function r(t,e,n,i){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=n,this.scheduler=i}return r.prototype.call=function(t,e){return e.subscribe(new Ek(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},r}(),Sk=function(r){Kb(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e._numberOfNextedValues=0,e}return t.prototype.next=function(e){this._numberOfNextedValues++,r.prototype.next.call(this,e)},Object.defineProperty(t.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),t}(bk.Subject),Ek=function(r){Kb(t,r);function t(e,n,i,o,u){var s=r.call(this,e)||this;s.destination=e,s.windowTimeSpan=n,s.windowCreationInterval=i,s.maxWindowSize=o,s.scheduler=u,s.windows=[];var c=s.openWindow();if(i!==null&&i>=0){var a={subscriber:s,window:c,context:null},f={windowTimeSpan:n,windowCreationInterval:i,subscriber:s,scheduler:u};s.add(u.schedule(Qb,n,a)),s.add(u.schedule(Tk,i,f))}else{var h={subscriber:s,window:c,windowTimeSpan:n};s.add(u.schedule(wk,n,h))}return s}return t.prototype._next=function(e){for(var n=this.windows,i=n.length,o=0;o<i;o++){var u=n[o];u.closed||(u.next(e),u.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(u))}},t.prototype._error=function(e){for(var n=this.windows;n.length>0;)n.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){for(var e=this.windows;e.length>0;){var n=e.shift();n.closed||n.complete()}this.destination.complete()},t.prototype.openWindow=function(){var e=new Sk;this.windows.push(e);var n=this.destination;return n.next(e),e},t.prototype.closeWindow=function(e){e.complete();var n=this.windows;n.splice(n.indexOf(e),1)},t}(mk.Subscriber);function wk(r){var t=r.subscriber,e=r.windowTimeSpan,n=r.window;n&&t.closeWindow(n),r.window=t.openWindow(),this.schedule(r,e)}function Tk(r){var t=r.windowTimeSpan,e=r.subscriber,n=r.scheduler,i=r.windowCreationInterval,o=e.openWindow(),u=this,s={action:u,subscription:null},c={subscriber:e,window:o,context:s};s.subscription=n.schedule(Qb,t,c),u.add(s.subscription),u.schedule(r,i)}function Qb(r){var t=r.subscriber,e=r.window,n=r.context;n&&n.action&&n.subscription&&n.action.remove(n.subscription),t.closeWindow(e)}});var $b=l(Yi=>{"use strict";var Pk=Yi&&Yi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Yi,"__esModule",{value:!0});var Ck=Q(),Ik=Y(),Rk=ht(),Jb=pt();function Ak(r,t){return function(e){return e.lift(new jk(r,t))}}Yi.windowToggle=Ak;var jk=function(){function r(t,e){this.openings=t,this.closingSelector=e}return r.prototype.call=function(t,e){return e.subscribe(new qk(t,this.openings,this.closingSelector))},r}(),qk=function(r){Pk(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.openings=n,o.closingSelector=i,o.contexts=[],o.add(o.openSubscription=Jb.subscribeToResult(o,n,n)),o}return t.prototype._next=function(e){var n=this.contexts;if(n)for(var i=n.length,o=0;o<i;o++)n[o].window.next(e)},t.prototype._error=function(e){var n=this.contexts;if(this.contexts=null,n)for(var i=n.length,o=-1;++o<i;){var u=n[o];u.window.error(e),u.subscription.unsubscribe()}r.prototype._error.call(this,e)},t.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,i=-1;++i<n;){var o=e[i];o.window.complete(),o.subscription.unsubscribe()}r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,i=-1;++i<n;){var o=e[i];o.window.unsubscribe(),o.subscription.unsubscribe()}},t.prototype.notifyNext=function(e,n,i,o,u){if(e===this.openings){var s=void 0;try{var c=this.closingSelector;s=c(n)}catch(y){return this.error(y)}var a=new Ck.Subject,f=new Ik.Subscription,h={window:a,subscription:f};this.contexts.push(h);var p=Jb.subscribeToResult(this,s,h);p.closed?this.closeWindow(this.contexts.length-1):(p.context=h,f.add(p)),this.destination.next(a)}else this.closeWindow(this.contexts.indexOf(e))},t.prototype.notifyError=function(e){this.error(e)},t.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},t.prototype.closeWindow=function(e){if(e!==-1){var n=this.contexts,i=n[e],o=i.window,u=i.subscription;n.splice(e,1),o.complete(),u.unsubscribe()}},t}(Rk.OuterSubscriber)});var ey=l(Zi=>{"use strict";var Nk=Zi&&Zi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Zi,"__esModule",{value:!0});var xk=Q(),Dk=ht(),Mk=pt();function kk(r){return function(e){return e.lift(new Uk(r))}}Zi.windowWhen=kk;var Uk=function(){function r(t){this.closingSelector=t}return r.prototype.call=function(t,e){return e.subscribe(new Lk(t,this.closingSelector))},r}(),Lk=function(r){Nk(t,r);function t(e,n){var i=r.call(this,e)||this;return i.destination=e,i.closingSelector=n,i.openWindow(),i}return t.prototype.notifyNext=function(e,n,i,o,u){this.openWindow(u)},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(e){this.openWindow(e)},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(e){e===void 0&&(e=null),e&&(this.remove(e),e.unsubscribe());var n=this.window;n&&n.complete();var i=this.window=new xk.Subject;this.destination.next(i);var o;try{var u=this.closingSelector;o=u()}catch(s){this.destination.error(s),this.window.error(s);return}this.add(this.closingNotification=Mk.subscribeToResult(this,o))},t}(Dk.OuterSubscriber)});var ty=l(Gi=>{"use strict";var Fk=Gi&&Gi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Gi,"__esModule",{value:!0});var Bk=ht(),Vk=pt();function Wk(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(e){var n;typeof r[r.length-1]=="function"&&(n=r.pop());var i=r;return e.lift(new Hk(i,n))}}Gi.withLatestFrom=Wk;var Hk=function(){function r(t,e){this.observables=t,this.project=e}return r.prototype.call=function(t,e){return e.subscribe(new zk(t,this.observables,this.project))},r}(),zk=function(r){Fk(t,r);function t(e,n,i){var o=r.call(this,e)||this;o.observables=n,o.project=i,o.toRespond=[];var u=n.length;o.values=new Array(u);for(var s=0;s<u;s++)o.toRespond.push(s);for(var s=0;s<u;s++){var c=n[s];o.add(Vk.subscribeToResult(o,c,void 0,s))}return o}return t.prototype.notifyNext=function(e,n,i){this.values[i]=n;var o=this.toRespond;if(o.length>0){var u=o.indexOf(i);u!==-1&&o.splice(u,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(this.toRespond.length===0){var n=[e].concat(this.values);this.project?this._tryProject(n):this.destination.next(n)}},t.prototype._tryProject=function(e){var n;try{n=this.project.apply(this,e)}catch(i){this.destination.error(i);return}this.destination.next(n)},t}(Bk.OuterSubscriber)});var ry=l(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});var Yk=au();function Zk(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(n){return n.lift.call(Yk.zip.apply(void 0,[n].concat(r)))}}Kf.zip=Zk});var ny=l(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});var Gk=au();function Kk(r){return function(t){return t.lift(new Gk.ZipOperator(r))}}Qf.zipAll=Kk});var vu=l(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});var Qk=Lc();v.audit=Qk.audit;var Xk=Bd();v.auditTime=Xk.auditTime;var Jk=Vd();v.buffer=Jk.buffer;var $k=zd();v.bufferCount=$k.bufferCount;var eU=Gd();v.bufferTime=eU.bufferTime;var tU=Qd();v.bufferToggle=tU.bufferToggle;var rU=Xd();v.bufferWhen=rU.bufferWhen;var nU=Jd();v.catchError=nU.catchError;var iU=$d();v.combineAll=iU.combineAll;var oU=ev();v.combineLatest=oU.combineLatest;var uU=tv();v.concat=uU.concat;var sU=dc();v.concatAll=sU.concatAll;var aU=Gc();v.concatMap=aU.concatMap;var cU=rv();v.concatMapTo=cU.concatMapTo;var fU=nv();v.count=fU.count;var lU=iv();v.debounce=lU.debounce;var hU=ov();v.debounceTime=hU.debounceTime;var pU=Dr();v.defaultIfEmpty=pU.defaultIfEmpty;var _U=sv();v.delay=_U.delay;var dU=cv();v.delayWhen=dU.delayWhen;var vU=fv();v.dematerialize=vU.dematerialize;var bU=hv();v.distinct=bU.distinct;var yU=tf();v.distinctUntilChanged=yU.distinctUntilChanged;var mU=pv();v.distinctUntilKeyChanged=mU.distinctUntilKeyChanged;var OU=dv();v.elementAt=OU.elementAt;var gU=vv();v.endWith=gU.endWith;var SU=bv();v.every=SU.every;var EU=yv();v.exhaust=EU.exhaust;var wU=Ov();v.exhaustMap=wU.exhaustMap;var TU=Ev();v.expand=TU.expand;var PU=qt();v.filter=PU.filter;var CU=wv();v.finalize=CU.finalize;var IU=cf();v.find=IU.find;var RU=Cv();v.findIndex=RU.findIndex;var AU=Iv();v.first=AU.first;var jU=Ta();v.groupBy=jU.groupBy;var qU=Rv();v.ignoreElements=qU.ignoreElements;var NU=Av();v.isEmpty=NU.isEmpty;var xU=jv();v.last=xU.last;var DU=_e();v.map=DU.map;var MU=qv();v.mapTo=MU.mapTo;var kU=Nv();v.materialize=kU.materialize;var UU=kv();v.max=UU.max;var LU=Uv();v.merge=LU.merge;var FU=ru();v.mergeAll=FU.mergeAll;var iy=Wn();v.mergeMap=iy.mergeMap;v.flatMap=iy.flatMap;var BU=Fv();v.mergeMapTo=BU.mergeMapTo;var VU=Wv();v.mergeScan=VU.mergeScan;var WU=Hv();v.min=WU.min;var HU=Ut();v.multicast=HU.multicast;var zU=Ua();v.observeOn=zU.observeOn;var YU=Gv();v.onErrorResumeNext=YU.onErrorResumeNext;var ZU=Kv();v.pairwise=ZU.pairwise;var GU=Xv();v.partition=GU.partition;var KU=Jv();v.pluck=KU.pluck;var QU=tb();v.publish=QU.publish;var XU=rb();v.publishBehavior=XU.publishBehavior;var JU=nb();v.publishLast=JU.publishLast;var $U=ib();v.publishReplay=$U.publishReplay;var eL=ob();v.race=eL.race;var tL=Ei();v.reduce=tL.reduce;var rL=sb();v.repeat=rL.repeat;var nL=ab();v.repeatWhen=nL.repeatWhen;var iL=cb();v.retry=iL.retry;var oL=fb();v.retryWhen=oL.retryWhen;var uL=zo();v.refCount=uL.refCount;var sL=lb();v.sample=sL.sample;var aL=hb();v.sampleTime=aL.sampleTime;var cL=lu();v.scan=cL.scan;var fL=bb();v.sequenceEqual=fL.sequenceEqual;var lL=yb();v.share=lL.share;var hL=mb();v.shareReplay=hL.shareReplay;var pL=Ob();v.single=pL.single;var _L=gb();v.skip=_L.skip;var dL=Eb();v.skipLast=dL.skipLast;var vL=wb();v.skipUntil=vL.skipUntil;var bL=Tb();v.skipWhile=bL.skipWhile;var yL=Cb();v.startWith=yL.startWith;var mL=Rb();v.subscribeOn=mL.subscribeOn;var OL=jb();v.switchAll=OL.switchAll;var gL=pu();v.switchMap=gL.switchMap;var SL=Nb();v.switchMapTo=SL.switchMapTo;var EL=cu();v.take=EL.take;var wL=fu();v.takeLast=wL.takeLast;var TL=xb();v.takeUntil=TL.takeUntil;var PL=Db();v.takeWhile=PL.takeWhile;var CL=Mb();v.tap=CL.tap;var IL=Vf();v.throttle=IL.throttle;var RL=kb();v.throttleTime=RL.throttleTime;var AL=li();v.throwIfEmpty=AL.throwIfEmpty;var jL=Lb();v.timeInterval=jL.timeInterval;var qL=Fb();v.timeout=qL.timeout;var NL=Hf();v.timeoutWith=NL.timeoutWith;var xL=Vb();v.timestamp=xL.timestamp;var DL=Wb();v.toArray=DL.toArray;var ML=zb();v.window=ML.window;var kL=Zb();v.windowCount=kL.windowCount;var UL=Xb();v.windowTime=UL.windowTime;var LL=$b();v.windowToggle=LL.windowToggle;var FL=ey();v.windowWhen=FL.windowWhen;var BL=ty();v.withLatestFrom=BL.withLatestFrom;var VL=ry();v.zip=VL.zip;var WL=ny();v.zipAll=WL.zipAll});var yu=l(bu=>{"use strict";var oy=gt();Object.defineProperty(bu,"__esModule",{value:!0});bu.default=void 0;var HL=oy(or()),zL=oy(ur()),YL=P(),Ki=Gn(),Bt=vu(),Qi={READY:0,STREAMING:1,COMPLETED:2},ZL=function(){function r(t){(0,HL.default)(this,r);var e=t.pipe((0,Bt.publishReplay)(1),(0,Bt.refCount)());this._result=e,this._keys=e.pipe((0,Bt.flatMap)(function(n){return(0,Ki.from)(n.keys())}),(0,Bt.publishReplay)(1),(0,Bt.refCount)()),this._records=new Ki.Subject,this._summary=new Ki.ReplaySubject,this._state=Qi.READY}return(0,zL.default)(r,[{key:"keys",value:function(){return this._keys}},{key:"records",value:function(){var e=this;return this._result.pipe((0,Bt.flatMap)(function(n){return new Ki.Observable(function(i){return e._startStreaming({result:n,recordsObserver:i})})}))}},{key:"consume",value:function(){var e=this;return this._result.pipe((0,Bt.flatMap)(function(n){return new Ki.Observable(function(i){return e._startStreaming({result:n,summaryObserver:i})})}))}},{key:"_startStreaming",value:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.result,o=n.recordsObserver,u=o===void 0?null:o,s=n.summaryObserver,c=s===void 0?null:s,a=[];return c&&a.push(this._summary.subscribe(c)),this._state<Qi.STREAMING?(this._state=Qi.STREAMING,u&&a.push(this._records.subscribe(u)),a.push({unsubscribe:function(){i._cancel&&i._cancel()}}),this._records.observers.length===0&&i._cancel(),i.subscribe({onNext:function(h){e._records.next(h)},onCompleted:function(h){e._records.complete(),e._summary.next(h),e._summary.complete(),e._state=Qi.COMPLETED},onError:function(h){e._records.error(h),e._summary.error(h),e._state=Qi.COMPLETED}})):u&&u.error((0,YL.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){a.forEach(function(f){return f.unsubscribe()})}}}]),r}();bu.default=ZL});var Xf=l(gu=>{"use strict";var Ou=gt();Object.defineProperty(gu,"__esModule",{value:!0});gu.default=void 0;var GL=Ou(or()),KL=Ou(ur()),mu=Gn(),QL=Ou(yu()),pY=Ou(P()),XL=function(){function r(t){(0,GL.default)(this,r),this._txc=t}return(0,KL.default)(r,[{key:"run",value:function(e,n){var i=this;return new QL.default(new mu.Observable(function(o){try{o.next(i._txc.run(e,n)),o.complete()}catch(u){o.error(u)}return function(){}}))}},{key:"commit",value:function(){var e=this;return new mu.Observable(function(n){e._txc.commit().then(function(){n.complete()}).catch(function(i){return n.error(i)})})}},{key:"rollback",value:function(){var e=this;return new mu.Observable(function(n){e._txc.rollback().then(function(){n.complete()}).catch(function(i){return n.error(i)})})}},{key:"close",value:function(){var e=this;return new mu.Observable(function(n){e._txc.close().then(function(){n.complete()}).catch(function(i){return n.error(i)})})}}]),r}();gu.default=XL});var ly=l(Eu=>{"use strict";var fy=gt();Object.defineProperty(Eu,"__esModule",{value:!0});Eu.default=void 0;var JL=fy(or()),$L=fy(ur()),Xi=P(),Jf=Gn(),$f=vu(),dY=Xi.internal.logger.Logger,eF=Xi.internal.retryStrategy.canRetryOn,tF=Xi.error.SERVICE_UNAVAILABLE,vY=Xi.error.SESSION_EXPIRED,uy=30*1e3,sy=1e3,ay=2,cy=.2,rF=function(){function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.maxRetryTimeout,n=e===void 0?uy:e,i=t.initialDelay,o=i===void 0?sy:i,u=t.delayMultiplier,s=u===void 0?ay:u,c=t.delayJitter,a=c===void 0?cy:c,f=t.logger,h=f===void 0?null:f;(0,JL.default)(this,r),this._maxRetryTimeout=Su(n,uy),this._initialDelay=Su(o,sy),this._delayMultiplier=Su(s,ay),this._delayJitter=Su(a,cy),this._logger=h}return(0,$L.default)(r,[{key:"retry",value:function(e){var n=this;return e.pipe((0,$f.retryWhen)(function(i){var o=[],u=Date.now(),s=1,c=n._initialDelay;return i.pipe((0,$f.flatMap)(function(a){if(!eF(a))return(0,Jf.throwError)(a);if(o.push(a),s>=2&&Date.now()-u>=n._maxRetryTimeout){var f=(0,Xi.newError)("Failed after retried for ".concat(s," times in ").concat(n._maxRetryTimeout," ms. Make sure that your database is online and retry again."),tF);return f.seenErrors=o,(0,Jf.throwError)(f)}var h=n._computeNextDelay(c);return c=c*n._delayMultiplier,s++,n._logger&&n._logger.warn("Transaction failed and will be retried in ".concat(h)),(0,Jf.of)(1).pipe((0,$f.delay)(h))}))}))}},{key:"_computeNextDelay",value:function(e){var n=e*this._delayJitter;return e-n+2*n*Math.random()}}]),r}();Eu.default=rF;function Su(r,t){return r||r===0?r:t}});var el=l(Pu=>{"use strict";var Ji=gt();Object.defineProperty(Pu,"__esModule",{value:!0});Pu.default=void 0;var nF=Ji(or()),iF=Ji(ur()),Ur=Gn(),wu=vu(),oF=Ji(yu()),hy=P(),uF=Ji(Xf()),sF=Ji(ly()),py=hy.internal.constants,aF=py.ACCESS_MODE_READ,cF=py.ACCESS_MODE_WRITE,Tu=hy.internal.txConfig.TxConfig,fF=function(){function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.session,n=t.config;(0,nF.default)(this,r),this._session=e,this._retryLogic=lF(n)}return(0,iF.default)(r,[{key:"run",value:function(e,n,i){var o=this;return new oF.default(new Ur.Observable(function(u){try{u.next(o._session.run(e,n,i)),u.complete()}catch(s){u.error(s)}return function(){}}))}},{key:"beginTransaction",value:function(e){return this._beginTransaction(this._session._mode,e)}},{key:"readTransaction",value:function(e,n){return this._runTransaction(aF,e,n)}},{key:"writeTransaction",value:function(e,n){return this._runTransaction(cF,e,n)}},{key:"close",value:function(){var e=this;return new Ur.Observable(function(n){e._session.close().then(function(){n.complete()}).catch(function(i){return n.error(i)})})}},{key:"lastBookmark",value:function(){return this._session.lastBookmark()}},{key:"_beginTransaction",value:function(e,n){var i=this,o=Tu.empty();return n&&(o=new Tu(n)),new Ur.Observable(function(u){try{u.next(new uF.default(i._session._beginTransaction(e,o))),u.complete()}catch(s){u.error(s)}return function(){}})}},{key:"_runTransaction",value:function(e,n,i){var o=Tu.empty();return i&&(o=new Tu(i)),this._retryLogic.retry(this._beginTransaction(e,i).pipe((0,wu.flatMap)(function(u){return(0,Ur.defer)(function(){try{return n(u)}catch(s){return(0,Ur.throwError)(s)}}).pipe((0,wu.catchError)(function(s){return u.rollback().pipe((0,wu.concat)((0,Ur.throwError)(s)))}),(0,wu.concat)(u.commit()))})))}}]),r}();Pu.default=fF;function lF(r){var t=r&&r.maxTransactionRetryTime?r.maxTransactionRetryTime:null;return new sF.default({maxRetryTimeout:t})}});var yy=l(Ue=>{"use strict";var Lr=gt();Object.defineProperty(Ue,"__esModule",{value:!0});Ue.default=Ue.WRITE=Ue.READ=Ue.Driver=void 0;var hF=Lr(or()),pF=Lr(ur()),_F=Lr(oh()),dF=Lr(ah()),_y=Lr(ch()),Cu=P(),vF=Lr(el());function bF(r){var t=yF();return function(){var n=(0,_y.default)(r),i;if(t){var o=(0,_y.default)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,dF.default)(this,i)}}function yF(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var dy=Cu.internal.constants.FETCH_ALL,mF=Cu.driver.READ,vy=Cu.driver.WRITE;Ue.WRITE=vy;Ue.READ=mF;var by=function(r){(0,_F.default)(e,r);var t=bF(e);function e(){return(0,hF.default)(this,e),t.apply(this,arguments)}return(0,pF.default)(e,[{key:"rxSession",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.defaultAccessMode,u=o===void 0?vy:o,s=i.bookmarks,c=i.database,a=c===void 0?"":c,f=i.fetchSize,h=i.impersonatedUser;return new vF.default({session:this._newSession({defaultAccessMode:u,bookmarkOrBookmarks:s,database:a,impersonatedUser:h,reactive:!0,fetchSize:OF(f,this._config.fetchSize)}),config:this._config})}}]),e}(Cu.Driver);Ue.Driver=by;function OF(r,t){var e=parseInt(r,10);if(e>0||e===dy)return e;if(e===0||e<0)throw new Error("The fetch size can only be a positive value or ".concat(dy," for ALL. However fetchSize = ").concat(e));return t}var gF=by;Ue.default=gF});var my=l(Iu=>{"use strict";Object.defineProperty(Iu,"__esModule",{value:!0});Iu.default=void 0;var SF="4.4.10";Iu.default=SF});var rl=l(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});var EF=function(){function r(){}return r.prototype.selectReader=function(t){throw new Error("Abstract function")},r.prototype.selectWriter=function(t){throw new Error("Abstract function")},r}();tl.default=EF});var Oy=l(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});var wF=function(){function r(t){this._offset=t||0}return r.prototype.next=function(t){if(t===0)return-1;var e=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),e%t},r}();nl.default=wF});var Ey=l(Vt=>{"use strict";var TF=Vt&&Vt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Sy=Vt&&Vt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vt,"__esModule",{value:!0});var gy=Sy(Oy()),PF=Sy(rl()),CF=function(r){TF(t,r);function t(e){var n=r.call(this)||this;return n._readersIndex=new gy.default,n._writersIndex=new gy.default,n._connectionPool=e,n}return t.prototype.selectReader=function(e){return this._select(e,this._readersIndex)},t.prototype.selectWriter=function(e){return this._select(e,this._writersIndex)},t.prototype._select=function(e,n){var i=e.length;if(i===0)return null;var o=n.next(i),u=o,s=null,c=Number.MAX_SAFE_INTEGER;do{var a=e[u],f=this._connectionPool.activeResourceCount(a);f<c&&(s=a,c=f),u===i-1?u=0:u++}while(u!==o);return s},t}(PF.default);Vt.default=CF});var il=l(Qe=>{"use strict";var wy=Qe&&Qe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.LeastConnectedLoadBalancingStrategy=Qe.LoadBalancingStrategy=void 0;var IF=wy(rl());Qe.LoadBalancingStrategy=IF.default;var Ty=wy(Ey());Qe.LeastConnectedLoadBalancingStrategy=Ty.default;Qe.default=Ty.default});var ol=l($i=>{"use strict";var RF=$i&&$i.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty($i,"__esModule",{value:!0});var Py=function(){function r(t){this.position=0,this.length=t}return r.prototype.getUInt8=function(t){throw new Error("Not implemented")},r.prototype.getInt8=function(t){throw new Error("Not implemented")},r.prototype.getFloat64=function(t){throw new Error("Not implemented")},r.prototype.putUInt8=function(t,e){throw new Error("Not implemented")},r.prototype.putInt8=function(t,e){throw new Error("Not implemented")},r.prototype.putFloat64=function(t,e){throw new Error("Not implemented")},r.prototype.getInt16=function(t){return this.getInt8(t)<<8|this.getUInt8(t+1)},r.prototype.getUInt16=function(t){return this.getUInt8(t)<<8|this.getUInt8(t+1)},r.prototype.getInt32=function(t){return this.getInt8(t)<<24|this.getUInt8(t+1)<<16|this.getUInt8(t+2)<<8|this.getUInt8(t+3)},r.prototype.getUInt32=function(t){return this.getUInt8(t)<<24|this.getUInt8(t+1)<<16|this.getUInt8(t+2)<<8|this.getUInt8(t+3)},r.prototype.getInt64=function(t){return this.getInt8(t)<<56|this.getUInt8(t+1)<<48|this.getUInt8(t+2)<<40|this.getUInt8(t+3)<<32|this.getUInt8(t+4)<<24|this.getUInt8(t+5)<<16|this.getUInt8(t+6)<<8|this.getUInt8(t+7)},r.prototype.getSlice=function(t,e){return new AF(t,e,this)},r.prototype.putInt16=function(t,e){this.putInt8(t,e>>8),this.putUInt8(t+1,e&255)},r.prototype.putUInt16=function(t,e){this.putUInt8(t,e>>8&255),this.putUInt8(t+1,e&255)},r.prototype.putInt32=function(t,e){this.putInt8(t,e>>24),this.putUInt8(t+1,e>>16&255),this.putUInt8(t+2,e>>8&255),this.putUInt8(t+3,e&255)},r.prototype.putUInt32=function(t,e){this.putUInt8(t,e>>24&255),this.putUInt8(t+1,e>>16&255),this.putUInt8(t+2,e>>8&255),this.putUInt8(t+3,e&255)},r.prototype.putInt64=function(t,e){this.putInt8(t,e>>48),this.putUInt8(t+1,e>>42&255),this.putUInt8(t+2,e>>36&255),this.putUInt8(t+3,e>>30&255),this.putUInt8(t+4,e>>24&255),this.putUInt8(t+5,e>>16&255),this.putUInt8(t+6,e>>8&255),this.putUInt8(t+7,e&255)},r.prototype.putBytes=function(t,e){for(var n=0,i=e.remaining();n<i;n++)this.putUInt8(t+n,e.readUInt8())},r.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},r.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},r.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},r.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},r.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},r.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},r.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},r.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},r.prototype.writeUInt8=function(t){this.putUInt8(this._updatePos(1),t)},r.prototype.writeInt8=function(t){this.putInt8(this._updatePos(1),t)},r.prototype.writeInt16=function(t){this.putInt16(this._updatePos(2),t)},r.prototype.writeInt32=function(t){this.putInt32(this._updatePos(4),t)},r.prototype.writeUInt32=function(t){this.putUInt32(this._updatePos(4),t)},r.prototype.writeInt64=function(t){this.putInt64(this._updatePos(8),t)},r.prototype.writeFloat64=function(t){this.putFloat64(this._updatePos(8),t)},r.prototype.writeBytes=function(t){this.putBytes(this._updatePos(t.remaining()),t)},r.prototype.readSlice=function(t){return this.getSlice(this._updatePos(t),t)},r.prototype._updatePos=function(t){var e=this.position;return this.position+=t,e},r.prototype.remaining=function(){return this.length-this.position},r.prototype.hasRemaining=function(){return this.remaining()>0},r.prototype.reset=function(){this.position=0},r.prototype.toString=function(){return this.constructor.name+"( position="+this.position+` )
  `+this.toHex()},r.prototype.toHex=function(){for(var t="",e=0;e<this.length;e++){var n=this.getUInt8(e).toString(16);n.length===1&&(n="0"+n),t+=n,e!==this.length-1&&(t+=" ")}return t},r}();$i.default=Py;var AF=function(r){RF(t,r);function t(e,n,i){var o=r.call(this,n)||this;return o._start=e,o._inner=i,o}return t.prototype.putUInt8=function(e,n){this._inner.putUInt8(this._start+e,n)},t.prototype.getUInt8=function(e){return this._inner.getUInt8(this._start+e)},t.prototype.putInt8=function(e,n){this._inner.putInt8(this._start+e,n)},t.prototype.putFloat64=function(e,n){this._inner.putFloat64(this._start+e,n)},t.prototype.getInt8=function(e){return this._inner.getInt8(this._start+e)},t.prototype.getFloat64=function(e){return this._inner.getFloat64(this._start+e)},t}(Py)});var Ru=l(Wt=>{"use strict";var jF=Wt&&Wt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.BaseBuffer=void 0;var Cy=jF(ol());Wt.BaseBuffer=Cy.default;Wt.default=Cy.default});var Fr=l(Xe=>{"use strict";var qF=Xe&&Xe.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Iy=Xe&&Xe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.alloc=void 0;var Au=Iy(require("buffer")),NF=Iy(Ru()),Ry=function(r){qF(t,r);function t(e){var n=this,i=DF(e);return n=r.call(this,i.length)||this,n._buffer=i,n}return t.prototype.getUInt8=function(e){return this._buffer.readUInt8(e)},t.prototype.getInt8=function(e){return this._buffer.readInt8(e)},t.prototype.getFloat64=function(e){return this._buffer.readDoubleBE(e)},t.prototype.putUInt8=function(e,n){this._buffer.writeUInt8(n,e)},t.prototype.putInt8=function(e,n){this._buffer.writeInt8(n,e)},t.prototype.putFloat64=function(e,n){this._buffer.writeDoubleBE(n,e)},t.prototype.putBytes=function(e,n){if(n instanceof t){var i=Math.min(n.length-n.position,this.length-e);n._buffer.copy(this._buffer,e,n.position,n.position+i),n.position+=i}else r.prototype.putBytes.call(this,e,n)},t.prototype.getSlice=function(e,n){return new t(this._buffer.slice(e,e+n))},t}(NF.default);Xe.default=Ry;function xF(r){return new Ry(r)}Xe.alloc=xF;function DF(r){return r instanceof Au.default.Buffer?r:typeof r=="number"&&typeof Au.default.Buffer.alloc=="function"?Au.default.Buffer.alloc(r):new Au.default.Buffer(r)}});var qy=l(to=>{"use strict";var qu=to&&to.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(to,"__esModule",{value:!0});var MF=qu(require("net")),ul=qu(require("tls")),kF=qu(require("fs")),Ay=qu(Fr()),je=P(),al=je.internal.util,eo=al.ENCRYPTION_OFF,UF=al.ENCRYPTION_ON,LF=al.isEmptyObjectOrNull,FF=0,jy={TRUST_CUSTOM_CA_SIGNED_CERTIFICATES:function(r,t,e){if(!r.trustedCertificates||r.trustedCertificates.length===0){e((0,je.newError)('You are using TRUST_CUSTOM_CA_SIGNED_CERTIFICATES as the method to verify trust for encrypted  connections, but have not configured any trustedCertificates. You  must specify the path to at least one trusted X.509 certificate for this to work. Two other alternatives is to use TRUST_ALL_CERTIFICATES or to disable encryption by setting encrypted="'+eo+'"in your driver configuration.'));return}var n=sl(r.address.host(),r.trustedCertificates.map(function(o){return kF.default.readFileSync(o)})),i=ul.default.connect(r.address.port(),r.address.resolvedHost(),n,function(){i.authorized?t():e((0,je.newError)("Server certificate is not trusted. If you trust the database you are connecting to, add the signing certificate, or the server certificate, to the list of certificates trusted by this driver using `neo4j.driver(.., { trustedCertificates:['path/to/certificate.crt']}). This  is a security measure to protect against man-in-the-middle attacks. If you are just trying  Neo4j out and are not concerned about encryption, simply disable it using `encrypted=\""+eo+'"` in the driver options. Socket responded with: '+i.authorizationError))});return i.on("error",e),ju(i)},TRUST_SYSTEM_CA_SIGNED_CERTIFICATES:function(r,t,e){var n=sl(r.address.host()),i=ul.default.connect(r.address.port(),r.address.resolvedHost(),n,function(){i.authorized?t():e((0,je.newError)("Server certificate is not trusted. If you trust the database you are connecting to, use TRUST_CUSTOM_CA_SIGNED_CERTIFICATES and add the signing certificate, or the server certificate, to the list of certificates trusted by this driver using `neo4j.driver(.., { trustedCertificates:['path/to/certificate.crt']}). This  is a security measure to protect against man-in-the-middle attacks. If you are just trying  Neo4j out and are not concerned about encryption, simply disable it using `encrypted=\""+eo+'"` in the driver options. Socket responded with: '+i.authorizationError))});return i.on("error",e),ju(i)},TRUST_ALL_CERTIFICATES:function(r,t,e){var n=sl(r.address.host()),i=ul.default.connect(r.address.port(),r.address.resolvedHost(),n,function(){var o=i.getPeerCertificate();LF(o)?e((0,je.newError)('Secure connection was successful but server did not return any valid certificates. Such connection can not be trusted. If you are just trying  Neo4j out and are not concerned about encryption, simply disable it using `encrypted="'+eo+'"` in the driver options. Socket responded with: '+i.authorizationError)):t()});return i.on("error",e),ju(i)}};function BF(r,t,e){e===void 0&&(e=function(){return null});var n=WF(r);if(VF(r)){if(jy[n])return jy[n](r,t,e);e((0,je.newError)("Unknown trust strategy: "+r.trust+". Please use either trust:'TRUST_CUSTOM_CA_SIGNED_CERTIFICATES' or trust:'TRUST_ALL_CERTIFICATES' in your driver configuration. Alternatively, you can disable encryption by setting `encrypted:\""+eo+'"`. There is no mechanism to use encryption without trust verification, because this incurs the overhead of encryption without improving security. If the driver does not verify that the peer it is connected to is really Neo4j, it is very easy for an attacker to bypass the encryption by pretending to be Neo4j.'))}else{var i=MF.default.connect(r.address.port(),r.address.resolvedHost(),t);return i.on("error",e),ju(i)}}function VF(r){var t=r.encrypted==null||r.encrypted===void 0;return t?!1:r.encrypted===!0||r.encrypted===UF}function WF(r){return r.trust?r.trust:"TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"}function sl(r,t){return t===void 0&&(t=void 0),{rejectUnauthorized:!1,servername:r,ca:t}}function ju(r){return r.setKeepAlive(!0),r}var HF=function(){function r(t,e){e===void 0&&(e=BF);var n=this;this.id=FF++,this._pending=[],this._open=!0,this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._handleConnectionTerminated=this._handleConnectionTerminated.bind(this),this._connectionErrorCode=t.connectionErrorCode,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._conn=e(t,function(){if(!!n._open){n._conn.on("data",function(u){n.onmessage&&n.onmessage(new Ay.default(u))}),n._conn.on("error",n._handleConnectionError),n._conn.on("end",n._handleConnectionTerminated);var i=n._pending;n._pending=null;for(var o=0;o<i.length;o++)n.write(i[o])}},this._handleConnectionError),this._setupConnectionTimeout(t,this._conn)}return r.prototype._handleConnectionError=function(t){var e="Failed to connect to server. Please ensure that your database is listening on the correct host and port and that you have compatible encryption settings both on Neo4j server and driver. Note that the default encryption setting has changed in Neo4j 4.0.";t.message&&(e+=" Caused by: "+t.message),this._error=(0,je.newError)(e,this._connectionErrorCode),this.onerror&&this.onerror(this._error)},r.prototype._handleConnectionTerminated=function(){this._open=!1,this._error=(0,je.newError)("Connection was closed by server",this._connectionErrorCode),this.onerror&&this.onerror(this._error)},r.prototype._setupConnectionTimeout=function(t,e){var n=this,i=t.connectionTimeout;if(i){var o=function(){e.setTimeout(0)},u=function(){e.setTimeout(0),e.destroy((0,je.newError)("Failed to establish connection in "+i+"ms",t.connectionErrorCode))};e.on("connect",o),e.on("timeout",u),this._removeConnectionTimeoutListeners=function(){n._conn.off("connect",o),n._conn.off("timeout",u)},e.setTimeout(i)}},r.prototype.setupReceiveTimeout=function(t){var e=this;this._removeConnectionTimeoutListeners&&this._removeConnectionTimeoutListeners(),this._conn.on("timeout",function(){e._conn.destroy((0,je.newError)("Connection lost. Server didn't respond in "+t+"ms",e._connectionErrorCode))}),this._receiveTimeout=t},r.prototype.stopReceiveTimeout=function(){this._receiveTimeout!==null&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,this._conn.setTimeout(0))},r.prototype.startReceiveTimeout=function(){this._receiveTimeout!==null&&!this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!0,this._conn.setTimeout(this._receiveTimeout))},r.prototype.write=function(t){if(this._pending!==null)this._pending.push(t);else if(t instanceof Ay.default)this._conn.write(t._buffer);else throw(0,je.newError)("Don't know how to write: "+t)},r.prototype.close=function(){var t=this;return new Promise(function(e,n){var i=function(){t._conn.destroyed||t._conn.destroy(),e()};t._open?(t._open=!1,t._conn.removeListener("end",t._handleConnectionTerminated),t._conn.on("end",function(){return i()}),t._conn.on("close",function(){return i()}),t._conn.end(),t._conn.destroy()):i()})},r}();to.default=HF});var Ny=l(Ht=>{"use strict";var zF=Ht&&Ht.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),YF=Ht&&Ht.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ht,"__esModule",{value:!0});var ZF=YF(require("dns")),GF=P(),KF=GF.internal.resolver.BaseHostNameResolver,QF=function(r){zF(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.resolve=function(e){return new Promise(function(n){ZF.default.lookup(e.host(),{all:!0},function(i,o){if(i)n([e]);else{var u=o.map(function(s){return e.resolveWith(s.address)});n(u)}})})},t}(KF);Ht.default=QF});var Dy=l(vt=>{"use strict";var xy=vt&&vt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vt,"__esModule",{value:!0});vt.HostNameResolver=vt.Channel=void 0;var XF=xy(qy()),JF=xy(Ny());vt.Channel=XF.default;vt.HostNameResolver=JF.default});var My=l(ro=>{"use strict";var $F=ro&&ro.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ro,"__esModule",{value:!0});var eB=Ru(),tB=Fr(),rB=function(r){$F(t,r);function t(e){for(var n=this,i=0,o=0;o<e.length;o++)i+=e[o].length;return n=r.call(this,i)||this,n._buffers=e,n}return t.prototype.getUInt8=function(e){for(var n=0;n<this._buffers.length;n++){var i=this._buffers[n];if(e>=i.length)e-=i.length;else return i.getUInt8(e)}},t.prototype.getInt8=function(e){for(var n=0;n<this._buffers.length;n++){var i=this._buffers[n];if(e>=i.length)e-=i.length;else return i.getInt8(e)}},t.prototype.getFloat64=function(e){for(var n=(0,tB.alloc)(8),i=0;i<8;i++)n.putUInt8(i,this.getUInt8(e+i));return n.getFloat64(0)},t}(eB.BaseBuffer);ro.default=rB});var Ly=l(Le=>{"use strict";var nB=Le&&Le.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Uy=Le&&Le.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Le,"__esModule",{value:!0});Le.Dechunker=Le.Chunker=void 0;var iB=Uy(ol()),ky=Fr(),oB=Uy(My()),Nu=2,uB=0,sB=1400,aB=function(r){nB(t,r);function t(e,n){var i=r.call(this,0)||this;return i._bufferSize=n||sB,i._ch=e,i._buffer=(0,ky.alloc)(i._bufferSize),i._currentChunkStart=0,i._chunkOpen=!1,i}return t.prototype.putUInt8=function(e,n){this._ensure(1),this._buffer.writeUInt8(n)},t.prototype.putInt8=function(e,n){this._ensure(1),this._buffer.writeInt8(n)},t.prototype.putFloat64=function(e,n){this._ensure(8),this._buffer.writeFloat64(n)},t.prototype.putBytes=function(e,n){for(;n.remaining()>0;)this._ensure(1),this._buffer.remaining()>n.remaining()?this._buffer.writeBytes(n):this._buffer.writeBytes(n.readSlice(this._buffer.remaining()));return this},t.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var e=this._buffer;this._buffer=null,this._ch.write(e.getSlice(0,e.position)),this._buffer=(0,ky.alloc)(this._bufferSize),this._chunkOpen=!1}return this},t.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<Nu&&this.flush(),this._buffer.writeInt16(uB)},t.prototype._ensure=function(e){var n=this._chunkOpen?e:e+Nu;this._buffer.remaining()<n&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+Nu,this._chunkOpen=!0)},t.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var e=this._buffer.position-(this._currentChunkStart+Nu);this._buffer.putUInt16(this._currentChunkStart,e),this._chunkOpen=!1}},t}(iB.default);Le.Chunker=aB;var cB=function(){function r(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return r.prototype.AWAITING_CHUNK=function(t){return t.remaining()>=2?this._onHeader(t.readUInt16()):(this._partialChunkHeader=t.readUInt8()<<8,this.IN_HEADER)},r.prototype.IN_HEADER=function(t){return this._onHeader((this._partialChunkHeader|t.readUInt8())&65535)},r.prototype.IN_CHUNK=function(t){return this._chunkSize<=t.remaining()?(this._currentMessage.push(t.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=t.remaining(),this._currentMessage.push(t.readSlice(t.remaining())),this.IN_CHUNK)},r.prototype.CLOSED=function(t){},r.prototype._onHeader=function(t){if(t===0){var e=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:e=this._currentMessage[0];break;default:e=new oB.default(this._currentMessage);break}return this._currentMessage=[],this.onmessage(e),this.AWAITING_CHUNK}else return this._chunkSize=t,this.IN_CHUNK},r.prototype.write=function(t){for(;t.hasRemaining();)this._state=this._state(t)},r}();Le.Dechunker=cB});var Wy=l(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});var xu=P(),Vy=xu.internal.util,fB=Vy.ENCRYPTION_OFF,lB=Vy.ENCRYPTION_ON,hB=xu.error.SERVICE_UNAVAILABLE,pB=3e4,Fy=[null,void 0,!0,!1,lB,fB],By=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"],_B=function(){function r(t,e,n){this.address=t,this.encrypted=dB(e),this.trust=vB(e),this.trustedCertificates=bB(e),this.knownHostsPath=yB(e),this.connectionErrorCode=n||hB,this.connectionTimeout=mB(e)}return r}();cl.default=_B;function dB(r){var t=r.encrypted;if(Fy.indexOf(t)===-1)throw(0,xu.newError)("Illegal value of the encrypted setting "+t+". Expected one of "+Fy);return t}function vB(r){var t=r.trust;if(By.indexOf(t)===-1)throw(0,xu.newError)("Illegal value of the trust setting "+t+". Expected one of "+By);return t}function bB(r){return r.trustedCertificates||[]}function yB(r){return r.knownHosts||null}function mB(r){var t=parseInt(r.connectionTimeout,10);return t===0||t&&t<0?null:t||pB}});var Yy=l(no=>{"use strict";var zy=no&&no.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(no,"__esModule",{value:!0});var OB=zy(Fr()),gB=P(),fl=zy(require("buffer")),SB=require("string_decoder"),Hy=new SB.StringDecoder("utf8");function EB(r){return new OB.default(IB(r))}function wB(r,t){if(Object.prototype.hasOwnProperty.call(r,"_buffer"))return TB(r,t);if(Object.prototype.hasOwnProperty.call(r,"_buffers"))return PB(r,t);throw(0,gB.newError)("Don't know how to decode strings from '"+r+"'")}function TB(r,t){var e=r.position,n=e+t;return r.position=Math.min(n,r.length),r._buffer.toString("utf8",e,n)}function PB(r,t){return CB(r,t,function(e){return Hy.write(e._buffer)},function(){return Hy.end()})}function CB(r,t,e,n){var i=t,o=r.position;r._updatePos(Math.min(t,r.length-o));var u=r._buffers.reduce(function(s,c){if(i<=0)return s;if(o>=c.length)return o-=c.length,"";c._updatePos(o-c.position);var a=Math.min(c.length-o,i),f=c.readSlice(a);return c._updatePos(a),i=Math.max(i-f.length,0),o=0,s+e(f)},"");return u+n()}function IB(r){return typeof fl.default.Buffer.from=="function"?fl.default.Buffer.from(r,"utf8"):new fl.default.Buffer(r,"utf8")}no.default={encode:EB,decode:wB}});var Br=l(X=>{"use strict";var RB=X&&X.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),Zy=X&&X.__exportStar||function(r,t){for(var e in r)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&RB(t,r,e)},Gy=X&&X.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(X,"__esModule",{value:!0});X.utf8=X.alloc=X.ChannelConfig=void 0;Zy(Dy(),X);Zy(Ly(),X);var AB=Wy();Object.defineProperty(X,"ChannelConfig",{enumerable:!0,get:function(){return Gy(AB).default}});var jB=Fr();Object.defineProperty(X,"alloc",{enumerable:!0,get:function(){return jB.alloc}});var qB=Yy();Object.defineProperty(X,"utf8",{enumerable:!0,get:function(){return Gy(qB).default}})});var Qy=l(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});var NB=Br(),Ky=P(),xB=1616949271;function io(r,t){return{major:r,minor:t}}function DB(r){if(r.length>4)throw(0,Ky.newError)("It should not have more than 4 versions of the protocol");var t=(0,NB.alloc)(5*4);return t.writeInt32(xB),r.forEach(function(e){if(e instanceof Array){var n=e[0],i=n.major,o=n.minor,u=e[1].minor,s=o-u;t.writeInt32(s<<16|o<<8|i)}else{var i=e.major,o=e.minor;t.writeInt32(o<<8|i)}}),t.reset(),t}function MB(r){var t=[r.readUInt8(),r.readUInt8(),r.readUInt8(),r.readUInt8()];if(t[0]===72&&t[1]===84&&t[2]===84&&t[3]===80)throw(0,Ky.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return Number(t[3]+"."+t[2])}function kB(){return DB([[io(4,4),io(4,2)],io(4,1),io(4,0),io(3,0)])}function UB(r){var t=this;return new Promise(function(e,n){var i=function(o){n(o)};r.onerror=i.bind(t),r._error&&i(r._error),r.onmessage=function(o){try{var u=MB(o);e({protocolVersion:u,consumeRemainingBuffer:function(s){o.hasRemaining()&&s(o.readSlice(o.remaining()))}})}catch(s){n(s)}},r.write(kB())})}ll.default=UB});var Du=l(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.assertImpersonatedUserIsEmpty=bt.assertTxConfigIsEmpty=bt.assertDatabaseIsEmpty=void 0;var hl=P();function LB(r,t,e){if(t===void 0&&(t=function(){}),r&&!r.isEmpty()){var n=(0,hl.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw t(n.message),e.onError(n),n}}bt.assertTxConfigIsEmpty=LB;function FB(r,t,e){if(t===void 0&&(t=function(){}),r){var n=(0,hl.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw t(n.message),e.onError(n),n}}bt.assertDatabaseIsEmpty=FB;function BB(r,t,e){if(t===void 0&&(t=function(){}),r){var n=(0,hl.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+("Trying to impersonate "+r+"."));throw t(n.message),e.onError(n),n}}bt.assertImpersonatedUserIsEmpty=BB});var _l=l(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.Structure=yt.Unpacker=yt.Packer=void 0;var oo=Br(),R=P(),VB=R.internal.objectUtil,Xy=R.error.PROTOCOL_ERROR,Jy=128,$y=144,em=160,tm=176,rm=192,nm=193,im=194,om=195,um=200,sm=201,am=202,cm=203,fm=208,lm=209,hm=210,pm=212,_m=213,dm=214,vm=204,bm=205,ym=206,mm=216,Om=217,gm=218,Sm=220,Em=221,WB=78,HB=3,zB=82,YB=5,ZB=114,GB=3,KB=80,QB=3,pl=function(){function r(t,e){this.signature=t,this.fields=e}return r.prototype.toString=function(){for(var t="",e=0;e<this.fields.length;e++)e>0&&(t+=", "),t+=this.fields[e];return"Structure("+this.signature+", ["+t+"])"},r}();yt.Structure=pl;var XB=function(){function r(t){this._ch=t,this._byteArraysSupported=!0}return r.prototype.packable=function(t){var e=this;if(t===null)return function(){return e._ch.writeUInt8(rm)};if(t===!0)return function(){return e._ch.writeUInt8(om)};if(t===!1)return function(){return e._ch.writeUInt8(im)};if(typeof t=="number")return function(){return e.packFloat(t)};if(typeof t=="string")return function(){return e.packString(t)};if(typeof t=="bigint")return function(){return e.packInteger((0,R.int)(t))};if((0,R.isInt)(t))return function(){return e.packInteger(t)};if(t instanceof Int8Array)return function(){return e.packBytes(t)};if(t instanceof Array)return function(){e.packListHeader(t.length);for(var o=0;o<t.length;o++)e.packable(t[o]===void 0?null:t[o])()};if($B(t))return this.packableIterable(t);if(t instanceof R.Node)return this._nonPackableValue("It is not allowed to pass nodes in query parameters, given: "+t);if(t instanceof R.Relationship)return this._nonPackableValue("It is not allowed to pass relationships in query parameters, given: "+t);if(t instanceof R.Path)return this._nonPackableValue("It is not allowed to pass paths in query parameters, given: "+t);if(t instanceof pl){for(var n=[],i=0;i<t.fields.length;i++)n[i]=this.packable(t.fields[i]);return function(){return e.packStruct(t.signature,n)}}else return typeof t=="object"?function(){for(var o=Object.keys(t),u=0,s=0;s<o.length;s++)t[o[s]]!==void 0&&u++;e.packMapHeader(u);for(var c=0;c<o.length;c++){var a=o[c];t[a]!==void 0&&(e.packString(a),e.packable(t[a])())}}:this._nonPackableValue("Unable to pack the given value: "+t)},r.prototype.packableIterable=function(t){try{var e=Array.from(t);return this.packable(e)}catch(n){throw(0,R.newError)("Cannot pack given iterable, "+n.message+": "+t)}},r.prototype.packStruct=function(t,e){e=e||[],this.packStructHeader(e.length,t);for(var n=0;n<e.length;n++)e[n]()},r.prototype.packInteger=function(t){var e=t.high,n=t.low;t.greaterThanOrEqual(-16)&&t.lessThan(128)?this._ch.writeInt8(n):t.greaterThanOrEqual(-128)&&t.lessThan(-16)?(this._ch.writeUInt8(um),this._ch.writeInt8(n)):t.greaterThanOrEqual(-32768)&&t.lessThan(32768)?(this._ch.writeUInt8(sm),this._ch.writeInt16(n)):t.greaterThanOrEqual(-2147483648)&&t.lessThan(2147483648)?(this._ch.writeUInt8(am),this._ch.writeInt32(n)):(this._ch.writeUInt8(cm),this._ch.writeInt32(e),this._ch.writeInt32(n))},r.prototype.packFloat=function(t){this._ch.writeUInt8(nm),this._ch.writeFloat64(t)},r.prototype.packString=function(t){var e=oo.utf8.encode(t),n=e.length;if(n<16)this._ch.writeUInt8(Jy|n),this._ch.writeBytes(e);else if(n<256)this._ch.writeUInt8(fm),this._ch.writeUInt8(n),this._ch.writeBytes(e);else if(n<65536)this._ch.writeUInt8(lm),this._ch.writeUInt8(n/256>>0),this._ch.writeUInt8(n%256),this._ch.writeBytes(e);else if(n<4294967296)this._ch.writeUInt8(hm),this._ch.writeUInt8((n/16777216>>0)%256),this._ch.writeUInt8((n/65536>>0)%256),this._ch.writeUInt8((n/256>>0)%256),this._ch.writeUInt8(n%256),this._ch.writeBytes(e);else throw(0,R.newError)("UTF-8 strings of size "+n+" are not supported")},r.prototype.packListHeader=function(t){if(t<16)this._ch.writeUInt8($y|t);else if(t<256)this._ch.writeUInt8(pm),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(_m),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else if(t<4294967296)this._ch.writeUInt8(dm),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else throw(0,R.newError)("Lists of size "+t+" are not supported")},r.prototype.packBytes=function(t){if(this._byteArraysSupported){this.packBytesHeader(t.length);for(var e=0;e<t.length;e++)this._ch.writeInt8(t[e])}else throw(0,R.newError)("Byte arrays are not supported by the database this driver is connected to")},r.prototype.packBytesHeader=function(t){if(t<256)this._ch.writeUInt8(vm),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(bm),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else if(t<4294967296)this._ch.writeUInt8(ym),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else throw(0,R.newError)("Byte arrays of size "+t+" are not supported")},r.prototype.packMapHeader=function(t){if(t<16)this._ch.writeUInt8(em|t);else if(t<256)this._ch.writeUInt8(mm),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(Om),this._ch.writeUInt8(t/256>>0),this._ch.writeUInt8(t%256);else if(t<4294967296)this._ch.writeUInt8(gm),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else throw(0,R.newError)("Maps of size "+t+" are not supported")},r.prototype.packStructHeader=function(t,e){if(t<16)this._ch.writeUInt8(tm|t),this._ch.writeUInt8(e);else if(t<256)this._ch.writeUInt8(Sm),this._ch.writeUInt8(t),this._ch.writeUInt8(e);else if(t<65536)this._ch.writeUInt8(Em),this._ch.writeUInt8(t/256>>0),this._ch.writeUInt8(t%256);else throw(0,R.newError)("Structures of size "+t+" are not supported")},r.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},r.prototype._nonPackableValue=function(t){return function(){throw(0,R.newError)(t,Xy)}},r}();yt.Packer=XB;var JB=function(){function r(t,e){t===void 0&&(t=!1),e===void 0&&(e=!1),this._disableLosslessIntegers=t,this._useBigInt=e}return r.prototype.unpack=function(t){var e=t.readUInt8(),n=e&240,i=e&15;if(e===rm)return null;var o=this._unpackBoolean(e);if(o!==null)return o;var u=this._unpackNumberOrInteger(e,t);if(u!==null){if((0,R.isInt)(u)){if(this._useBigInt)return u.toBigInt();if(this._disableLosslessIntegers)return u.toNumberOrInfinity()}return u}var s=this._unpackString(e,n,i,t);if(s!==null)return s;var c=this._unpackList(e,n,i,t);if(c!==null)return c;var a=this._unpackByteArray(e,t);if(a!==null)return a;var f=this._unpackMap(e,n,i,t);if(f!==null)return f;var h=this._unpackStruct(e,n,i,t);if(h!==null)return h;throw(0,R.newError)("Unknown packed value with marker "+e.toString(16))},r.prototype.unpackInteger=function(t){var e=t.readUInt8(),n=this._unpackInteger(e,t);if(n==null)throw(0,R.newError)("Unable to unpack integer value with marker "+e.toString(16));return n},r.prototype._unpackBoolean=function(t){return t===om?!0:t===im?!1:null},r.prototype._unpackNumberOrInteger=function(t,e){return t===nm?e.readFloat64():this._unpackInteger(t,e)},r.prototype._unpackInteger=function(t,e){if(t>=0&&t<128)return(0,R.int)(t);if(t>=240&&t<256)return(0,R.int)(t-256);if(t===um)return(0,R.int)(e.readInt8());if(t===sm)return(0,R.int)(e.readInt16());if(t===am){var n=e.readInt32();return(0,R.int)(n)}else if(t===cm){var i=e.readInt32(),o=e.readInt32();return new R.Integer(o,i)}else return null},r.prototype._unpackString=function(t,e,n,i){return e===Jy?oo.utf8.decode(i,n):t===fm?oo.utf8.decode(i,i.readUInt8()):t===lm?oo.utf8.decode(i,i.readUInt16()):t===hm?oo.utf8.decode(i,i.readUInt32()):null},r.prototype._unpackList=function(t,e,n,i){return e===$y?this._unpackListWithSize(n,i):t===pm?this._unpackListWithSize(i.readUInt8(),i):t===_m?this._unpackListWithSize(i.readUInt16(),i):t===dm?this._unpackListWithSize(i.readUInt32(),i):null},r.prototype._unpackListWithSize=function(t,e){for(var n=[],i=0;i<t;i++)n.push(this.unpack(e));return n},r.prototype._unpackByteArray=function(t,e){return t===vm?this._unpackByteArrayWithSize(e.readUInt8(),e):t===bm?this._unpackByteArrayWithSize(e.readUInt16(),e):t===ym?this._unpackByteArrayWithSize(e.readUInt32(),e):null},r.prototype._unpackByteArrayWithSize=function(t,e){for(var n=new Int8Array(t),i=0;i<t;i++)n[i]=e.readInt8();return n},r.prototype._unpackMap=function(t,e,n,i){return e===em?this._unpackMapWithSize(n,i):t===mm?this._unpackMapWithSize(i.readUInt8(),i):t===Om?this._unpackMapWithSize(i.readUInt16(),i):t===gm?this._unpackMapWithSize(i.readUInt32(),i):null},r.prototype._unpackMapWithSize=function(t,e){for(var n={},i=0;i<t;i++){var o=this.unpack(e);n[o]=this.unpack(e)}return n},r.prototype._unpackStruct=function(t,e,n,i){try{return e===tm?this._unpackStructWithSize(n,i):t===Sm?this._unpackStructWithSize(i.readUInt8(),i):t===Em?this._unpackStructWithSize(i.readUInt16(),i):null}catch(o){return VB.createBrokenObject(o)}},r.prototype._unpackStructWithSize=function(t,e){var n=e.readUInt8();return n===WB?this._unpackNode(t,e):n===zB?this._unpackRelationship(t,e):n===ZB?this._unpackUnboundRelationship(t,e):n===KB?this._unpackPath(t,e):this._unpackUnknownStruct(n,t,e)},r.prototype._unpackNode=function(t,e){return this._verifyStructSize("Node",HB,t),new R.Node(this.unpack(e),this.unpack(e),this.unpack(e))},r.prototype._unpackRelationship=function(t,e){return this._verifyStructSize("Relationship",YB,t),new R.Relationship(this.unpack(e),this.unpack(e),this.unpack(e),this.unpack(e),this.unpack(e))},r.prototype._unpackUnboundRelationship=function(t,e){return this._verifyStructSize("UnboundRelationship",GB,t),new R.UnboundRelationship(this.unpack(e),this.unpack(e),this.unpack(e))},r.prototype._unpackPath=function(t,e){this._verifyStructSize("Path",QB,t);for(var n=this.unpack(e),i=this.unpack(e),o=this.unpack(e),u=[],s=n[0],c=0;c<o.length;c+=2){var a=n[o[c+1]],f=(0,R.toNumber)(o[c]),h=void 0;f>0?(h=i[f-1],h instanceof R.UnboundRelationship&&(i[f-1]=h=h.bind(s.identity,a.identity))):(h=i[-f-1],h instanceof R.UnboundRelationship&&(i[-f-1]=h=h.bind(a.identity,s.identity))),u.push(new R.PathSegment(s,h,a)),s=a}return new R.Path(n[0],n[n.length-1],u)},r.prototype._unpackUnknownStruct=function(t,e,n){for(var i=new pl(t,[]),o=0;o<e;o++)i.fields.push(this.unpack(n));return i},r.prototype._verifyStructSize=function(t,e,n){if(e!==n)throw(0,R.newError)("Wrong struct size for "+t+", expected "+e+" but was "+n,Xy)},r}();yt.Unpacker=JB;function $B(r){return r==null?!1:typeof r[Symbol.iterator]=="function"}});var bl=l(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.epochSecondAndNanoToLocalDateTime=mt.nanoOfDayToLocalTime=mt.epochDayToDate=void 0;var zt=P(),Ot=zt.internal.temporalUtil,eV=Ot.DAYS_0000_TO_1970,dl=Ot.DAYS_PER_400_YEAR_CYCLE,wm=Ot.NANOS_PER_HOUR,Tm=Ot.NANOS_PER_MINUTE,vl=Ot.NANOS_PER_SECOND,Pm=Ot.SECONDS_PER_DAY,tV=Ot.floorDiv,rV=Ot.floorMod;function Cm(r){r=(0,zt.int)(r);var t=r.add(eV).subtract(60),e=(0,zt.int)(0);if(t.lessThan(0)){var n=t.add(1).div(dl).subtract(1);e=n.multiply(400),t=t.add(n.multiply(-dl))}var i=t.multiply(400).add(591).div(dl),o=t.subtract(i.multiply(365).add(i.div(4)).subtract(i.div(100)).add(i.div(400)));o.lessThan(0)&&(i=i.subtract(1),o=t.subtract(i.multiply(365).add(i.div(4)).subtract(i.div(100)).add(i.div(400)))),i=i.add(e);var u=o,s=u.multiply(5).add(2).div(153),c=s.add(2).modulo(12).add(1),a=u.subtract(s.multiply(306).add(5).div(10)).add(1);return i=i.add(s.div(10)),new zt.Date(i,c,a)}mt.epochDayToDate=Cm;function Im(r){r=(0,zt.int)(r);var t=r.div(wm);r=r.subtract(t.multiply(wm));var e=r.div(Tm);r=r.subtract(e.multiply(Tm));var n=r.div(vl),i=r.subtract(n.multiply(vl));return new zt.LocalTime(t,e,n,i)}mt.nanoOfDayToLocalTime=Im;function nV(r,t){var e=tV(r,Pm),n=rV(r,Pm),i=n.multiply(vl).add(t),o=Cm(e),u=Im(i);return new zt.LocalDateTime(o.year,o.month,o.day,u.hour,u.minute,u.second,u.nanosecond)}mt.epochSecondAndNanoToLocalDateTime=nV});var Am=l(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.packDateTime=oe.unpackDateTimeWithZoneId=oe.unpackDateTimeWithZoneOffset=oe.DATE_TIME_WITH_ZONE_ID=oe.DATE_TIME_WITH_ZONE_OFFSET=void 0;var ye=P(),iV=bl(),uo=ye.internal.temporalUtil.localDateTimeToEpochSecond;oe.DATE_TIME_WITH_ZONE_OFFSET=73;var oV=3;oe.DATE_TIME_WITH_ZONE_ID=105;var uV=3;function sV(r,t,e,n,i){r._verifyStructSize("DateTimeWithZoneOffset",oV,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),s=r.unpackInteger(e),c=(0,ye.int)(o).add(s),a=(0,iV.epochSecondAndNanoToLocalDateTime)(c,u),f=new ye.DateTime(a.year,a.month,a.day,a.hour,a.minute,a.second,a.nanosecond,s,null);return Rm(f,n,i)}oe.unpackDateTimeWithZoneOffset=sV;function aV(r,t,e,n,i){r._verifyStructSize("DateTimeWithZoneId",uV,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),s=r.unpack(e),c=yl(s,o,u),a=new ye.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,(0,ye.int)(u),c.timeZoneOffsetSeconds,s);return Rm(a,n,i)}oe.unpackDateTimeWithZoneId=aV;function cV(r,t){r.timeZoneId?fV(r,t):lV(r,t)}oe.packDateTime=cV;function fV(r,t){var e=uo(r.year,r.month,r.day,r.hour,r.minute,r.second,r.nanosecond),n=r.timeZoneOffsetSeconds!=null?r.timeZoneOffsetSeconds:hV(r.timeZoneId,e,r.nanosecond),i=e.subtract(n),o=(0,ye.int)(r.nanosecond),u=r.timeZoneId,s=[t.packable(i),t.packable(o),t.packable(u)];t.packStruct(oe.DATE_TIME_WITH_ZONE_ID,s)}function lV(r,t){var e=uo(r.year,r.month,r.day,r.hour,r.minute,r.second,r.nanosecond),n=(0,ye.int)(r.nanosecond),i=(0,ye.int)(r.timeZoneOffsetSeconds),o=e.subtract(i),u=[t.packable(o),t.packable(n),t.packable(i)];t.packStruct(oe.DATE_TIME_WITH_ZONE_OFFSET,u)}function hV(r,t,e){var n=yl(r,t,e),i=uo(n.year,n.month,n.day,n.hour,n.minute,n.second,e),o=i.subtract(t),u=t.subtract(o),s=yl(r,u,e),c=uo(s.year,s.month,s.day,s.hour,s.minute,s.second,e),a=c.subtract(u);return a}function yl(r,t,e){var n=new Intl.DateTimeFormat("en-US",{timeZone:r,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"}),i=(0,ye.int)(t).multiply(1e3).add((0,ye.int)(e).div(1e6)).toNumber(),o=n.formatToParts(i),u=o.reduce(function(c,a){return a.type==="era"?c.adjustEra=a.value.toUpperCase()==="B"?function(f){return f.subtract(1).negate()}:function(f){return f}:a.type!=="literal"&&(c[a.type]=(0,ye.int)(a.value)),c},{});u.year=u.adjustEra(u.year);var s=uo(u.year,u.month,u.day,u.hour,u.minute,u.second,u.nanosecond);return u.timeZoneOffsetSeconds=s.subtract(t),u.hour=u.hour.modulo(24),u}function Rm(r,t,e){if(!t&&!e)return r;var n=function(s){return e?s.toBigInt():s.toNumberOrInfinity()},i=Object.create(Object.getPrototypeOf(r));for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o)===!0){var u=r[o];i[o]=(0,ye.isInt)(u)?n(u):u}return Object.freeze(i),i}});var Hm=l(ue=>{"use strict";var jm=ue&&ue.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),pV=ue&&ue.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),_V=ue&&ue.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),qm=ue&&ue.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&pV(t,r,e);return _V(t,r),t};Object.defineProperty(ue,"__esModule",{value:!0});ue.Unpacker=ue.Packer=void 0;var Nm=qm(_l()),so=qm(Am()),q=P(),Vr=bl(),ml=q.internal.temporalUtil,dV=ml.dateToEpochDay,Ol=ml.localDateTimeToEpochSecond,xm=ml.localTimeToNanoOfDay,Dm=88,vV=3,Mm=89,bV=4,km=69,yV=4,Um=116,mV=1,Lm=84,OV=2,Fm=68,gV=1,Bm=100,SV=2,Vm=70,EV=3,Wm=102,wV=3,TV=function(r){jm(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},t.prototype.packable=function(e){var n=this;return(0,q.isPoint)(e)?function(){return CV(e,n)}:(0,q.isDuration)(e)?function(){return qV(e,n)}:(0,q.isLocalTime)(e)?function(){return xV(e,n)}:(0,q.isTime)(e)?function(){return MV(e,n)}:(0,q.isDate)(e)?function(){return UV(e,n)}:(0,q.isLocalDateTime)(e)?function(){return FV(e,n)}:(0,q.isDateTime)(e)&&this.useUtc?function(){return so.packDateTime(e,n)}:(0,q.isDateTime)(e)&&!this.useUtc?function(){return VV(e,n)}:r.prototype.packable.call(this,e)},t}(Nm.Packer);ue.Packer=TV;var PV=function(r){jm(t,r);function t(e,n){return e===void 0&&(e=!1),n===void 0&&(n=!1),r.call(this,e,n)||this}return t.prototype._unpackUnknownStruct=function(e,n,i){return e===Dm?AV(this,n,i):e===Mm?jV(this,n,i):e===km?NV(this,n,i):e===Um?DV(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===Lm?kV(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===Fm?LV(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===Bm?BV(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===so.DATE_TIME_WITH_ZONE_OFFSET&&this.useUtc?so.unpackDateTimeWithZoneOffset(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===Vm&&!this.useUtc?HV(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===so.DATE_TIME_WITH_ZONE_ID&&this.useUtc?so.unpackDateTimeWithZoneId(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===Wm&&!this.useUtc?YV(this,n,i,this._disableLosslessIntegers,this._useBigInt):r.prototype._unpackUnknownStruct.call(this,e,n,i,this._disableLosslessIntegers,this._useBigInt)},t}(Nm.Unpacker);ue.Unpacker=PV;function CV(r,t){var e=r.z===null||r.z===void 0;e?IV(r,t):RV(r,t)}function IV(r,t){var e=[t.packable((0,q.int)(r.srid)),t.packable(r.x),t.packable(r.y)];t.packStruct(Dm,e)}function RV(r,t){var e=[t.packable((0,q.int)(r.srid)),t.packable(r.x),t.packable(r.y),t.packable(r.z)];t.packStruct(Mm,e)}function AV(r,t,e){return r._verifyStructSize("Point2D",vV,t),new q.Point(r.unpack(e),r.unpack(e),r.unpack(e),void 0)}function jV(r,t,e){return r._verifyStructSize("Point3D",bV,t),new q.Point(r.unpack(e),r.unpack(e),r.unpack(e),r.unpack(e))}function qV(r,t){var e=(0,q.int)(r.months),n=(0,q.int)(r.days),i=(0,q.int)(r.seconds),o=(0,q.int)(r.nanoseconds),u=[t.packable(e),t.packable(n),t.packable(i),t.packable(o)];t.packStruct(km,u)}function NV(r,t,e){r._verifyStructSize("Duration",yV,t);var n=r.unpack(e),i=r.unpack(e),o=r.unpack(e),u=r.unpack(e);return new q.Duration(n,i,o,u)}function xV(r,t){var e=xm(r.hour,r.minute,r.second,r.nanosecond),n=[t.packable(e)];t.packStruct(Um,n)}function DV(r,t,e,n){r._verifyStructSize("LocalTime",mV,t);var i=r.unpackInteger(e),o=(0,Vr.nanoOfDayToLocalTime)(i);return Wr(o,n)}function MV(r,t){var e=xm(r.hour,r.minute,r.second,r.nanosecond),n=(0,q.int)(r.timeZoneOffsetSeconds),i=[t.packable(e),t.packable(n)];t.packStruct(Lm,i)}function kV(r,t,e,n,i){r._verifyStructSize("Time",OV,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),s=(0,Vr.nanoOfDayToLocalTime)(o),c=new q.Time(s.hour,s.minute,s.second,s.nanosecond,u);return Wr(c,n,i)}function UV(r,t){var e=dV(r.year,r.month,r.day),n=[t.packable(e)];t.packStruct(Fm,n)}function LV(r,t,e,n,i){r._verifyStructSize("Date",gV,t);var o=r.unpackInteger(e),u=(0,Vr.epochDayToDate)(o);return Wr(u,n,i)}function FV(r,t){var e=Ol(r.year,r.month,r.day,r.hour,r.minute,r.second,r.nanosecond),n=(0,q.int)(r.nanosecond),i=[t.packable(e),t.packable(n)];t.packStruct(Bm,i)}function BV(r,t,e,n,i){r._verifyStructSize("LocalDateTime",SV,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),s=(0,Vr.epochSecondAndNanoToLocalDateTime)(o,u);return Wr(s,n,i)}function VV(r,t){r.timeZoneId?zV(r,t):WV(r,t)}function WV(r,t){var e=Ol(r.year,r.month,r.day,r.hour,r.minute,r.second,r.nanosecond),n=(0,q.int)(r.nanosecond),i=(0,q.int)(r.timeZoneOffsetSeconds),o=[t.packable(e),t.packable(n),t.packable(i)];t.packStruct(Vm,o)}function HV(r,t,e,n,i){r._verifyStructSize("DateTimeWithZoneOffset",EV,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),s=r.unpackInteger(e),c=(0,Vr.epochSecondAndNanoToLocalDateTime)(o,u),a=new q.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,c.nanosecond,s,null);return Wr(a,n,i)}function zV(r,t){var e=Ol(r.year,r.month,r.day,r.hour,r.minute,r.second,r.nanosecond),n=(0,q.int)(r.nanosecond),i=r.timeZoneId,o=[t.packable(e),t.packable(n),t.packable(i)];t.packStruct(Wm,o)}function YV(r,t,e,n,i){r._verifyStructSize("DateTimeWithZoneId",wV,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),s=r.unpack(e),c=(0,Vr.epochSecondAndNanoToLocalDateTime)(o,u),a=new q.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,c.nanosecond,null,s);return Wr(a,n,i)}function Wr(r,t,e){if(!t&&!e)return r;var n=function(s){return e?s.toBigInt():s.toNumberOrInfinity()},i=Object.create(Object.getPrototypeOf(r));for(var o in r)if(r.hasOwnProperty(o)){var u=r[o];i[o]=(0,q.isInt)(u)?n(u):u}return Object.freeze(i),i}});var Mu=l(de=>{"use strict";var ZV=de&&de.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),GV=de&&de.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),zm=de&&de.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&ZV(t,r,e);return GV(t,r),t};Object.defineProperty(de,"__esModule",{value:!0});de.v2=de.v1=void 0;var KV=zm(_l());de.v1=KV;var Ym=zm(Hm());de.v2=Ym;de.default=Ym});var Yt=l(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});var te=P(),Jm=te.internal.constants,QV=Jm.ACCESS_MODE_READ,ku=Jm.FETCH_ALL,Zm=te.internal.util.assertString,XV=1,JV=15,Gm=16,$V=63,e4=1,t4=2,r4=17,n4=18,i4=19,Km=102,o4=47,u4=63,s4="r",ao=-1,Hr=function(){function r(t,e,n){this.signature=t,this.fields=e,this.toString=n}return r.init=function(t,e){return new r(XV,[t,e],function(){return"INIT "+t+" {...}"})},r.run=function(t,e){return new r(Gm,[t,e],function(){return"RUN "+t+" "+te.json.stringify(e)})},r.pullAll=function(){return a4},r.reset=function(){return c4},r.hello=function(t,e,n,i){n===void 0&&(n=null),i===void 0&&(i=null);var o=Object.assign({user_agent:t},e);return n&&(o.routing=n),i&&(o.patch_bolt=i),new r(e4,[o],function(){return"HELLO {user_agent: '"+t+"', ...}"})},r.begin=function(t){var e=t===void 0?{}:t,n=e.bookmark,i=e.txConfig,o=e.database,u=e.mode,s=e.impersonatedUser,c=Qm(n,i,o,u,s);return new r(r4,[c],function(){return"BEGIN "+te.json.stringify(c)})},r.commit=function(){return f4},r.rollback=function(){return l4},r.runWithMetadata=function(t,e,n){var i=n===void 0?{}:n,o=i.bookmark,u=i.txConfig,s=i.database,c=i.mode,a=i.impersonatedUser,f=Qm(o,u,s,c,a);return new r(Gm,[t,e,f],function(){return"RUN "+t+" "+te.json.stringify(e)+" "+te.json.stringify(f)})},r.goodbye=function(){return h4},r.pull=function(t){var e=t===void 0?{}:t,n=e.stmtId,i=n===void 0?ao:n,o=e.n,u=o===void 0?ku:o,s=Xm(i??ao,u||ku);return new r(u4,[s],function(){return"PULL "+te.json.stringify(s)})},r.discard=function(t){var e=t===void 0?{}:t,n=e.stmtId,i=n===void 0?ao:n,o=e.n,u=o===void 0?ku:o,s=Xm(i??ao,u||ku);return new r(o4,[s],function(){return"DISCARD "+te.json.stringify(s)})},r.route=function(t,e,n){return t===void 0&&(t={}),e===void 0&&(e=[]),n===void 0&&(n=null),new r(Km,[t,e,n],function(){return"ROUTE "+te.json.stringify(t)+" "+te.json.stringify(e)+" "+n})},r.routeV4x4=function(t,e,n){t===void 0&&(t={}),e===void 0&&(e=[]),n===void 0&&(n={});var i={};return n.databaseName&&(i.db=n.databaseName),n.impersonatedUser&&(i.imp_user=n.impersonatedUser),new r(Km,[t,e,i],function(){return"ROUTE "+te.json.stringify(t)+" "+te.json.stringify(e)+" "+te.json.stringify(i)})},r}();gl.default=Hr;function Qm(r,t,e,n,i){var o={};return r.isEmpty()||(o.bookmarks=r.values()),t.timeout&&(o.tx_timeout=t.timeout),t.metadata&&(o.tx_metadata=t.metadata),e&&(o.db=Zm(e,"database")),i&&(o.imp_user=Zm(i,"impersonatedUser")),n===QV&&(o.mode=s4),o}function Xm(r,t){var e={n:(0,te.int)(t)};return r!==ao&&(e.qid=(0,te.int)(r)),e}var a4=new Hr($V,[],function(){return"PULL_ALL"}),c4=new Hr(JV,[],function(){return"RESET"}),f4=new Hr(n4,[],function(){return"COMMIT"}),l4=new Hr(i4,[],function(){return"ROLLBACK"}),h4=new Hr(t4,[],function(){return"GOODBYE"})});var El=l(co=>{"use strict";var Sl=co&&co.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(co,"__esModule",{value:!0});var Uu=function(){function r(){}return r.ofRecord=function(t){return t===null?r.ofNull():new d4(t)},r.ofMessageResponse=function(t){return t===null?r.ofNull():new p4(t)},r.ofNull=function(){return new _4},Object.defineProperty(r.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),r}();co.default=Uu;var p4=function(r){Sl(t,r);function t(e){var n=r.call(this)||this;return n._response=e,n}return Object.defineProperty(t.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNull",{get:function(){return this._response===null},enumerable:!1,configurable:!0}),t}(Uu),_4=function(r){Sl(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),t}(Uu),d4=function(r){Sl(t,r);function t(e){var n=r.call(this)||this;return n._record=e,n}return Object.defineProperty(t.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNull",{get:function(){return this._record===null},enumerable:!1,configurable:!0}),t}(Uu)});var Je=l(B=>{"use strict";var Zt=B&&B.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),v4=B&&B.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(B,"__esModule",{value:!0});B.ProcedureRouteObserver=B.RouteObserver=B.CompletedObserver=B.FailedObserver=B.ResetObserver=B.LoginObserver=B.ResultStreamObserver=B.StreamObserver=void 0;var qe=P(),eO=v4(El()),$m=qe.internal.constants.FETCH_ALL,zr=qe.error.PROTOCOL_ERROR,Yr=function(){function r(){}return r.prototype.onNext=function(t){},r.prototype.onError=function(t){},r.prototype.onCompleted=function(t){},r}();B.StreamObserver=Yr;var wl=function(r){Zt(t,r);function t(e){var n=e===void 0?{}:e,i=n.reactive,o=i===void 0?!1:i,u=n.moreFunction,s=n.discardFunction,c=n.fetchSize,a=c===void 0?$m:c,f=n.beforeError,h=n.afterError,p=n.beforeKeys,y=n.afterKeys,O=n.beforeComplete,w=n.afterComplete,z=n.server,S=r.call(this)||this;return S._fieldKeys=null,S._fieldLookup=null,S._head=null,S._queuedRecords=[],S._tail=null,S._error=null,S._observers=[],S._meta={},S._server=z,S._beforeError=f,S._afterError=h,S._beforeKeys=p,S._afterKeys=y,S._beforeComplete=O,S._afterComplete=w,S._queryId=null,S._moreFunction=u,S._discardFunction=s,S._discard=!1,S._fetchSize=a,S._setState(o?me.READY:me.READY_STREAMING),S._setupAuoPull(a),S}return t.prototype.onNext=function(e){var n=new qe.Record(this._fieldKeys,e,this._fieldLookup);this._observers.some(function(i){return i.onNext})?this._observers.forEach(function(i){i.onNext&&i.onNext(n)}):(this._queuedRecords.push(n),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},t.prototype.onCompleted=function(e){this._state.onSuccess(this,e)},t.prototype.onError=function(e){this._state.onError(this,e)},t.prototype.cancel=function(){this._discard=!0},t.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(me.STREAMING)},t.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(me.SUCCEEDED)},t.prototype.subscribe=function(e){if(this._error){e.onError(this._error);return}if(this._head&&e.onKeys&&e.onKeys(this._head),this._queuedRecords.length>0&&e.onNext)for(var n=0;n<this._queuedRecords.length;n++)e.onNext(this._queuedRecords[n]),this._queuedRecords.length-n-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===me.READY&&this._handleStreaming());this._tail&&e.onCompleted&&e.onCompleted(this._tail),this._observers.push(e),this._state===me.READY&&this._handleStreaming()},t.prototype._handleHasMore=function(e){this._setState(me.READY),this._handleStreaming(),delete e.has_more},t.prototype._handlePullSuccess=function(e){var n=this;this._setState(me.SUCCEEDED);var i=Object.assign(this._server?{server:this._server}:{},this._meta,e),o=null;this._beforeComplete&&(o=this._beforeComplete(i));var u=function(){n._tail=i,n._observers.some(function(s){return s.onCompleted})&&n._observers.forEach(function(s){s.onCompleted&&s.onCompleted(i)}),n._afterComplete&&n._afterComplete(i)};o?Promise.resolve(o).then(function(){return u()}):u()},t.prototype._handleRunSuccess=function(e,n){var i=this;if(this._fieldKeys===null){if(this._fieldKeys=[],this._fieldLookup={},e.fields&&e.fields.length>0){this._fieldKeys=e.fields;for(var o=0;o<e.fields.length;o++)this._fieldLookup[e.fields[o]]=o;delete e.fields}e.qid!==null&&e.qid!==void 0&&(this._queryId=e.qid,delete e.qid),this._storeMetadataForCompletion(e);var u=null;this._beforeKeys&&(u=this._beforeKeys(this._fieldKeys));var s=function(){i._head=i._fieldKeys,i._observers.some(function(c){return c.onKeys})&&i._observers.forEach(function(c){c.onKeys&&c.onKeys(i._fieldKeys)}),i._afterKeys&&i._afterKeys(i._fieldKeys),n()};u?Promise.resolve(u).then(function(){return s()}):s()}},t.prototype._handleError=function(e){var n=this;this._setState(me.FAILED),this._error=e;var i=null;this._beforeError&&(i=this._beforeError(e));var o=function(){n._observers.some(function(u){return u.onError})&&n._observers.forEach(function(u){u.onError&&u.onError(e)}),n._afterError&&n._afterError(e)};i?Promise.resolve(i).then(function(){return o()}):o()},t.prototype._handleStreaming=function(){this._head&&this._observers.some(function(e){return e.onNext||e.onCompleted})&&(this._discard?(this._discardFunction(this._queryId,this),this._setState(me.STREAMING)):this._autoPull&&(this._moreFunction(this._queryId,this._fetchSize,this),this._setState(me.STREAMING)))},t.prototype._storeMetadataForCompletion=function(e){for(var n=Object.keys(e),i=n.length,o="";i--;)o=n[i],this._meta[o]=e[o]},t.prototype._setState=function(e){this._state=e},t.prototype._setupAuoPull=function(e){this._autoPull=!0,e===$m?(this._lowRecordWatermark=Number.MAX_VALUE,this._highRecordWatermark=Number.MAX_VALUE):(this._lowRecordWatermark=.3*e,this._highRecordWatermark=.7*e)},t}(Yr);B.ResultStreamObserver=wl;var b4=function(r){Zt(t,r);function t(e){var n=e===void 0?{}:e,i=n.onError,o=n.onCompleted,u=r.call(this)||this;return u._onError=i,u._onCompleted=o,u}return t.prototype.onNext=function(e){this.onError((0,qe.newError)("Received RECORD when initializing "+qe.json.stringify(e)))},t.prototype.onError=function(e){this._onError&&this._onError(e)},t.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(e)},t}(Yr);B.LoginObserver=b4;var y4=function(r){Zt(t,r);function t(e){var n=e===void 0?{}:e,i=n.onProtocolError,o=n.onError,u=n.onComplete,s=r.call(this)||this;return s._onProtocolError=i,s._onError=o,s._onComplete=u,s}return t.prototype.onNext=function(e){this.onError((0,qe.newError)("Received RECORD when resetting: received record is: "+qe.json.stringify(e),zr))},t.prototype.onError=function(e){e.code===zr&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},t.prototype.onCompleted=function(e){this._onComplete&&this._onComplete(e)},t}(Yr);B.ResetObserver=y4;var m4=function(r){Zt(t,r);function t(e){var n=e.error,i=e.onError,o=r.call(this,{beforeError:i})||this;return o.onError(n),o}return t}(wl);B.FailedObserver=m4;var O4=function(r){Zt(t,r);function t(){var e=r.call(this)||this;return r.prototype.markCompleted.call(e),e}return t}(wl);B.CompletedObserver=O4;var g4=function(r){Zt(t,r);function t(e){var n=e.resultObserver,i=e.onProtocolError,o=e.onError,u=e.onCompleted,s=r.call(this)||this;return s._resultObserver=n,s._onError=o,s._onCompleted=u,s._records=[],s._onProtocolError=i,n.subscribe(s),s}return t.prototype.onNext=function(e){this._records.push(e)},t.prototype.onError=function(e){e.code===zr&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},t.prototype.onCompleted=function(){if(this._records!==null&&this._records.length!==1){this.onError((0,qe.newError)("Illegal response from router. Received "+this._records.length+` records but expected only one.
`+qe.json.stringify(this._records),zr));return}this._onCompleted&&this._onCompleted(eO.default.ofRecord(this._records[0]))},t}(Yr);B.ProcedureRouteObserver=g4;var S4=function(r){Zt(t,r);function t(e){var n=e===void 0?{}:e,i=n.onProtocolError,o=n.onError,u=n.onCompleted,s=r.call(this)||this;return s._onProtocolError=i,s._onError=o,s._onCompleted=u,s}return t.prototype.onNext=function(e){this.onError((0,qe.newError)("Received RECORD when resetting: received record is: "+qe.json.stringify(e),zr))},t.prototype.onError=function(e){e.code===zr&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},t.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(eO.default.ofMessageResponse(e))},t}(Yr);B.RouteObserver=S4;var me={READY_STREAMING:{onSuccess:function(r,t){r._handleRunSuccess(t,function(){r._setState(me.STREAMING)})},onError:function(r,t){r._handleError(t)},name:function(){return"READY_STREAMING"}},READY:{onSuccess:function(r,t){r._handleRunSuccess(t,function(){return r._handleStreaming()})},onError:function(r,t){r._handleError(t)},name:function(){return"READY"}},STREAMING:{onSuccess:function(r,t){t.has_more?r._handleHasMore(t):r._handlePullSuccess(t)},onError:function(r,t){r._handleError(t)},name:function(){return"STREAMING"}},FAILED:{onError:function(r){},name:function(){return"FAILED"}},SUCCEEDED:{name:function(){return"SUCCEEDED"}}}});var Cl=l(fo=>{"use strict";var E4=fo&&fo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fo,"__esModule",{value:!0});var Tl=Du(),tO=Mu(),Lu=E4(Yt()),Pl=Je(),Fu=P(),rO=Fu.internal.bookmark.Bookmark,oO=Fu.internal.constants,nO=oO.ACCESS_MODE_WRITE,w4=oO.BOLT_PROTOCOL_V1,YY=Fu.internal.logger.Logger,iO=Fu.internal.txConfig.TxConfig,T4=function(){function r(t,e,n,i,o,u){var s=n===void 0?{}:n,c=s.disableLosslessIntegers,a=s.useBigInt;i===void 0&&(i=function(){return null}),this._server=t||{},this._chunker=e,this._packer=this._createPacker(e),this._unpacker=this._createUnpacker(c,a),this._responseHandler=i(this),this._log=o,this._onProtocolError=u,this._fatalError=null}return Object.defineProperty(r.prototype,"version",{get:function(){return w4},enumerable:!1,configurable:!0}),r.prototype.packer=function(){return this._packer},r.prototype.unpacker=function(){return this._unpacker},r.prototype.transformMetadata=function(t){return t},r.prototype.initialize=function(t){var e=this,n=t===void 0?{}:t,i=n.userAgent,o=n.authToken,u=n.onError,s=n.onComplete,c=new Pl.LoginObserver({onError:function(a){return e._onLoginError(a,u)},onCompleted:function(a){return e._onLoginCompleted(a,s)}});return this.write(Lu.default.init(i,o),c,!0),c},r.prototype.prepareToClose=function(){},r.prototype.beginTransaction=function(t){var e=t===void 0?{}:t,n=e.bookmark,i=e.txConfig,o=e.database,u=e.mode,s=e.impersonatedUser,c=e.beforeError,a=e.afterError,f=e.beforeComplete,h=e.afterComplete;return this.run("BEGIN",n?n.asBeginTransactionParameters():{},{bookmark:n,txConfig:i,database:o,mode:u,impersonatedUser:s,beforeError:c,afterError:a,beforeComplete:f,afterComplete:h,flush:!1})},r.prototype.commitTransaction=function(t){var e=t===void 0?{}:t,n=e.beforeError,i=e.afterError,o=e.beforeComplete,u=e.afterComplete;return this.run("COMMIT",{},{bookmark:rO.empty(),txConfig:iO.empty(),mode:nO,beforeError:n,afterError:i,beforeComplete:o,afterComplete:u})},r.prototype.rollbackTransaction=function(t){var e=t===void 0?{}:t,n=e.beforeError,i=e.afterError,o=e.beforeComplete,u=e.afterComplete;return this.run("ROLLBACK",{},{bookmark:rO.empty(),txConfig:iO.empty(),mode:nO,beforeError:n,afterError:i,beforeComplete:o,afterComplete:u})},r.prototype.run=function(t,e,n){var i=n===void 0?{}:n,o=i.bookmark,u=i.txConfig,s=i.database,c=i.mode,a=i.impersonatedUser,f=i.beforeKeys,h=i.afterKeys,p=i.beforeError,y=i.afterError,O=i.beforeComplete,w=i.afterComplete,z=i.flush,S=z===void 0?!0:z,D=new Pl.ResultStreamObserver({server:this._server,beforeKeys:f,afterKeys:h,beforeError:p,afterError:y,beforeComplete:O,afterComplete:w});return(0,Tl.assertTxConfigIsEmpty)(u,this._onProtocolError,D),(0,Tl.assertDatabaseIsEmpty)(s,this._onProtocolError,D),(0,Tl.assertImpersonatedUserIsEmpty)(a,this._onProtocolError,D),this.write(Lu.default.run(t,e),D,!1),this.write(Lu.default.pullAll(),D,S),D},Object.defineProperty(r.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),r.prototype.reset=function(t){var e=t===void 0?{}:t,n=e.onError,i=e.onComplete,o=new Pl.ResetObserver({onProtocolError:this._onProtocolError,onError:n,onComplete:i});return this.write(Lu.default.reset(),o,!0),o},r.prototype._createPacker=function(t){return new tO.v1.Packer(t)},r.prototype._createUnpacker=function(t,e){return new tO.v1.Unpacker(t,e)},r.prototype.write=function(t,e,n){var i=this,o=this.queueObserverIfProtocolIsNotBroken(e);o&&(this._log.isDebugEnabled()&&this._log.debug("C: "+t),this.packer().packStruct(t.signature,t.fields.map(function(u){return i.packer().packable(u)})),this._chunker.messageBoundary(),n&&this._chunker.flush())},r.prototype.notifyFatalError=function(t){return this._fatalError=t,this._responseHandler._notifyErrorToObservers(t)},r.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},r.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},r.prototype.queueObserverIfProtocolIsNotBroken=function(t){return this.isBroken()?(this.notifyFatalErrorToObserver(t),!1):this._responseHandler._queueObserver(t)},r.prototype.isBroken=function(){return!!this._fatalError},r.prototype.notifyFatalErrorToObserver=function(t){t&&t.onError&&t.onError(this._fatalError)},r.prototype.resetFailure=function(){this._responseHandler._resetFailure()},r.prototype._onLoginCompleted=function(t,e){if(t){var n=t.server;this._server.version||(this._server.version=n)}e&&e(t)},r.prototype._onLoginError=function(t,e){this._onProtocolError(t.message),e&&e(t)},r}();fo.default=T4});var Il=l(Gt=>{"use strict";var P4=Gt&&Gt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),sO=Gt&&Gt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Gt,"__esModule",{value:!0});var C4=sO(Cl()),uO=sO(Mu()),I4=P(),R4=I4.internal.constants.BOLT_PROTOCOL_V2,A4=function(r){P4(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype._createPacker=function(e){return new uO.default.Packer(e)},t.prototype._createUnpacker=function(e,n){return new uO.default.Unpacker(e,n)},Object.defineProperty(t.prototype,"version",{get:function(){return R4},enumerable:!1,configurable:!0}),t}(C4.default);Gt.default=A4});var Al=l($e=>{"use strict";var j4=$e&&$e.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Vu=$e&&$e.__assign||function(){return Vu=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Vu.apply(this,arguments)},aO=$e&&$e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($e,"__esModule",{value:!0});var q4=aO(Il()),Kt=aO(Yt()),Bu=Du(),Qt=Je(),Rl=P(),KY=Rl.internal.bookmark.Bookmark,N4=Rl.internal.constants.BOLT_PROTOCOL_V3,x4=Rl.internal.txConfig.TxConfig,cO="context",D4="CALL dbms.cluster.routing.getRoutingTable($"+cO+")",M4=new Qt.StreamObserver,k4=function(r){j4(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"version",{get:function(){return N4},enumerable:!1,configurable:!0}),t.prototype.transformMetadata=function(e){return"t_first"in e&&(e.result_available_after=e.t_first,delete e.t_first),"t_last"in e&&(e.result_consumed_after=e.t_last,delete e.t_last),e},t.prototype.initialize=function(e){var n=this,i=e===void 0?{}:e,o=i.userAgent,u=i.authToken,s=i.onError,c=i.onComplete,a=new Qt.LoginObserver({onError:function(f){return n._onLoginError(f,s)},onCompleted:function(f){return n._onLoginCompleted(f,c)}});return this.write(Kt.default.hello(o,u),a,!0),a},t.prototype.prepareToClose=function(){this.write(Kt.default.goodbye(),M4,!0)},t.prototype.beginTransaction=function(e){var n=e===void 0?{}:e,i=n.bookmark,o=n.txConfig,u=n.database,s=n.impersonatedUser,c=n.mode,a=n.beforeError,f=n.afterError,h=n.beforeComplete,p=n.afterComplete,y=new Qt.ResultStreamObserver({server:this._server,beforeError:a,afterError:f,beforeComplete:h,afterComplete:p});return y.prepareToHandleSingleResponse(),(0,Bu.assertDatabaseIsEmpty)(u,this._onProtocolError,y),(0,Bu.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,y),this.write(Kt.default.begin({bookmark:i,txConfig:o,mode:c}),y,!0),y},t.prototype.commitTransaction=function(e){var n=e===void 0?{}:e,i=n.beforeError,o=n.afterError,u=n.beforeComplete,s=n.afterComplete,c=new Qt.ResultStreamObserver({server:this._server,beforeError:i,afterError:o,beforeComplete:u,afterComplete:s});return c.prepareToHandleSingleResponse(),this.write(Kt.default.commit(),c,!0),c},t.prototype.rollbackTransaction=function(e){var n=e===void 0?{}:e,i=n.beforeError,o=n.afterError,u=n.beforeComplete,s=n.afterComplete,c=new Qt.ResultStreamObserver({server:this._server,beforeError:i,afterError:o,beforeComplete:u,afterComplete:s});return c.prepareToHandleSingleResponse(),this.write(Kt.default.rollback(),c,!0),c},t.prototype.run=function(e,n,i){var o=i===void 0?{}:i,u=o.bookmark,s=o.txConfig,c=o.database,a=o.impersonatedUser,f=o.mode,h=o.beforeKeys,p=o.afterKeys,y=o.beforeError,O=o.afterError,w=o.beforeComplete,z=o.afterComplete,S=o.flush,D=S===void 0?!0:S,W=new Qt.ResultStreamObserver({server:this._server,beforeKeys:h,afterKeys:p,beforeError:y,afterError:O,beforeComplete:w,afterComplete:z});return(0,Bu.assertDatabaseIsEmpty)(c,this._onProtocolError,W),(0,Bu.assertImpersonatedUserIsEmpty)(a,this._onProtocolError,W),this.write(Kt.default.runWithMetadata(e,n,{bookmark:u,txConfig:s,mode:f}),W,!1),this.write(Kt.default.pullAll(),W,D),W},t.prototype.requestRoutingInformation=function(e){var n,i=e.routingContext,o=i===void 0?{}:i,u=e.sessionContext,s=u===void 0?{}:u,c=e.onError,a=e.onCompleted,f=this.run(D4,(n={},n[cO]=o,n),Vu(Vu({},s),{txConfig:x4.empty()}));return new Qt.ProcedureRouteObserver({resultObserver:f,onProtocolError:this._onProtocolError,onError:c,onCompleted:a})},t}(q4.default);$e.default=k4});var Nl=l(et=>{"use strict";var U4=et&&et.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Wu=et&&et.__assign||function(){return Wu=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Wu.apply(this,arguments)},lO=et&&et.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(et,"__esModule",{value:!0});var L4=lO(Al()),lo=lO(Yt()),fO=Du(),jl=Je(),ql=P(),XY=ql.internal.bookmark.Bookmark,hO=ql.internal.constants,F4=hO.BOLT_PROTOCOL_V4_0,B4=hO.FETCH_ALL,V4=ql.internal.txConfig.TxConfig,pO="context",_O="database",W4="CALL dbms.routing.getRoutingTable($"+pO+", $"+_O+")",H4=function(r){U4(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"version",{get:function(){return F4},enumerable:!1,configurable:!0}),t.prototype.beginTransaction=function(e){var n=e===void 0?{}:e,i=n.bookmark,o=n.txConfig,u=n.database,s=n.impersonatedUser,c=n.mode,a=n.beforeError,f=n.afterError,h=n.beforeComplete,p=n.afterComplete,y=new jl.ResultStreamObserver({server:this._server,beforeError:a,afterError:f,beforeComplete:h,afterComplete:p});return y.prepareToHandleSingleResponse(),(0,fO.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,y),this.write(lo.default.begin({bookmark:i,txConfig:o,database:u,mode:c}),y,!0),y},t.prototype.run=function(e,n,i){var o=i===void 0?{}:i,u=o.bookmark,s=o.txConfig,c=o.database,a=o.impersonatedUser,f=o.mode,h=o.beforeKeys,p=o.afterKeys,y=o.beforeError,O=o.afterError,w=o.beforeComplete,z=o.afterComplete,S=o.flush,D=S===void 0?!0:S,W=o.reactive,fe=W===void 0?!1:W,Gr=o.fetchSize,Kr=Gr===void 0?B4:Gr,ut=new jl.ResultStreamObserver({server:this._server,reactive:fe,fetchSize:Kr,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:y,afterError:O,beforeComplete:w,afterComplete:z});(0,fO.assertImpersonatedUserIsEmpty)(a,this._onProtocolError,ut);var cs=fe;return this.write(lo.default.runWithMetadata(e,n,{bookmark:u,txConfig:s,database:c,mode:f}),ut,cs&&D),fe||this.write(lo.default.pull({n:Kr}),ut,D),ut},t.prototype._requestMore=function(e,n,i){this.write(lo.default.pull({stmtId:e,n}),i,!0)},t.prototype._requestDiscard=function(e,n){this.write(lo.default.discard({stmtId:e}),n,!0)},t.prototype._noOp=function(){},t.prototype.requestRoutingInformation=function(e){var n,i=e.routingContext,o=i===void 0?{}:i,u=e.databaseName,s=u===void 0?null:u,c=e.sessionContext,a=c===void 0?{}:c,f=e.onError,h=e.onCompleted,p=this.run(W4,(n={},n[pO]=o,n[_O]=s,n),Wu(Wu({},a),{txConfig:V4.empty()}));return new jl.ProcedureRouteObserver({resultObserver:p,onProtocolError:this._onProtocolError,onError:f,onCompleted:h})},t}(L4.default);et.default=H4});var xl=l(Xt=>{"use strict";var z4=Xt&&Xt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),dO=Xt&&Xt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xt,"__esModule",{value:!0});var Y4=dO(Nl()),Z4=dO(Yt()),G4=Je(),K4=P(),Q4=K4.internal.constants.BOLT_PROTOCOL_V4_1,X4=function(r){z4(t,r);function t(e,n,i,o,u,s,c){o===void 0&&(o=function(){return null});var a=r.call(this,e,n,i,o,u,s)||this;return a._serversideRouting=c,a}return Object.defineProperty(t.prototype,"version",{get:function(){return Q4},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){var n=this,i=e===void 0?{}:e,o=i.userAgent,u=i.authToken,s=i.onError,c=i.onComplete,a=new G4.LoginObserver({onError:function(f){return n._onLoginError(f,s)},onCompleted:function(f){return n._onLoginCompleted(f,c)}});return this.write(Z4.default.hello(o,u,this._serversideRouting),a,!0),a},t}(Y4.default);Xt.default=X4});var Dl=l(Jt=>{"use strict";var J4=Jt&&Jt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),$4=Jt&&Jt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Jt,"__esModule",{value:!0});var eW=$4(xl()),tW=P(),rW=tW.internal.constants.BOLT_PROTOCOL_V4_2,nW=function(r){J4(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"version",{get:function(){return rW},enumerable:!1,configurable:!0}),t}(eW.default);Jt.default=nW});var Hu=l($t=>{"use strict";var iW=$t&&$t.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),bO=$t&&$t.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($t,"__esModule",{value:!0});var oW=bO(Dl()),vO=bO(Yt()),uW=Je(),sW=Je(),yO=P(),aW=yO.internal.bookmark.Bookmark,cW=yO.internal.constants.BOLT_PROTOCOL_V4_3,fW=function(r){iW(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"version",{get:function(){return cW},enumerable:!1,configurable:!0}),t.prototype.requestRoutingInformation=function(e){var n=e.routingContext,i=n===void 0?{}:n,o=e.databaseName,u=o===void 0?null:o,s=e.sessionContext,c=s===void 0?{}:s,a=e.onError,f=e.onCompleted,h=new uW.RouteObserver({onProtocolError:this._onProtocolError,onError:a,onCompleted:f}),p=c.bookmark||aW.empty();return this.write(vO.default.route(i,p.values(),u),h,!0),h},t.prototype.initialize=function(e){var n=this,i=e===void 0?{}:e,o=i.userAgent,u=i.authToken,s=i.onError,c=i.onComplete,a=new sW.LoginObserver({onError:function(f){return n._onLoginError(f,s)},onCompleted:function(f){return f.patch_bolt!==void 0&&n._applyPatches(f.patch_bolt),n._onLoginCompleted(f,c)}});return this.write(vO.default.hello(o,u,this._serversideRouting,["utc"]),a,!0),a},t.prototype._applyPatches=function(e){e.includes("utc")&&this._applyUtcPatch()},t.prototype._applyUtcPatch=function(){this._packer.useUtc=!0,this._unpacker.useUtc=!0},t}(oW.default);$t.default=fW});var SO=l(er=>{"use strict";var lW=er&&er.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),mO=er&&er.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(er,"__esModule",{value:!0});var hW=mO(Hu()),OO=P(),zu=mO(Yt()),Ml=Je(),gO=OO.internal.constants,pW=gO.BOLT_PROTOCOL_V4_4,_W=gO.FETCH_ALL,dW=OO.internal.bookmark.Bookmark,vW=function(r){lW(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"version",{get:function(){return pW},enumerable:!1,configurable:!0}),t.prototype.requestRoutingInformation=function(e){var n=e.routingContext,i=n===void 0?{}:n,o=e.databaseName,u=o===void 0?null:o,s=e.impersonatedUser,c=s===void 0?null:s,a=e.sessionContext,f=a===void 0?{}:a,h=e.onError,p=e.onCompleted,y=new Ml.RouteObserver({onProtocolError:this._onProtocolError,onError:h,onCompleted:p}),O=f.bookmark||dW.empty();return this.write(zu.default.routeV4x4(i,O.values(),{databaseName:u,impersonatedUser:c}),y,!0),y},t.prototype.run=function(e,n,i){var o=i===void 0?{}:i,u=o.bookmark,s=o.txConfig,c=o.database,a=o.mode,f=o.impersonatedUser,h=o.beforeKeys,p=o.afterKeys,y=o.beforeError,O=o.afterError,w=o.beforeComplete,z=o.afterComplete,S=o.flush,D=S===void 0?!0:S,W=o.reactive,fe=W===void 0?!1:W,Gr=o.fetchSize,Kr=Gr===void 0?_W:Gr,ut=new Ml.ResultStreamObserver({server:this._server,reactive:fe,fetchSize:Kr,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:y,afterError:O,beforeComplete:w,afterComplete:z}),cs=fe;return this.write(zu.default.runWithMetadata(e,n,{bookmark:u,txConfig:s,database:c,mode:a,impersonatedUser:f}),ut,cs&&D),fe||this.write(zu.default.pull({n:Kr}),ut,D),ut},t.prototype.beginTransaction=function(e){var n=e===void 0?{}:e,i=n.bookmark,o=n.txConfig,u=n.database,s=n.mode,c=n.impersonatedUser,a=n.beforeError,f=n.afterError,h=n.beforeComplete,p=n.afterComplete,y=new Ml.ResultStreamObserver({server:this._server,beforeError:a,afterError:f,beforeComplete:h,afterComplete:p});return y.prepareToHandleSingleResponse(),this.write(zu.default.begin({bookmark:i,txConfig:o,database:u,mode:s,impersonatedUser:c}),y,!0),y},t}(hW.default);er.default=vW});var wO=l(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});var tr=P(),bW=112,yW=113,mW=126,OW=127;function tt(){}function EO(r){return r}var gW={onNext:tt,onCompleted:tt,onError:tt},SW=function(){function r(t){var e=t===void 0?{}:t,n=e.transformMetadata,i=e.log,o=e.observer;this._pendingObservers=[],this._log=i,this._transformMetadata=n||EO,this._observer=Object.assign({onPendingObserversChange:tt,onError:tt,onFailure:tt,onErrorApplyTransformation:EO},o)}return Object.defineProperty(r.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),r.prototype.handleResponse=function(t){var e=t.fields[0];switch(t.signature){case yW:this._log.isDebugEnabled()&&this._log.debug("S: RECORD "+tr.json.stringify(t)),this._currentObserver.onNext(e);break;case bW:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS "+tr.json.stringify(t));try{var n=this._transformMetadata(e);this._currentObserver.onCompleted(n)}finally{this._updateCurrentObserver()}break;case OW:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE "+tr.json.stringify(t));try{var i=(0,tr.newError)(e.message,e.code);this._currentFailure=this._observer.onErrorApplyTransformation(i),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case mW:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED "+tr.json.stringify(t));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,tr.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,tr.newError)("Unknown Bolt protocol message: "+t))}},r.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onPendingObserversChange(this._pendingObservers.length)},r.prototype._queueObserver=function(t){return t=t||gW,t.onCompleted=t.onCompleted||tt,t.onError=t.onError||tt,t.onNext=t.onNext||tt,this._currentObserver===void 0?this._currentObserver=t:this._pendingObservers.push(t),this._observer.onPendingObserversChange(this._pendingObservers.length),!0},r.prototype._notifyErrorToObservers=function(t){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(t);this._pendingObservers.length>0;){var e=this._pendingObservers.shift();e&&e.onError&&e.onError(t)}},r.prototype.hasOngoingObservableRequests=function(){return this._currentObserver!=null||this._pendingObservers.length>0},r.prototype._resetFailure=function(){this._currentFailure=null},r}();kl.default=SW});var TO=l(ho=>{"use strict";var rt=ho&&ho.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ho,"__esModule",{value:!0});var EW=P(),wW=rt(Cl()),TW=rt(Il()),PW=rt(Al()),CW=rt(Nl()),IW=rt(xl()),RW=rt(Dl()),AW=rt(Hu()),jW=rt(SO()),qW=rt(wO());function NW(r){var t=r===void 0?{}:r,e=t.version,n=t.chunker,i=t.dechunker,o=t.channel,u=t.disableLosslessIntegers,s=t.useBigInt,c=t.serversideRouting,a=t.server,f=t.log,h=t.observer,p=function(y){var O=new qW.default({transformMetadata:y.transformMetadata.bind(y),log:f,observer:h});return o.onerror=h.onError.bind(h),o.onmessage=function(w){return i.write(w)},i.onmessage=function(w){try{O.handleResponse(y.unpacker().unpack(w))}catch(z){return h.onError(z)}},O};return xW(e,a,n,{disableLosslessIntegers:u,useBigInt:s},c,p,h.onProtocolError.bind(h),f)}ho.default=NW;function xW(r,t,e,n,i,o,u,s){switch(r){case 1:return new wW.default(t,e,n,o,s,u);case 2:return new TW.default(t,e,n,o,s,u);case 3:return new PW.default(t,e,n,o,s,u);case 4:return new CW.default(t,e,n,o,s,u);case 4.1:return new IW.default(t,e,n,o,s,u,i);case 4.2:return new RW.default(t,e,n,o,s,u,i);case 4.3:return new AW.default(t,e,n,o,s,u,i);case 4.4:return new jW.default(t,e,n,o,s,u,i);default:throw(0,EW.newError)("Unknown Bolt protocol version: "+r)}}});var Zu=l(se=>{"use strict";var DW=se&&se.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),MW=se&&se.__exportStar||function(r,t){for(var e in r)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&DW(t,r,e)},Yu=se&&se.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(se,"__esModule",{value:!0});se.RawRoutingTable=se.BoltProtocol=void 0;var kW=Yu(Qy()),UW=Yu(TO()),LW=Yu(Hu()),FW=Yu(El());MW(Je(),se);se.BoltProtocol=LW.default;se.RawRoutingTable=FW.default;se.default={handshake:kW.default,create:UW.default}});var Ul=l(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.DEFAULT_ACQUISITION_TIMEOUT=rr.DEFAULT_MAX_SIZE=void 0;var Gu=100;rr.DEFAULT_MAX_SIZE=Gu;var Ku=60*1e3;rr.DEFAULT_ACQUISITION_TIMEOUT=Ku;var BW=function(){function r(t,e){this.maxSize=PO(t,Gu),this.acquisitionTimeout=PO(e,Ku)}return r.defaultConfig=function(){return new r(Gu,Ku)},r.fromDriverConfig=function(t){var e=CO(t.maxConnectionPoolSize),n=e?t.maxConnectionPoolSize:Gu,i=CO(t.connectionAcquisitionTimeout),o=i?t.connectionAcquisitionTimeout:Ku;return new r(n,o)},r}();rr.default=BW;function PO(r,t){return r===0||r?r:t}function CO(r){return r===0||r}});var AO=l(nt=>{"use strict";var Qu=nt&&nt.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return new(e||(e=Promise))(function(o,u){function s(f){try{a(n.next(f))}catch(h){u(h)}}function c(f){try{a(n.throw(f))}catch(h){u(h)}}function a(f){f.done?o(f.value):i(f.value).then(s,c)}a((n=n.apply(r,t||[])).next())})},Xu=nt&&nt.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(a){return function(f){return c([a,f])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,i=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){e.label=a[1];break}if(a[0]===6&&e.label<o[1]){e.label=o[1],o=a;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(a);break}o[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(r,e)}catch(f){a=[6,f],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},VW=nt&&nt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(nt,"__esModule",{value:!0});var WW=VW(Ul()),Ll=P(),HW=Ll.internal.logger.Logger,zW=function(){function r(t){var e=t===void 0?{}:t,n=e.create,i=n===void 0?function(S,D){return Promise.resolve()}:n,o=e.destroy,u=o===void 0?function(S){return Promise.resolve()}:o,s=e.validate,c=s===void 0?function(S){return!0}:s,a=e.installIdleObserver,f=a===void 0?function(S,D){}:a,h=e.removeIdleObserver,p=h===void 0?function(S){}:h,y=e.config,O=y===void 0?WW.default.defaultConfig():y,w=e.log,z=w===void 0?HW.noOp():w;this._create=i,this._destroy=u,this._validate=c,this._installIdleObserver=f,this._removeIdleObserver=p,this._maxSize=O.maxSize,this._acquisitionTimeout=O.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._poolState={},this._release=this._release.bind(this),this._log=z,this._closed=!1}return r.prototype.acquire=function(t){var e=this;return this._acquire(t).then(function(n){var i=t.asKey();if(n)return n;var o=e._acquireRequests,u=o[i];return u||(o[i]=[]),new Promise(function(s,c){var a,f=setTimeout(function(){var h=o[i];if(h&&(o[i]=h.filter(function(O){return O!==a})),!a.isCompleted()){var p=e.activeResourceCount(t),y=e.has(t)?e._pools[i].length:0;a.reject((0,Ll.newError)("Connection acquisition timed out in "+e._acquisitionTimeout+" ms. Pool status: Active conn count = "+p+", Idle conn count = "+y+"."))}},e._acquisitionTimeout);a=new ZW(i,s,c,f,e._log),o[i].push(a)})})},r.prototype.purge=function(t){return this._purgeKey(t.asKey())},r.prototype.close=function(){return Qu(this,void 0,void 0,function(){var t=this;return Xu(this,function(e){switch(e.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(n){return t._purgeKey(n)}))];case 1:return[2,e.sent()]}})})},r.prototype.keepAll=function(t){var e=this,n=t.map(function(u){return u.asKey()}),i=Object.keys(this._pools),o=i.filter(function(u){return n.indexOf(u)===-1});return Promise.all(o.map(function(u){return e._purgeKey(u)}))},r.prototype.has=function(t){return t.asKey()in this._pools},r.prototype.activeResourceCount=function(t){return this._activeResourceCounts[t.asKey()]||0},r.prototype._acquire=function(t){return Qu(this,void 0,void 0,function(){var e,n,i,o,u,s,c=this;return Xu(this,function(a){switch(a.label){case 0:if(this._closed)throw(0,Ll.newError)("Pool is closed, it is no more able to serve requests.");e=t.asKey(),n=this._pools[e],i=this._poolState[e],n||(n=[],i=new RO,this._pools[e]=n,this._pendingCreates[e]=0,this._poolState[e]=i),a.label=1;case 1:return n.length?(o=n.pop(),this._validate(o)?(this._removeIdleObserver&&this._removeIdleObserver(o),IO(e,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug(o+" acquired from the pool "+e),[2,o]):[3,2]):[3,5];case 2:return[4,this._destroy(o)];case 3:a.sent(),a.label=4;case 4:return[3,1];case 5:if(this._maxSize>0&&(u=this.activeResourceCount(t)+this._pendingCreates[e],u>=this._maxSize))return[2,null];this._pendingCreates[e]=this._pendingCreates[e]+1,a.label=6;case 6:return a.trys.push([6,,8,9]),[4,this._create(t,function(f,h){return c._release(i,f,h)})];case 7:return s=a.sent(),IO(e,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug(s+" created for the pool "+e),[3,9];case 8:return this._pendingCreates[e]=this._pendingCreates[e]-1,[7];case 9:return[2,s]}})})},r.prototype._release=function(t,e,n){return Qu(this,void 0,void 0,function(){var i,o,u=this;return Xu(this,function(s){switch(s.label){case 0:return i=e.asKey(),o=this._pools[i],o&&t&&t.isActive()?this._validate(n)?[3,2]:(this._log.isDebugEnabled()&&this._log.debug(n+" destroyed and can't be released to the pool "+i+" because it is not functional"),[4,this._destroy(n)]):[3,4];case 1:return s.sent(),[3,3];case 2:this._installIdleObserver&&this._installIdleObserver(n,{onError:function(c){u._log.debug("Idle connection "+n+" destroyed because of error: "+c);var a=u._pools[i];a&&(u._pools[i]=a.filter(function(f){return f!==n})),u._destroy(n).catch(function(){})}}),o.push(n),this._log.isDebugEnabled()&&this._log.debug(n+" released to the pool "+i),s.label=3;case 3:return[3,6];case 4:return this._log.isDebugEnabled()&&this._log.debug(n+" destroyed and can't be released to the pool "+i+" because pool has been purged"),[4,this._destroy(n)];case 5:s.sent(),s.label=6;case 6:return YW(i,this._activeResourceCounts),this._processPendingAcquireRequests(e),[2]}})})},r.prototype._purgeKey=function(t){return Qu(this,void 0,void 0,function(){var e,n,i,o;return Xu(this,function(u){switch(u.label){case 0:for(e=this._pools[t]||[],n=this._poolState[t]||new RO,i=[];e.length;)o=e.pop(),this._removeIdleObserver&&this._removeIdleObserver(o),i.push(this._destroy(o));return n.close(),delete this._pools[t],delete this._poolState[t],[4,Promise.all(i)];case 1:return u.sent(),[2]}})})},r.prototype._processPendingAcquireRequests=function(t){var e=this,n=t.asKey(),i=this._acquireRequests[n],o=this._poolState[n];if(i){var u=i.shift();u?this._acquire(t).catch(function(s){return u.reject(s),null}).then(function(s){s&&(u.isCompleted()?e._release(o,t,s):u.resolve(s))}):delete this._acquireRequests[n]}},r}();function IO(r,t){var e=t[r]||0;t[r]=e+1}function YW(r,t){var e=t[r]||0,n=e-1;n>0?t[r]=n:delete t[r]}var ZW=function(){function r(t,e,n,i,o){this._key=t,this._resolve=e,this._reject=n,this._timeoutId=i,this._log=o,this._completed=!1}return r.prototype.isCompleted=function(){return this._completed},r.prototype.resolve=function(t){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug(t+" acquired from the pool "+this._key),this._resolve(t))},r.prototype.reject=function(t){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(t))},r}(),RO=function(){function r(){this._active=!0}return r.prototype.isActive=function(){return this._active},r.prototype.close=function(){this._active=!1},r}();nt.default=zW});var Bl=l(Z=>{"use strict";var GW=Z&&Z.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),KW=Z&&Z.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),QW=Z&&Z.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&GW(t,r,e);return KW(t,r),t},XW=Z&&Z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Z,"__esModule",{value:!0});Z.DEFAULT_MAX_SIZE=Z.DEFAULT_ACQUISITION_TIMEOUT=Z.PoolConfig=Z.Pool=void 0;var Fl=QW(Ul());Z.PoolConfig=Fl.default;Object.defineProperty(Z,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return Fl.DEFAULT_ACQUISITION_TIMEOUT}});Object.defineProperty(Z,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return Fl.DEFAULT_MAX_SIZE}});var jO=XW(AO());Z.Pool=jO.default;Z.default=jO.default});var Vl=l(po=>{"use strict";var JW=po&&po.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(po,"__esModule",{value:!0});var $W=P(),e2=function(r){JW(t,r);function t(e){var n=r.call(this)||this;return n._connection=e,n}return t.prototype.acquireConnection=function(e){var n=e===void 0?{}:e,i=n.accessMode,o=n.database,u=n.bookmarks,s=this._connection;return this._connection=null,Promise.resolve(s)},t}($W.ConnectionProvider);po.default=e2});var Ju=l(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});var t2=function(){function r(t){this._errorHandler=t}return Object.defineProperty(r.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.isOpen=function(){throw new Error("not implemented")},r.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(r.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.connect=function(t,e){throw new Error("not implemented")},r.prototype.write=function(t,e,n){throw new Error("not implemented")},r.prototype.resetAndFlush=function(){throw new Error("not implemented")},r.prototype.close=function(){throw new Error("not implemented")},r.prototype.handleAndTransformError=function(t,e){return this._errorHandler?this._errorHandler.handleAndTransformError(t,e):t},r}();Wl.default=t2});var DO=l(ve=>{"use strict";var r2=ve&&ve.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),n2=ve&&ve.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return new(e||(e=Promise))(function(o,u){function s(f){try{a(n.next(f))}catch(h){u(h)}}function c(f){try{a(n.throw(f))}catch(h){u(h)}}function a(f){f.done?o(f.value):i(f.value).then(s,c)}a((n=n.apply(r,t||[])).next())})},i2=ve&&ve.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(a){return function(f){return c([a,f])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,i=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){e.label=a[1];break}if(a[0]===6&&e.label<o[1]){e.label=o[1],o=a;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(a);break}o[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(r,e)}catch(f){a=[6,f],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},NO=ve&&ve.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ve,"__esModule",{value:!0});ve.createChannelConnection=void 0;var $u=Br(),_o=P(),o2=NO(Ju()),qO=NO(Zu()),u2=_o.error.PROTOCOL_ERROR,s2=_o.internal.logger.Logger,a2=0;function c2(r,t,e,n,i,o){i===void 0&&(i=null),o===void 0&&(o=function(c){return new $u.Channel(c)});var u=new $u.ChannelConfig(r,t,e.errorCode()),s=o(u);return qO.default.handshake(s).then(function(c){var a=c.protocolVersion,f=c.consumeRemainingBuffer,h=new $u.Chunker(s),p=new $u.Dechunker,y=function(w){return qO.default.create({version:a,channel:s,chunker:h,dechunker:p,disableLosslessIntegers:t.disableLosslessIntegers,useBigInt:t.useBigInt,serversideRouting:i,server:w.server,log:w.logger,observer:{onPendingObserversChange:w._handleOngoingRequestsNumberChange.bind(w),onError:w._handleFatalError.bind(w),onFailure:w._resetOnFailure.bind(w),onProtocolError:w._handleProtocolError.bind(w),onErrorApplyTransformation:function(z){return w.handleAndTransformError(z,w._address)}}})},O=new xO(s,e,r,n,t.disableLosslessIntegers,i,h,y);return f(function(w){return p.write(w)}),O}).catch(function(c){return s.close().then(function(){throw c})})}ve.createChannelConnection=c2;var xO=function(r){r2(t,r);function t(e,n,i,o,u,s,c,a){u===void 0&&(u=!1),s===void 0&&(s=null);var f=r.call(this,n)||this;return f._id=a2++,f._address=i,f._server={address:i.asHostPort()},f.creationTimestamp=Date.now(),f._disableLosslessIntegers=u,f._ch=e,f._chunker=c,f._log=f2(f,o),f._serversideRouting=s,f._dbConnectionId=null,f._protocol=a(f),f._isBroken=!1,f._log.isDebugEnabled()&&f._log.debug("created towards "+i),f}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(e){this._dbConnectionId=e},enumerable:!1,configurable:!0}),t.prototype.connect=function(e,n){return this._initialize(e,n)},t.prototype._initialize=function(e,n){var i=this,o=this;return new Promise(function(u,s){i._protocol.initialize({userAgent:e,authToken:n,onError:function(c){return s(c)},onComplete:function(c){if(c){var a=c.server;(!i.version||a)&&(i.version=a);var f=c.connection_id;if(i.databaseId||(i.databaseId=f),c.hints){var h=c.hints["connection.recv_timeout_seconds"];if(h!=null){var p=(0,_o.toNumber)(h);Number.isInteger(p)&&p>0?i._ch.setupReceiveTimeout(p*1e3):i._log.info("Server located at "+i._address+" supplied an invalid connection receive timeout value ("+p+"). Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}}}u(o)}})})},t.prototype.protocol=function(){return this._protocol},Object.defineProperty(t.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._server.version},set:function(e){this._server.version=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),t.prototype._handleFatalError=function(e){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||e,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by "+this._error+" ("+_o.json.stringify(this._error)+")"),this._protocol.notifyFatalError(this._error)},t.prototype._queueObserver=function(e){return this._protocol.queueObserverIfProtocolIsNotBroken(e)},t.prototype.hasOngoingObservableRequests=function(){return this._protocol.hasOngoingObservableRequests()},t.prototype.resetAndFlush=function(){var e=this;return new Promise(function(n,i){e._protocol.reset({onError:function(o){if(e._isBroken)i(o);else{var u=e._handleProtocolError("Received FAILURE as a response for RESET: "+o);i(u)}},onComplete:function(){n()}})})},t.prototype._resetOnFailure=function(){var e=this;!this.isOpen()||this._protocol.reset({onError:function(){e._protocol.resetFailure()},onComplete:function(){e._protocol.resetFailure()}})},t.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},t.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},t.prototype._handleOngoingRequestsNumberChange=function(e){e===0?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout()},t.prototype.close=function(){return n2(this,void 0,void 0,function(){return i2(this,function(e){switch(e.label){case 0:return this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return e.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},t.prototype.toString=function(){return"Connection ["+this.id+"]["+(this.databaseId||"")+"]"},t.prototype._handleProtocolError=function(e){this._protocol.resetFailure(),this._updateCurrentObserver();var n=(0,_o.newError)(e,u2);return this._handleFatalError(n),n},t}(o2.default);ve.default=xO;function f2(r,t){return new s2(t._level,function(e,n){return t._loggerFunction(e,r+" "+n)})}});var MO=l(nr=>{"use strict";var l2=nr&&nr.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),h2=nr&&nr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(nr,"__esModule",{value:!0});var p2=h2(Ju()),_2=function(r){l2(t,r);function t(e,n){var i=r.call(this,n)||this;return n&&(i._originalErrorHandler=e._errorHandler,e._errorHandler=i._errorHandler),i._delegate=e,i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(e){this._delegate.databaseId=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._delegate.version},set:function(e){this._delegate.version=e},enumerable:!1,configurable:!0}),t.prototype.isOpen=function(){return this._delegate.isOpen()},t.prototype.protocol=function(){return this._delegate.protocol()},t.prototype.connect=function(e,n){return this._delegate.connect(e,n)},t.prototype.write=function(e,n,i){return this._delegate.write(e,n,i)},t.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},t.prototype.close=function(){return this._delegate.close()},t.prototype._release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate._release()},t}(p2.default);nr.default=_2});var UO=l(zl=>{"use strict";Object.defineProperty(zl,"__esModule",{value:!0});var kO=P(),d2=kO.error.SERVICE_UNAVAILABLE,v2=kO.error.SESSION_EXPIRED,b2=function(){function r(t,e,n,i){this._errorCode=t,this._handleUnavailability=e||Hl,this._handleWriteFailure=n||Hl,this._handleAuthorizationExpired=i||Hl}return r.create=function(t){var e=t.errorCode,n=t.handleUnavailability,i=t.handleWriteFailure,o=t.handleAuthorizationExpired;return new r(e,n,i,o)},r.prototype.errorCode=function(){return this._errorCode},r.prototype.handleAndTransformError=function(t,e){return y2(t)?this._handleAuthorizationExpired(t,e):m2(t)?this._handleUnavailability(t,e):O2(t)?this._handleWriteFailure(t,e):t},r}();zl.default=b2;function y2(r){return r&&(r.code==="Neo.ClientError.Security.AuthorizationExpired"||r.code==="Neo.ClientError.Security.TokenExpired")}function m2(r){return r?r.code===v2||r.code===d2||r.code==="Neo.TransientError.General.DatabaseUnavailable":!1}function O2(r){return r?r.code==="Neo.ClientError.Cluster.NotALeader"||r.code==="Neo.ClientError.General.ForbiddenOnReadOnlyDatabase":!1}function Hl(r){return r}});var es=l(V=>{"use strict";var g2=V&&V.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),S2=V&&V.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),E2=V&&V.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&g2(t,r,e);return S2(t,r),t},Yl=V&&V.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(V,"__esModule",{value:!0});V.createChannelConnection=V.ConnectionErrorHandler=V.DelegateConnection=V.ChannelConnection=V.Connection=void 0;var LO=Yl(Ju());V.Connection=LO.default;var FO=E2(DO());V.ChannelConnection=FO.default;Object.defineProperty(V,"createChannelConnection",{enumerable:!0,get:function(){return FO.createChannelConnection}});var w2=Yl(MO());V.DelegateConnection=w2.default;var T2=Yl(UO());V.ConnectionErrorHandler=T2.default;V.default=LO.default});var ts=l(re=>{"use strict";var P2=re&&re.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),C2=re&&re.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),I2=re&&re.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),R2=re&&re.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&C2(t,r,e);return I2(t,r),t},A2=re&&re.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return new(e||(e=Promise))(function(o,u){function s(f){try{a(n.next(f))}catch(h){u(h)}}function c(f){try{a(n.throw(f))}catch(h){u(h)}}function a(f){f.done?o(f.value):i(f.value).then(s,c)}a((n=n.apply(r,t||[])).next())})},j2=re&&re.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(a){return function(f){return c([a,f])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,i=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){e.label=a[1];break}if(a[0]===6&&e.label<o[1]){e.label=o[1],o=a;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(a);break}o[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(r,e)}catch(f){a=[6,f],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(re,"__esModule",{value:!0});var BO=es(),VO=R2(Bl()),WO=P(),q2=WO.error.SERVICE_UNAVAILABLE,N2=function(r){P2(t,r);function t(e,n){var i=e.id,o=e.config,u=e.log,s=e.userAgent,c=e.authToken;n===void 0&&(n=null);var a=r.call(this)||this;return a._id=i,a._config=o,a._log=u,a._userAgent=s,a._authToken=c,a._createChannelConnection=n||function(f){return(0,BO.createChannelConnection)(f,a._config,a._createConnectionErrorHandler(),a._log)},a._connectionPool=new VO.default({create:a._createConnection.bind(a),destroy:a._destroyConnection.bind(a),validate:a._validateConnection.bind(a),installIdleObserver:t._installIdleObserverOnConnection.bind(a),removeIdleObserver:t._removeIdleObserverOnConnection.bind(a),config:VO.PoolConfig.fromDriverConfig(o),log:a._log}),a._openConnections={},a}return t.prototype._createConnectionErrorHandler=function(){return new BO.ConnectionErrorHandler(q2)},t.prototype._createConnection=function(e,n){var i=this;return this._createChannelConnection(e).then(function(o){return o._release=function(){return n(e,o)},i._openConnections[o.id]=o,o.connect(i._userAgent,i._authToken).catch(function(u){throw i._destroyConnection(o),u})})},t.prototype._validateConnection=function(e){if(!e.isOpen())return!1;var n=this._config.maxConnectionLifetime,i=Date.now()-e.creationTimestamp;return i<=n},t.prototype._destroyConnection=function(e){return delete this._openConnections[e.id],e.close()},t.prototype.close=function(){return A2(this,void 0,void 0,function(){return j2(this,function(e){switch(e.label){case 0:return[4,this._connectionPool.close()];case 1:return e.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(n){return n.close()}))];case 2:return e.sent(),[2]}})})},t._installIdleObserverOnConnection=function(e,n){e._queueObserver(n)},t._removeIdleObserverOnConnection=function(e){e._updateCurrentObserver()},t}(WO.ConnectionProvider);re.default=N2});var HO=l(Ne=>{"use strict";var x2=Ne&&Ne.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),rs=Ne&&Ne.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return new(e||(e=Promise))(function(o,u){function s(f){try{a(n.next(f))}catch(h){u(h)}}function c(f){try{a(n.throw(f))}catch(h){u(h)}}function a(f){f.done?o(f.value):i(f.value).then(s,c)}a((n=n.apply(r,t||[])).next())})},ns=Ne&&Ne.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(a){return function(f){return c([a,f])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,i=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){e.label=a[1];break}if(a[0]===6&&e.label<o[1]){e.label=o[1],o=a;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(a);break}o[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(r,e)}catch(f){a=[6,f],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},D2=Ne&&Ne.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ne,"__esModule",{value:!0});var M2=D2(ts()),Zl=es(),Gl=P(),Kl=Gl.internal.constants,k2=Kl.BOLT_PROTOCOL_V3,U2=Kl.BOLT_PROTOCOL_V4_0,L2=Kl.BOLT_PROTOCOL_V4_4,F2=Gl.error.SERVICE_UNAVAILABLE,vZ=Gl.error.newError,B2=function(r){x2(t,r);function t(e){var n=e.id,i=e.config,o=e.log,u=e.address,s=e.userAgent,c=e.authToken,a=r.call(this,{id:n,config:i,log:o,userAgent:s,authToken:c})||this;return a._address=u,a}return t.prototype.acquireConnection=function(e){var n=this,i=e===void 0?{}:e,o=i.accessMode,u=i.database,s=i.bookmarks,c=Zl.ConnectionErrorHandler.create({errorCode:F2,handleAuthorizationExpired:function(a,f){return n._handleAuthorizationExpired(a,f,u)}});return this._connectionPool.acquire(this._address).then(function(a){return new Zl.DelegateConnection(a,c)})},t.prototype._handleAuthorizationExpired=function(e,n,i){return this._log.warn("Direct driver "+this._id+" will close connection to "+n+" for database '"+i+"' because of an error "+e.code+" '"+e.message+"'"),this._connectionPool.purge(n).catch(function(){}),e},t.prototype._hasProtocolVersion=function(e){return rs(this,void 0,void 0,function(){var n,i;return ns(this,function(o){switch(o.label){case 0:return[4,(0,Zl.createChannelConnection)(this._address,this._config,this._createConnectionErrorHandler(),this._log)];case 1:return n=o.sent(),i=n.protocol()?n.protocol().version:null,[4,n.close()];case 2:return o.sent(),i?[2,e(i)]:[2,!1]}})})},t.prototype.supportsMultiDb=function(){return rs(this,void 0,void 0,function(){return ns(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=U2})];case 1:return[2,e.sent()]}})})},t.prototype.supportsTransactionConfig=function(){return rs(this,void 0,void 0,function(){return ns(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=k2})];case 1:return[2,e.sent()]}})})},t.prototype.supportsUserImpersonation=function(){return rs(this,void 0,void 0,function(){return ns(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=L2})];case 1:return[2,e.sent()]}})})},t}(M2.default);Ne.default=B2});var th=l(it=>{"use strict";var Ql=it&&it.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],u;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){u={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(u)throw u.error}}return o},Xl=it&&it.__spreadArray||function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(it,"__esModule",{value:!0});it.createValidRoutingTable=void 0;var Oe=P(),YO=Oe.internal.constants,V2=YO.ACCESS_MODE_WRITE,W2=YO.ACCESS_MODE_READ,Jl=Oe.internal.serverAddress.ServerAddress,eh=Oe.error.PROTOCOL_ERROR,H2=1,ZO=function(){function r(t){var e=t===void 0?{}:t,n=e.database,i=e.routers,o=e.readers,u=e.writers,s=e.expirationTime,c=e.ttl;this.database=n||null,this.databaseName=n||"default database",this.routers=i||[],this.readers=o||[],this.writers=u||[],this.expirationTime=s||(0,Oe.int)(0),this.ttl=c}return r.fromRawRoutingTable=function(t,e,n){return GO(t,e,n)},r.prototype.forget=function(t){this.readers=is(this.readers,t),this.writers=is(this.writers,t)},r.prototype.forgetRouter=function(t){this.routers=is(this.routers,t)},r.prototype.forgetWriter=function(t){this.writers=is(this.writers,t)},r.prototype.isStaleFor=function(t){return this.expirationTime.lessThan(Date.now())||this.routers.length<H2||t===W2&&this.readers.length===0||t===V2&&this.writers.length===0},r.prototype.isExpiredFor=function(t){return this.expirationTime.add(t).lessThan(Date.now())},r.prototype.allServers=function(){return Xl(Xl(Xl([],Ql(this.routers),!1),Ql(this.readers),!1),Ql(this.writers),!1)},r.prototype.toString=function(){return"RoutingTable["+("database="+this.databaseName+", ")+("expirationTime="+this.expirationTime+", ")+("currentTime="+Date.now()+", ")+("routers=["+this.routers+"], ")+("readers=["+this.readers+"], ")+("writers=["+this.writers+"]]")},r}();it.default=ZO;function is(r,t){return r.filter(function(e){return e.asKey()!==t.asKey()})}function GO(r,t,e){var n=e.ttl,i=Y2(e,t),o=z2(e,t),u=o.routers,s=o.readers,c=o.writers;return zO(u,"routers",t),zO(s,"readers",t),new ZO({database:r||e.db,routers:u,readers:s,writers:c,expirationTime:i,ttl:n})}it.createValidRoutingTable=GO;function z2(r,t){try{var e=[],n=[],i=[];return r.servers.forEach(function(o){var u=o.role,s=o.addresses;u==="ROUTE"?e=$l(s).map(function(c){return Jl.fromUrl(c)}):u==="WRITE"?i=$l(s).map(function(c){return Jl.fromUrl(c)}):u==="READ"&&(n=$l(s).map(function(c){return Jl.fromUrl(c)}))}),{routers:e,readers:n,writers:i}}catch(o){throw(0,Oe.newError)("Unable to parse servers entry from router "+t+` from addresses:
`+Oe.json.stringify(r.servers)+`
Error message: `+o.message,eh)}}function Y2(r,t){try{var e=(0,Oe.int)(Date.now()),n=(0,Oe.int)(r.ttl).multiply(1e3).add(e);return n.lessThan(e)?Oe.Integer.MAX_VALUE:n}catch(i){throw(0,Oe.newError)("Unable to parse TTL entry from router "+t+` from raw routing table:
`+Oe.json.stringify(r)+`
Error message: `+i.message,eh)}}function zO(r,t,e){if(r.length===0)throw(0,Oe.newError)("Received no "+t+" from router "+e,eh)}function $l(r){if(!Array.isArray(r))throw new TypeError("Array expected but got: "+r);return Array.from(r)}});var QO=l(vo=>{"use strict";var Z2=vo&&vo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vo,"__esModule",{value:!0});var G2=Z2(th()),K2=Zu(),KO=P(),Q2=KO.error.SERVICE_UNAVAILABLE,X2="Neo.ClientError.Procedure.ProcedureNotFound",J2="Neo.ClientError.Database.DatabaseNotFound",$2=function(){function r(t){this._routingContext=t}return r.prototype.lookupRoutingTableOnRouter=function(t,e,n,i){var o=this;return t._acquireConnection(function(u){return o._requestRawRoutingTable(u,t,e,n,i).then(function(s){return s.isNull?null:G2.default.fromRawRoutingTable(e,n,s)})})},r.prototype._requestRawRoutingTable=function(t,e,n,i,o){var u=this;return new Promise(function(s,c){t.protocol().requestRoutingInformation({routingContext:u._routingContext,databaseName:n,impersonatedUser:o,sessionContext:{bookmark:e._lastBookmark,mode:e._mode,database:e._database,afterComplete:e._onComplete},onCompleted:s,onError:function(a){a.code===J2?c(a):a.code===X2?c((0,KO.newError)("Server at "+i.asHostPort()+" can't perform routing. Make sure you are connecting to a causal cluster",Q2)):s(K2.RawRoutingTable.ofNull())}})})},r}();vo.default=$2});var $O=l(ot=>{"use strict";var XO=ot&&ot.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ot,"__esModule",{value:!0});ot.RoutingTable=ot.Rediscovery=void 0;var JO=XO(QO());ot.Rediscovery=JO.default;var eH=XO(th());ot.RoutingTable=eH.default;ot.default=JO.default});var ug=l(U=>{"use strict";var tH=U&&U.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),os=U&&U.__assign||function(){return os=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},os.apply(this,arguments)},rH=U&&U.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),nH=U&&U.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),iH=U&&U.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&rH(t,r,e);return nH(t,r),t},ae=U&&U.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return new(e||(e=Promise))(function(o,u){function s(f){try{a(n.next(f))}catch(h){u(h)}}function c(f){try{a(n.throw(f))}catch(h){u(h)}}function a(f){f.done?o(f.value):i(f.value).then(s,c)}a((n=n.apply(r,t||[])).next())})},ce=U&&U.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(a){return function(f){return c([a,f])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,i=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){e.label=a[1];break}if(a[0]===6&&e.label<o[1]){e.label=o[1],o=a;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(a);break}o[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(r,e)}catch(f){a=[6,f],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},eg=U&&U.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},tg=U&&U.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],u;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){u={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(u)throw u.error}}return o},og=U&&U.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(U,"__esModule",{value:!0});var ge=P(),rg=iH($O()),oH=Br(),uH=og(Vl()),sH=og(ts()),aH=il(),ir=es(),cH=ge.error.SERVICE_UNAVAILABLE,bo=ge.error.SESSION_EXPIRED,fH=ge.internal.bookmark.Bookmark,yo=ge.internal.constants,ng=yo.ACCESS_MODE_READ,ig=yo.ACCESS_MODE_WRITE,lH=yo.BOLT_PROTOCOL_V3,hH=yo.BOLT_PROTOCOL_V4_0,pH=yo.BOLT_PROTOCOL_V4_4,_H="Neo.ClientError.Security.Unauthorized",dH="Neo.ClientError.Database.DatabaseNotFound",vH="system",rh=null,bH=(0,ge.int)(3e4),yH=function(r){tH(t,r);function t(e){var n=e.id,i=e.address,o=e.routingContext,u=e.hostNameResolver,s=e.config,c=e.log,a=e.userAgent,f=e.authToken,h=e.routingTablePurgeDelay,p=r.call(this,{id:n,config:s,log:c,userAgent:a,authToken:f},function(y){return(0,ir.createChannelConnection)(y,p._config,p._createConnectionErrorHandler(),p._log,p._routingContext)})||this;return p._routingContext=os(os({},o),{address:i.toString()}),p._seedRouter=i,p._rediscovery=new rg.default(p._routingContext),p._loadBalancingStrategy=new aH.LeastConnectedLoadBalancingStrategy(p._connectionPool),p._hostNameResolver=u,p._dnsResolver=new oH.HostNameResolver,p._log=c,p._useSeedRouter=!0,p._routingTableRegistry=new mH(h?(0,ge.int)(h):bH),p}return t.prototype._createConnectionErrorHandler=function(){return new ir.ConnectionErrorHandler(bo)},t.prototype._handleUnavailability=function(e,n,i){return this._log.warn("Routing driver "+this._id+" will forget "+n+" for database '"+i+"' because of an error "+e.code+" '"+e.message+"'"),this.forget(n,i||rh),e},t.prototype._handleAuthorizationExpired=function(e,n,i){return this._log.warn("Routing driver "+this._id+" will close connections to "+n+" for database '"+i+"' because of an error "+e.code+" '"+e.message+"'"),this._connectionPool.purge(n).catch(function(){}),e},t.prototype._handleWriteFailure=function(e,n,i){return this._log.warn("Routing driver "+this._id+" will forget writer "+n+" for database '"+i+"' because of an error "+e.code+" '"+e.message+"'"),this.forgetWriter(n,i||rh),(0,ge.newError)("No longer possible to write to server at "+n,bo)},t.prototype.acquireConnection=function(e){var n=e===void 0?{}:e,i=n.accessMode,o=n.database,u=n.bookmarks,s=n.impersonatedUser,c=n.onDatabaseNameResolved;return ae(this,void 0,void 0,function(){var a,f,h,p,y,O,w,z,S=this;return ce(this,function(D){switch(D.label){case 0:return h={database:o||rh},p=new ir.ConnectionErrorHandler(bo,function(W,fe){return S._handleUnavailability(W,fe,h.database)},function(W,fe){return S._handleWriteFailure(W,fe,h.database)},function(W,fe){return S._handleAuthorizationExpired(W,fe,h.database)}),[4,this._freshRoutingTable({accessMode:i,database:h.database,bookmark:u,impersonatedUser:s,onDatabaseNameResolved:function(W){h.database=h.database||W,c&&c(W)}})];case 1:if(y=D.sent(),i===ng)f=this._loadBalancingStrategy.selectReader(y.readers),a="read";else if(i===ig)f=this._loadBalancingStrategy.selectWriter(y.writers),a="write";else throw(0,ge.newError)("Illegal mode "+i);if(!f)throw(0,ge.newError)("Failed to obtain connection towards "+a+" server. Known routing table is: "+y,bo);D.label=2;case 2:return D.trys.push([2,4,,5]),[4,this._acquireConnectionToServer(f,a,y)];case 3:return O=D.sent(),[2,new ir.DelegateConnection(O,p)];case 4:throw w=D.sent(),z=p.handleAndTransformError(w,f),z;case 5:return[2]}})})},t.prototype._hasProtocolVersion=function(e){return ae(this,void 0,void 0,function(){var n,i,o,u,s,c;return ce(this,function(a){switch(a.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:n=a.sent(),o=0,a.label=2;case 2:if(!(o<n.length))return[3,8];a.label=3;case 3:return a.trys.push([3,6,,7]),[4,(0,ir.createChannelConnection)(n[o],this._config,this._createConnectionErrorHandler(),this._log)];case 4:return u=a.sent(),s=u.protocol()?u.protocol().version:null,[4,u.close()];case 5:return a.sent(),s?[2,e(s)]:[2,!1];case 6:return c=a.sent(),i=c,[3,7];case 7:return o++,[3,2];case 8:if(i)throw i;return[2,!1]}})})},t.prototype.supportsMultiDb=function(){return ae(this,void 0,void 0,function(){return ce(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=hH})];case 1:return[2,e.sent()]}})})},t.prototype.supportsTransactionConfig=function(){return ae(this,void 0,void 0,function(){return ce(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=lH})];case 1:return[2,e.sent()]}})})},t.prototype.supportsUserImpersonation=function(){return ae(this,void 0,void 0,function(){return ce(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=pH})];case 1:return[2,e.sent()]}})})},t.prototype.forget=function(e,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(i){return i.forget(e)}}),this._connectionPool.purge(e).catch(function(){})},t.prototype.forgetWriter=function(e,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(i){return i.forgetWriter(e)}})},t.prototype._acquireConnectionToServer=function(e,n,i){return this._connectionPool.acquire(e)},t.prototype._freshRoutingTable=function(e){var n=e===void 0?{}:e,i=n.accessMode,o=n.database,u=n.bookmark,s=n.impersonatedUser,c=n.onDatabaseNameResolved,a=this._routingTableRegistry.get(o,function(){return new rg.RoutingTable({database:o})});return a.isStaleFor(i)?(this._log.info('Routing table is stale for database: "'+o+'" and access mode: "'+i+'": '+a),this._refreshRoutingTable(a,u,s,c)):a},t.prototype._refreshRoutingTable=function(e,n,i,o){var u=e.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(u,e,n,i,o):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(u,e,n,i,o)},t.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(e,n,i,o,u){return ae(this,void 0,void 0,function(){var s,c;return ce(this,function(a){switch(a.label){case 0:return s=[],[4,this._fetchRoutingTableUsingSeedRouter(s,this._seedRouter,n,i,o)];case 1:return c=a.sent(),c?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(e,n,i,o)];case 3:c=a.sent(),a.label=4;case 4:return[4,this._applyRoutingTableIfPossible(n,c,u)];case 5:return[2,a.sent()]}})})},t.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(e,n,i,o,u){return ae(this,void 0,void 0,function(){var s;return ce(this,function(c){switch(c.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(e,n,i,o)];case 1:return s=c.sent(),s?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(e,this._seedRouter,n,i,o)];case 2:s=c.sent(),c.label=3;case 3:return[4,this._applyRoutingTableIfPossible(n,s,u)];case 4:return[2,c.sent()]}})})},t.prototype._fetchRoutingTableUsingKnownRouters=function(e,n,i,o){return ae(this,void 0,void 0,function(){var u,s;return ce(this,function(c){switch(c.label){case 0:return[4,this._fetchRoutingTable(e,n,i,o)];case 1:return u=c.sent(),u?[2,u]:(s=e.length-1,t._forgetRouter(n,e,s),[2,null])}})})},t.prototype._fetchRoutingTableUsingSeedRouter=function(e,n,i,o,u){return ae(this,void 0,void 0,function(){var s,c;return ce(this,function(a){switch(a.label){case 0:return[4,this._resolveSeedRouter(n)];case 1:return s=a.sent(),c=s.filter(function(f){return e.indexOf(f)<0}),[4,this._fetchRoutingTable(c,i,o,u)];case 2:return[2,a.sent()]}})})},t.prototype._resolveSeedRouter=function(e){return ae(this,void 0,void 0,function(){var n,i,o=this;return ce(this,function(u){switch(u.label){case 0:return[4,this._hostNameResolver.resolve(e)];case 1:return n=u.sent(),[4,Promise.all(n.map(function(s){return o._dnsResolver.resolve(s)}))];case 2:return i=u.sent(),[2,[].concat.apply([],i)]}})})},t.prototype._fetchRoutingTable=function(e,n,i,o){var u=this;return e.reduce(function(s,c,a){return ae(u,void 0,void 0,function(){var f,h,p,y;return ce(this,function(O){switch(O.label){case 0:return[4,s];case 1:return f=O.sent(),f?[2,f]:(h=a-1,t._forgetRouter(n,e,h),[4,this._createSessionForRediscovery(c,i,o)]);case 2:if(p=O.sent(),!p)return[3,8];O.label=3;case 3:return O.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(p,n.database,c,o)];case 4:return[2,O.sent()];case 5:if(y=O.sent(),y&&y.code===dH)throw y;return this._log.warn("unable to fetch routing table because of an error "+y),[2,null];case 6:return p.close(),[7];case 7:return[3,9];case 8:return[2,null];case 9:return[2]}})})},Promise.resolve(null))},t.prototype._createSessionForRediscovery=function(e,n,i){return ae(this,void 0,void 0,function(){var o,u,s,c,a,f=this;return ce(this,function(h){switch(h.label){case 0:return h.trys.push([0,2,,3]),[4,this._connectionPool.acquire(e)];case 1:return o=h.sent(),u=ir.ConnectionErrorHandler.create({errorCode:bo,handleAuthorizationExpired:function(p,y){return f._handleAuthorizationExpired(p,y)}}),s=new uH.default(new ir.DelegateConnection(o,u)),c=o.protocol().version,c<4?[2,new ge.Session({mode:ig,bookmark:fH.empty(),connectionProvider:s})]:[2,new ge.Session({mode:ng,database:vH,bookmark:n,connectionProvider:s,impersonatedUser:i})];case 2:if(a=h.sent(),a&&a.code===_H)throw a;return[2,null];case 3:return[2]}})})},t.prototype._applyRoutingTableIfPossible=function(e,n,i){return ae(this,void 0,void 0,function(){return ce(this,function(o){switch(o.label){case 0:if(!n)throw(0,ge.newError)("Could not perform discovery. No routing servers available. Known routing table: "+e,cH);return n.writers.length===0&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(n,i)];case 1:return o.sent(),[2,n]}})})},t.prototype._updateRoutingTable=function(e,n){return ae(this,void 0,void 0,function(){return ce(this,function(i){switch(i.label){case 0:return[4,this._connectionPool.keepAll(e.allServers())];case 1:return i.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(e),n(e.database),this._log.info("Updated routing table "+e),[2]}})})},t._forgetRouter=function(e,n,i){var o=n[i];e&&o&&e.forgetRouter(o)},t}(sH.default);U.default=yH;var mH=function(){function r(t){this._tables=new Map,this._routingTablePurgeDelay=t}return r.prototype.register=function(t){return this._tables.set(t.database,t),this},r.prototype.apply=function(t,e){var n=e===void 0?{}:e,i=n.applyWhenExists,o=n.applyWhenDontExists,u=o===void 0?function(){}:o;return this._tables.has(t)?i(this._tables.get(t)):typeof t=="string"||t===null?u():this._forEach(i),this},r.prototype.get=function(t,e){return this._tables.has(t)?this._tables.get(t):typeof e=="function"?e():e},r.prototype.removeExpired=function(){var t=this;return this._removeIf(function(e){return e.isExpiredFor(t._routingTablePurgeDelay)})},r.prototype._forEach=function(t){var e,n;try{for(var i=eg(this._tables),o=i.next();!o.done;o=i.next()){var u=tg(o.value,2),s=u[1];t(s)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return this},r.prototype._remove=function(t){return this._tables.delete(t),this},r.prototype._removeIf=function(t){var e,n;try{for(var i=eg(this._tables),o=i.next();!o.done;o=i.next()){var u=tg(o.value,2),s=u[0],c=u[1];t(c)&&this._remove(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return this},r}()});var sg=l(Se=>{"use strict";var us=Se&&Se.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Se,"__esModule",{value:!0});Se.RoutingConnectionProvider=Se.DirectConnectionProvider=Se.PooledConnectionProvider=Se.SingleConnectionProvider=void 0;var OH=Vl();Object.defineProperty(Se,"SingleConnectionProvider",{enumerable:!0,get:function(){return us(OH).default}});var gH=ts();Object.defineProperty(Se,"PooledConnectionProvider",{enumerable:!0,get:function(){return us(gH).default}});var SH=HO();Object.defineProperty(Se,"DirectConnectionProvider",{enumerable:!0,get:function(){return us(SH).default}});var EH=ug();Object.defineProperty(Se,"RoutingConnectionProvider",{enumerable:!0,get:function(){return us(EH).default}})});var cg=l(L=>{"use strict";var ag=L&&L.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),wH=L&&L.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Zr=L&&L.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&ag(t,r,e);return wH(t,r),t},TH=L&&L.__exportStar||function(r,t){for(var e in r)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&ag(t,r,e)};Object.defineProperty(L,"__esModule",{value:!0});L.pool=L.packstream=L.channel=L.buf=L.bolt=L.loadBalancing=void 0;L.loadBalancing=Zr(il());L.bolt=Zr(Zu());L.buf=Zr(Ru());L.channel=Zr(Br());L.packstream=Zr(Mu());L.pool=Zr(Bl());TH(sg(),L)});var ss=gt();Object.defineProperty(exports,"__esModule",{value:!0});exports.driver=_g;Object.defineProperty(exports,"Driver",{enumerable:!0,get:function(){return mo.Driver}});Object.defineProperty(exports,"Neo4jError",{enumerable:!0,get:function(){return b.Neo4jError}});Object.defineProperty(exports,"error",{enumerable:!0,get:function(){return b.error}});Object.defineProperty(exports,"Integer",{enumerable:!0,get:function(){return b.Integer}});Object.defineProperty(exports,"int",{enumerable:!0,get:function(){return b.int}});Object.defineProperty(exports,"isInt",{enumerable:!0,get:function(){return b.isInt}});Object.defineProperty(exports,"isPoint",{enumerable:!0,get:function(){return b.isPoint}});Object.defineProperty(exports,"Point",{enumerable:!0,get:function(){return b.Point}});Object.defineProperty(exports,"Date",{enumerable:!0,get:function(){return b.Date}});Object.defineProperty(exports,"DateTime",{enumerable:!0,get:function(){return b.DateTime}});Object.defineProperty(exports,"Duration",{enumerable:!0,get:function(){return b.Duration}});Object.defineProperty(exports,"isDate",{enumerable:!0,get:function(){return b.isDate}});Object.defineProperty(exports,"isDateTime",{enumerable:!0,get:function(){return b.isDateTime}});Object.defineProperty(exports,"isDuration",{enumerable:!0,get:function(){return b.isDuration}});Object.defineProperty(exports,"isLocalDateTime",{enumerable:!0,get:function(){return b.isLocalDateTime}});Object.defineProperty(exports,"isLocalTime",{enumerable:!0,get:function(){return b.isLocalTime}});Object.defineProperty(exports,"isTime",{enumerable:!0,get:function(){return b.isTime}});Object.defineProperty(exports,"LocalDateTime",{enumerable:!0,get:function(){return b.LocalDateTime}});Object.defineProperty(exports,"LocalTime",{enumerable:!0,get:function(){return b.LocalTime}});Object.defineProperty(exports,"Time",{enumerable:!0,get:function(){return b.Time}});Object.defineProperty(exports,"Node",{enumerable:!0,get:function(){return b.Node}});Object.defineProperty(exports,"Path",{enumerable:!0,get:function(){return b.Path}});Object.defineProperty(exports,"PathSegment",{enumerable:!0,get:function(){return b.PathSegment}});Object.defineProperty(exports,"Relationship",{enumerable:!0,get:function(){return b.Relationship}});Object.defineProperty(exports,"UnboundRelationship",{enumerable:!0,get:function(){return b.UnboundRelationship}});Object.defineProperty(exports,"Record",{enumerable:!0,get:function(){return b.Record}});Object.defineProperty(exports,"ResultSummary",{enumerable:!0,get:function(){return b.ResultSummary}});Object.defineProperty(exports,"Plan",{enumerable:!0,get:function(){return b.Plan}});Object.defineProperty(exports,"ProfiledPlan",{enumerable:!0,get:function(){return b.ProfiledPlan}});Object.defineProperty(exports,"QueryStatistics",{enumerable:!0,get:function(){return b.QueryStatistics}});Object.defineProperty(exports,"Notification",{enumerable:!0,get:function(){return b.Notification}});Object.defineProperty(exports,"ServerInfo",{enumerable:!0,get:function(){return b.ServerInfo}});Object.defineProperty(exports,"Result",{enumerable:!0,get:function(){return b.Result}});Object.defineProperty(exports,"auth",{enumerable:!0,get:function(){return b.auth}});Object.defineProperty(exports,"Session",{enumerable:!0,get:function(){return b.Session}});Object.defineProperty(exports,"Transaction",{enumerable:!0,get:function(){return b.Transaction}});Object.defineProperty(exports,"RxSession",{enumerable:!0,get:function(){return lg.default}});Object.defineProperty(exports,"RxTransaction",{enumerable:!0,get:function(){return hg.default}});Object.defineProperty(exports,"RxResult",{enumerable:!0,get:function(){return pg.default}});exports.default=exports.temporal=exports.spatial=exports.session=exports.types=exports.logging=exports.integer=void 0;var mo=yy(),PH=ss(my()),b=P(),fg=cg(),lg=ss(el()),hg=ss(Xf()),pg=ss(yu()),as=b.internal.util,CH=as.ENCRYPTION_ON,wZ=as.ENCRYPTION_OFF,IH=as.assertString,RH=as.isEmptyObjectOrNull,AH=b.internal.serverAddress.ServerAddress,jH=b.internal.urlUtil;function _g(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};IH(r,"Bolt URL");var n=jH.parseDatabaseUrl(r),i=!1,o=!1,u;switch(n.scheme){case"bolt":break;case"bolt+s":o=!0,u="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":o=!0,u="TRUST_ALL_CERTIFICATES";break;case"neo4j":i=!0;break;case"neo4j+s":o=!0,u="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",i=!0;break;case"neo4j+ssc":o=!0,u="TRUST_ALL_CERTIFICATES",i=!0;break;default:throw new Error("Unknown scheme: ".concat(n.scheme))}if(o){if("encrypted"in e||"trust"in e)throw new Error("Encryption/trust can only be configured either through URL or config, not both");e.encrypted=CH,e.trust=u}t=t||{},t.scheme=t.scheme||"none",e.userAgent=e.userAgent||qH;var s=AH.fromUrl(n.hostAndPort),c={address:s,typename:i?"Routing":"Direct",routing:i};return new mo.Driver(c,e,a());function a(){if(i)return function(f,h,p,y){return new fg.RoutingConnectionProvider({id:f,config:h,log:p,hostNameResolver:y,authToken:t,address:s,userAgent:h.userAgent,routingContext:n.query})};if(!RH(n.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(r,"'"));return function(f,h,p){return new fg.DirectConnectionProvider({id:f,config:h,log:p,authToken:t,address:s,userAgent:h.userAgent})}}}var qH="neo4j-javascript/"+PH.default,dg={console:function(r){function t(e){return r.apply(this,arguments)}return t.toString=function(){return r.toString()},t}(function(r){return{level:r,logger:function(e,n){return console.log("".concat(global.Date.now()," ").concat(e.toUpperCase()," ").concat(n))}}})};exports.logging=dg;var vg={Node:b.Node,Relationship:b.Relationship,UnboundRelationship:b.UnboundRelationship,PathSegment:b.PathSegment,Path:b.Path,Result:b.Result,ResultSummary:b.ResultSummary,Record:b.Record,Point:b.Point,Date:b.Date,DateTime:b.DateTime,Duration:b.Duration,LocalDateTime:b.LocalDateTime,LocalTime:b.LocalTime,Time:b.Time,Integer:b.Integer};exports.types=vg;var bg={READ:mo.READ,WRITE:mo.WRITE};exports.session=bg;var yg={toNumber:b.toNumber,toString:b.toString,inSafeRange:b.inSafeRange};exports.integer=yg;var mg={isPoint:b.isPoint};exports.spatial=mg;var Og={isDuration:b.isDuration,isLocalTime:b.isLocalTime,isTime:b.isTime,isDate:b.isDate,isLocalDateTime:b.isLocalDateTime,isDateTime:b.isDateTime};exports.temporal=Og;var NH={driver:_g,int:b.int,isInt:b.isInt,isPoint:b.isPoint,isDuration:b.isDuration,isLocalTime:b.isLocalTime,isTime:b.isTime,isDate:b.isDate,isLocalDateTime:b.isLocalDateTime,isDateTime:b.isDateTime,integer:yg,Neo4jError:b.Neo4jError,auth:b.auth,logging:dg,types:vg,session:bg,error:b.error,spatial:mg,temporal:Og,Driver:mo.Driver,Session:b.Session,Transaction:b.Transaction,Result:b.Result,RxSession:lg.default,RxTransaction:hg.default,RxResult:pg.default,ResultSummary:b.ResultSummary,Plan:b.Plan,ProfiledPlan:b.ProfiledPlan,QueryStatistics:b.QueryStatistics,Notification:b.Notification,ServerInfo:b.ServerInfo,Record:b.Record,Node:b.Node,Relationship:b.Relationship,UnboundRelationship:b.UnboundRelationship,Path:b.Path,PathSegment:b.PathSegment,Point:b.Point,Integer:b.Integer,Duration:b.Duration,LocalTime:b.LocalTime,Time:b.Time,Date:b.Date,LocalDateTime:b.LocalDateTime,DateTime:b.DateTime},xH=NH;exports.default=xH;
